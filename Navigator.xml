<?xml version="1.0" encoding="utf-8" ?>
<NavigatorContent version="1.0.0.2">
  <Roles>
    <Role id="1">

      <Panes>



        <Pane Caption="Избранное по компании" Type="List">
	  <Items>

	<Item Caption="Все сервисы по компании" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select DOCTORNAME, ID, ISON, SERVICENAME, SERVICESTATUS, CLIENTNAME, STARTDATE, EXPIRATIONDATE, COMMENT
			from SERVICE_LIST_BY_COMPANY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
               		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер123</Name></Column>
                	<Column Id="ISON"><Name>Подключен?</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="SERVICESTATUS"><Name>Статус</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачен до</Name></Column>
                	<Column Id="COMMENT"><Name>Комментарий</Name></Column>
       		</ColumnsMeta>
		<EditorOpen>
			<Column>ID</Column>
			<Table>SERVICE</Table>
		</EditorOpen>
	</Item>



	  </Items>
        </Pane>


	
	<Pane Caption="База знаний" Type="List">
         <Items>
               <Item Caption="База знаний" Icon="company.png">
               <DataSourceType>Query</DataSourceType>
               <DataSource>select ID, QUESTION, KBGROUP, KBGROUP2, KBGROUP3, QUESTIONDATE, QUESTIONDOCTOR, ANSWER, ANSWERDATE, KBSTATUS, ANSWERDOCTOR
			from KBASE</DataSource>
			   <DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
					<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
				<ColumnsMeta>
						<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="QUESTION"><Name>Вопрос</Name></Column>
                		<Column Id="KBGROUP"><Name>Группа 1</Name></Column>
                		<Column Id="KBGROUP2"><Name>Группа 2</Name></Column>
                		<Column Id="KBGROUP3"><Name>Группа 3</Name></Column>
                		<Column Id="QUESTIONDATE"><Name>Дата вопроса</Name></Column>
                		<Column Id="QUESTIONDOCTOR"><Name>Автор вопроса</Name></Column>
                		<Column Id="ANSWER"><Name>Ответ</Name></Column>
                		<Column Id="ANSWERDATE"><Name>Дата ответа</Name></Column>
                		<Column Id="KBSTATUS"><Name>Статус</Name></Column>
                		<Column Id="ANSWERDOCTOR"><Name>Автор ответа</Name></Column>
		       	</ColumnsMeta>
					<NewButtons>
	               			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Задать вопрос</ButtonName>
					<ToolTip>Есть вопрос? Здесть Поищи! Не нашёл? Напиши!</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_ADD_QUEST</ProcedureName>
        	            		<ProcedureParams>
	                    <ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Добавление вопроса">

                        		<GeneratedStaticControls>
									<GeneratedStaticControl ID="Вопрос" ControlType="String">
										<VisibleIndex>1</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата добавления" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
										<VisibleIndex>2</VisibleIndex>
										<ReadOnly>true</ReadOnly>
									</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
								
								<GeneratedDataControls>
								<GeneratedDataControl ID="Группа 1" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>3</VisibleIndex>	                    		
								</GeneratedDataControl>
								<GeneratedDataControl ID="Группа 2" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP2 WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>4</VisibleIndex>	                    		
								</GeneratedDataControl>
								<GeneratedDataControl ID="Группа 3" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP3 WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>5</VisibleIndex>	                    		
								</GeneratedDataControl>
								</GeneratedDataControls>
								
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              		</NewButtons>

		<EditorOpen>
			<Column>ID</Column>
			<Table>KB</Table>
		</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>Новый вопрос</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>Есть ответ</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>На модерации23</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>Отклонён</Value1><Field>KBSTATUS</Field></Colorizer>
		</Colorizers>
	</Item>
        </Items>
        </Pane>


        <Pane Caption="KPI 2016" Type="List">
	  <Items>

	<Item Caption="Зарплата" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, NAME, SALARY
			from SCRM_SALARY_2016 ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="NAME"><Name>Наименование</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>NAME</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Зарплата - процент с продаж" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, STRPERCENT, income
			from SCRM_SALARY_2016_PERCENT ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Наименование</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>Сумма к оплате</Name></Column>
                	<Column Id="STRPERCENT"><Name>Процент</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>CLIENTNAME</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="KPI MC - Главный" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select KPINAME, SUMMA
			from KPI_2016_MS_TOTAL_SALARY ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="SUMMA"><Name>Выполнено в %</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>KPINAME</NameColumn>
              	</OpenDiagram>
	</Item>


	<Item Caption="KPI MC - Зарплата" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, SUMMA, SALARY
			from KPI_2016_MS_TOTAL_SALARY ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="SUMMA"><Name>Выполнено в %</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="TODO" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, subject, action, reason, expirationdate, dayamount, summa, priority
			from kpi_2016_ms_todo_main ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SUBJECT"><Name>Объект</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="REASON"><Name>Причина</Name></Column>
                	<Column Id="SUMMA"><Name>Принесет баллов</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>1</Value1><Field>PRIORITY</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>2</Value1><Field>PRIORITY</Field></Colorizer>
			<Colorizer Type="Equal"><Color>White</Color><Value1>3</Value1><Field>PRIORITY</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="KPI MC №1 - Запуск" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, AMOUNT, SUMMA, COMMENT, COMMENT2
			from KPI_2016_MS_LAUNCH ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="AMOUNT"><Name>Количество</Name></Column>
                	<Column Id="SUMMA"><Name>Баллы</Name></Column>
                	<Column Id="COMMENT"><Name>Формула подсчета баллов</Name></Column>
                	<Column Id="COMMENT2"><Name>Норма</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №1 - Оценки сендера" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, clientname, oldrate, newrate
			from KPI_2016_MS_SENDER ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="OLDRATE"><Name>Старая оценка</Name></Column>
                	<Column Id="NEWRATE"><Name>Новая оценка</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №1 - Контакты с ЛПР" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, clientname, OUTRESLPRCOUNT, OTHERLPRCOUNT, CLIENTWORKCOUNT
			from KPI_2016_CONTACTS ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="OUTRESLPRCOUNT"><Name>Исходящие звонки</Name></Column>
                	<Column Id="OTHERLPRCOUNT"><Name>Другие контакты</Name></Column>
                	<Column Id="CLIENTWORKCOUNT"><Name>Работы</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №1 - Нет контакта с ЛПР" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, OUTRESLPRCOUNT, OTHERLPRCOUNT, CLIENTWORKCOUNT
			from KPI_2016_NO_CONTACTS ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="OUTRESLPRCOUNT"><Name>Исходящие звонки</Name></Column>
                	<Column Id="OTHERLPRCOUNT"><Name>Другие контакты</Name></Column>
                	<Column Id="CLIENTWORKCOUNT"><Name>Работы</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №1 - TODO Запуск" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, subject, action, reason, summa, priority
			from kpi_2016_ms_1_launch_todo ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SUBJECT"><Name>Объект</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="REASON"><Name>Причина</Name></Column>
                	<Column Id="SUMMA"><Name>Принесет баллов</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №2 - Сервисы" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, AMOUNT, SUMMA, COMMENT, COMMENT2
			from KPI_2016_MS_3_SERVICE_MAIN ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="AMOUNT"><Name>Количество</Name></Column>
                	<Column Id="SUMMA"><Name>Баллы</Name></Column>
                	<Column Id="COMMENT"><Name>Формула подсчета баллов</Name></Column>
                	<Column Id="COMMENT2"><Name>Норма</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №2 - Запуски" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate
			from kpi_2016_ms_3_service_lauch ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №2 - Обслуживаются" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate, expirationdate
			from kpi_2016_ms_3_service_prolonged ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №2 - Просрочены" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate, expirationdate, dayamount
			from kpi_2016_ms_3_service_expired ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №2 - Отказы" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate, expirationdate, dayamount, rejectdate
			from kpi_2016_ms_3_service_reject ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
                	<Column Id="REJECTDATE"><Name>Дата отказа</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №2 - TODO Сервисы" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select id, serviceid, doctorname, clientname, servicename, expirationdate, action, dayamount
			from kpi_2016_ms_3_service_todo ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
               		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
               		<Column Id="SERVICEID"><Name>SERVICEID</Name></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
		<EditorOpen>
			<Column>ID</Column>
			<Table>SERVICE</Table>
		</EditorOpen>
               	<NewButtons>
                	<NewButton>
                  		<ButtonName>Продлить</ButtonName>
				<ToolTip>Продлил сервис, зафиксировал новую дату отключения</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_PROLONG</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Продлить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата отключения" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Коммент" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
              	</NewButtons>
	</Item>


	<Item Caption="KPI MC №3 - Продления" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, AMOUNT, SUMMA, COMMENT, COMMENT2
			from KPI_2016_MS_2_PROLONG ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="AMOUNT"><Name>Количество</Name></Column>
                	<Column Id="SUMMA"><Name>Баллы</Name></Column>
                	<Column Id="COMMENT"><Name>Формула подсчета баллов</Name></Column>
                	<Column Id="COMMENT2"><Name>Норма</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №3 - Продления за месяц" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_PROLONG ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №3 - Мои клиенты, которых продлил я сам" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_MS_2_PROLONG_BY_YOU ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №3 - Пропущено продлений в этом месяце" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_MS_2_NOT_PROLONG ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №3 - Непродленные клиенты" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_MS_2_TOTAL_NOT_PROLONG ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>

	
	<Item Caption="KPI MC №3 - TODO Продления" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, subject, action, reason, expirationdate, dayamount, summa, priority
			from kpi_2016_ms_2_prolong_todo ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SUBJECT"><Name>Объект</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="REASON"><Name>Причина</Name></Column>
                	<Column Id="SUMMA"><Name>Принесет баллов</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="Все сервисы" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select DOCTORNAME, ID, ISON, SERVICENAME, SERVICESTATUS, CLIENTNAME, STARTDATE, EXPIRATIONDATE, COMMENT
			from SERVICE_LIST_BY_MS</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
               		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="ISON"><Name>Подключен?</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="SERVICESTATUS"><Name>Статус</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачен до</Name></Column>
                	<Column Id="COMMENT"><Name>Комментарий</Name></Column>
       		</ColumnsMeta>
		<EditorOpen>
			<Column>ID</Column>
			<Table>SERVICE</Table>
		</EditorOpen>
	</Item>



	  </Items>
	</Pane>


        <Pane Caption="Аналитика" Type="List">
	  <Items>

		<Item Caption="Партнеры" Icon="16department.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>REKLAMA</DataSource>
		</Item>

	<Item Caption="Отчет по партнерам" Icon="16reklama.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, name, REKLAMALEVEL, CREATIONDATE, RECOMMENDCOUNT, HOTRECOMMENDCOUNT, clientcount from report_reklama_2 ('{0}', '{1}')</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>источник рекламы</Name></Column>
                		<Column Id="REKLAMALEVEL"><Name>Уровень партнера</Name></Column>
                		<Column Id="CREATIONDATE"><Name>Дата создания</Name></Column>
                		<Column Id="RECOMMENDCOUNT"><Name>Кол-во рекомендаций</Name></Column>
                		<Column Id="HOTRECOMMENDCOUNT"><Name>Кол-во горячих рекомендаций</Name></Column>
                		<Column Id="CLIENTCOUNT"><Name>Кол-во клиентов</Name></Column>
       		</ColumnsMeta>
		<EditorOpen>
			<Column>ID</Column>
			<Table>REKLAMA</Table>
		</EditorOpen>
	</Item>


	<Item Caption="Отчет по продажам" Icon="16products.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENTNAME, CARDNUMBER, MATERIALNAME, 
			MATERIALGROUP, AMOUNT, PRICE, SUMMA, SALARY, ISWHITE, SUMMA0, PAYMENTTYPE, COMPANY
		from REPORT_DAILY_MATERIAL_SALE2 ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="PRICE"><Name>Цена</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="SUMMA0"><Name>Себестоимость</Name></Column>
                		<Column Id="SALARY"><Name>Зарплата</Name></Column>
                		<Column Id="ISWHITE"><Name>Пок. в отчетах?</Name></Column>
                		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
                		<Column Id="COMPANY"><Name>Организация</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>MATERIALSALE</Table>
	</EditorOpen>
	</Item>


	  </Items>
	</Pane>

        <Pane Caption="АВС" Type="List">
	  <Items>


	<Item Caption="Отчет по продажам" Icon="16products.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENTNAME, MATERIALNAME, MATERIALGROUP, SUMMA
		from SCRM_REPORT_MATERIAL_SALE ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>MATERIALSALE</Table>
	</EditorOpen>
	</Item>


	  </Items>
	</Pane>



        <Pane Caption="Перспективность клиентов" Type="List">
	  <Items>


	<Item Caption="Перспективность клиентов" Icon="green1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select id, clientname, totalsumma, PLANNEDSUMMA, LASTMONTHSUMMA, TASKSUPPORTAMOUNT, 
			TASKMAINTENCEAMOUNT, CONTACTAMOUNT, STATENAME, INSTRUMENTMARK, INACTIVEDAYCOUNT, SUPPORTMANAGER, 
			RATING 
			from SCRM_REPORT_CLIENT_RATING ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
                		<Column Id="PLANNEDSUMMA"><Name>Сумма запланированных</Name></Column>
                		<Column Id="LASTMONTHSUMMA"><Name>Сумма покупок в посл. месяц</Name></Column>
                		<Column Id="TASKSUPPORTAMOUNT"><Name>Кол-во техподдержки</Name></Column>
                		<Column Id="TASKMAINTENCEAMOUNT"><Name>Кол-во др. задач по сопр.</Name></Column>
                		<Column Id="CONTACTAMOUNT"><Name>Кол-во контактов</Name></Column>
                		<Column Id="STATENAME"><Name>Состояние</Name></Column>
                		<Column Id="INSTRUMENTMARK"><Name>Сумма оценок за И.</Name></Column>
                		<Column Id="INACTIVEDAYCOUNT"><Name>Кол-во дней с посл. контакта/задачи</Name></Column>
                		<Column Id="SUPPORTMANAGER"><Name>МС</Name></Column>
                		<Column Id="RATING"><Name>Песпективность клиента</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	  </Item>

	  </Items>
	</Pane>


        <Pane Caption="МС" Type="List">
	  <Items>

	<Item Caption="Личные продажи - Динамика по месяцам" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE FROM REPORT_DYN ('{0}', 'SCRM_MS_REPORT_INCOME_KPI', 'SELFMANIPSUMMA')</DataSource>
                <ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="PARAMNAME"><Name>Месяц</Name></Column>
                	<Column Id="PARAMVALUE"><Name>Значение</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>0</DiagramType>
	                <NameColumn>PARAMNAME</NameColumn>
        	        <HiddenColumns>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>


	<Item Caption="МС - Зарплата" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, SELFMANIPSUMMA, STRPERCENT, income
			from SCRM_MS_REPORT_INCOME_KPI ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
                	<Column Id="SELFMANIPSUMMA"><Name>Сумма личных продаж</Name></Column>
                	<Column Id="STRPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="МС - KPI - Активность" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, PRIORITY, ACTIVITYNAME, DESCRIPTION, WEIGHT, DONEAMOUNT, DONETOTAL
			from KPI_ACTIVITY_MS ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="ACTIVITYNAME"><Name>Показатель</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
                	<Column Id="WEIGHT"><Name>Вес</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Сделано кол-во</Name></Column>
                	<Column Id="DONETOTAL"><Name>Сделано сумма</Name></Column>
       		</ColumnsMeta>
	</Item>



	<Item Caption="МС - KPI - Аккуратность - просроченные работы" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_EXPIRED</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="МС - KPI - Аккуратность - Контроль качества" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENT, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from KK_MANAGER_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Показатель</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Выполненные работы" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEDONE, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISACTDONE
			from KK_CLIENTWORK_DONE_MANAGER ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEDONE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISACTDONE"><Name>Акт получен?</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>1</Value1><Field>ISNEEDACT</Field></Colorizer>
		</Colorizers>
	</Item>

	  </Items>
	</Pane>



        <Pane Caption="SCRM Контроль качества Руководитель" Type="List">
	  <Items>


	<Item Caption="Планируемые работы (все сотрудники)" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE
			from KK_CLIENTWORK_BY_PERIOD ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>1</Value1><Field>ISHOTSALE</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Выполненные работы (все сотрудники)" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEDONE, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISACTDONE
			from KK_CLIENTWORK_DONE_BY_PERIOD ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEDONE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISACTDONE"><Name>Акт получен?</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>1</Value1><Field>ISNEEDACT</Field></Colorizer>
		</Colorizers>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Получить акт</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_ACT_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>
			</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTTASK</Table>
	</EditorOpen>
	</Item>



	<Item Caption="План работ - просрочены (все сотрудники)" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_EXPIRED_COMPANY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Контроль качества (все сотрудники)" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENT, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from KK_BY_PERIOD ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Показатель</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Зарплата старый (все сотрудники)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, income
			from SCRM_REPORT_DOCTOR_INCOME ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="Зарплата kpi (по компании)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, doctorname, KPINAME, KPIDESCRIPTION, KPIVALUE, MARKDESCRIPTION, MARK, SALARY
			from KPI_SALARY ('{0}', '{1}', 0)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="KPIDESCRIPTION"><Name>Описание</Name></Column>
                	<Column Id="KPIVALUE"><Name>Значение</Name></Column>
                	<Column Id="MARKDESCRIPTION"><Name>Описание оценки</Name></Column>
                	<Column Id="MARK"><Name>Оценка</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="kpi активность (по компании)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, PRIORITY, ACTIVITYNAME, WEIGHT, PLANNEDAMOUNT, PLANNEDSALEAMOUNT, 
			PLANNEDTOTAL, DONEAMOUNT, DONETOTAL, DESCRIPTION
			from KPI_ACTIVITY ('{0}', '{1}', 0)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="ACTIVITYNAME"><Name>Показатель</Name></Column>
                	<Column Id="WEIGHT"><Name>Вес</Name></Column>
                	<Column Id="PLANNEDAMOUNT"><Name>План. кол-во</Name></Column>
                	<Column Id="PLANNEDSALEAMOUNT"><Name>План. кол-во продаж</Name></Column>
                	<Column Id="PLANNEDTOTAL"><Name>План. сумма</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Сделано кол-во</Name></Column>
                	<Column Id="DONETOTAL"><Name>Сделано сумма</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="Контакты сводный (по компании)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select DOCTORNAME, CONTACTTYPENAME, AMOUNT, AMOUNTISSUCCESS, AMOUNTISNOTSUCCESS, 
			CLIENTAMOUNTSUCCESS, CLIENTGROUP1, CLIENTGROUP2, CLIENTGROUP3, CLIENTGROUP4, CLIENTGROUP5
			from KPI_CONTACTS ('{0}', '{1}', 0)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CONTACTTYPENAME"><Name>Вид контакта</Name></Column>
                	<Column Id="AMOUNT"><Name>Общее кол-во</Name></Column>
                	<Column Id="AMOUNTISSUCCESS"><Name>Кол-во результативных контактов (РЗ)</Name></Column>
                	<Column Id="AMOUNTISNOTSUCCESS"><Name>Кол-во нерезультативных контактов</Name></Column>
                	<Column Id="CLIENTAMOUNTSUCCESS"><Name>Кол-во клиентов по РК</Name></Column>
                	<Column Id="CLIENTGROUP1"><Name>Клиентов РК: потенциальных</Name></Column>
                	<Column Id="CLIENTGROUP2"><Name>Клиентов РК: первый год</Name></Column>
                	<Column Id="CLIENTGROUP3"><Name>Клиентов РК: продленных</Name></Column>
                	<Column Id="CLIENTGROUP4"><Name>Клиентов РК: не продленных</Name></Column>
                	<Column Id="CLIENTGROUP5"><Name>Клиентов РК: отказ (=не клиент)</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Контакты детальный (по компании)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, DOCTORNAME, OPERATIONDATE, CLIENTNAME, PERSONNAME, DICTCONTACTTYPENAME, COMMENT, 
			ISSUCCESS, DICTDEALINGREASONNAME
			from REPORT_CONTACT_DETAILS ('{0}', '{1}', 0)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="PERSONNAME"><Name>Контактное лицо</Name></Column>
                	<Column Id="DICTCONTACTTYPENAME"><Name>Вид контакта</Name></Column>
                	<Column Id="COMMENT"><Name>Комментарий</Name></Column>
                	<Column Id="ISSUCCESS"><Name>Результативный?</Name></Column>
                	<Column Id="DICTDEALINGREASONNAME"><Name>Причина недозвона</Name></Column>
       		</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTCONTACT</Table>
	</EditorOpen>
	</Item>



	<Item Caption="Воронка продаж (все сотрудники) диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_DONE ('{0}', '{1}', 0)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка отказов (все сотрудники) диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_REJECT ('{0}', '{1}', 0)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка возможностей (все сотрудники) диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_AVAILABLE ('{0}', '{1}', 0)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка сводный (все сотрудники)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select STATENAME, DONEAMOUNT, STRDONEPERCENT, REJECTAMOUNT, STRREJECTPERCENT, AVAILABLEAMOUNT, STRAVAILABLEPERCENT, DESCRIPTION
			from SCRM_FUNNEL_COMMON ('{0}', '{1}', 0)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="STATENAME"><Name>Состояние</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Выполнено</Name></Column>
                	<Column Id="STRDONEPERCENT"><Name>Выполнено, %</Name></Column>
                	<Column Id="REJECTAMOUNT"><Name>Отказов</Name></Column>
                	<Column Id="STRREJECTPERCENT"><Name>Отказов, %</Name></Column>
                	<Column Id="AVAILABLEAMOUNT"><Name>Выполнить</Name></Column>
                	<Column Id="STRAVAILABLEPERCENT"><Name>Выполнить, %</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Всего</Value1><Field>STATENAME</Field></Colorizer>
		</Colorizers>
	</Item>

	  </Items>
	</Pane>





        <Pane Caption="SCRM Контроль качества менеджер" Type="List">
	  <Items>

	<Item Caption="План работ на сегодня" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="План работ - просрочены" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_EXPIRED</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="План работ скоро" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_SOON</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
              			<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			</NewButtons>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Выполненные работы" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEDONE, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISACTDONE
			from KK_CLIENTWORK_DONE_MANAGER ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEDONE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISACTDONE"><Name>Акт получен?</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>1</Value1><Field>ISNEEDACT</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="Контроль качества (сегодня)" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENT, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from KK_MANAGER_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Показатель</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>
<!-- by Andrey -->

<Item Caption="Отчет по заявкам" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select NUMBER, CREATEDATE, CREATEDOCTOR, NAME, DOCNAME, STATUS, OPERATIONDATE, ENDDATE, MSCOUNT, DEVCOUNT, STATUSID, DEVELOP, PRICE
			from REPORT_SUPPORTTASK ('{0}', '{1}')</DataSource>
			<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="NUMBER"><Name>Номер заявки</Name></Column>
                		<Column Id="CREATEDATE"><Name>Дата создания</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="NAME"><Name>Клиент</Name></Column>
						<Column Id="DOCNAME"><Name>Отв.сотр.</Name></Column>
						<Column Id="STATUS"><Name>Статус</Name></Column>
						<Column Id="OPERATIONDATE"><Name>Дата последнего изменения</Name></Column>
                		<Column Id="ENDDATE"><Name>Дедлайн</Name></Column>
                		<Column Id="MSCOUNT"><Name>Время МС</Name></Column>
						<Column Id="DEVCOUNT"><Name>Время разраб.</Name></Column>
						<Column Id="STATUSID"><Name>ID</Name><Visible>false</Visible></Column>
						<Column Id="DEVELOP"><Name>Разработчик</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
       	</ColumnsMeta>
	<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>4</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>8</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>6</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGray</Color><Value1>7</Value1><Field>STATUSID</Field></Colorizer>
		</Colorizers>
	</Item>
<!-- end -->

	<Item Caption="Зарплата старый" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, income
			from SCRM_MANAGER_REPORT_INCOME ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Зарплата kpi" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, doctorname, KPINAME, KPIDESCRIPTION, KPIVALUE, MARKDESCRIPTION, MARK, SALARY
			from KPI_SALARY ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="KPIDESCRIPTION"><Name>Описание</Name></Column>
                	<Column Id="KPIVALUE"><Name>Значение</Name></Column>
                	<Column Id="MARKDESCRIPTION"><Name>Описание оценки</Name></Column>
                	<Column Id="MARK"><Name>Оценка</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Зарплата прогрессивный процент" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, SELFMANIPSUMMA, STRPERCENT, income
			from SCRM_MANAGER_REPORT_INCOME_KPI ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
                	<Column Id="SELFMANIPSUMMA"><Name>Сумма личных продаж</Name></Column>
                	<Column Id="STRPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="kpi активность" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, PRIORITY, ACTIVITYNAME, WEIGHT, PLANNEDAMOUNT, PLANNEDSALEAMOUNT, 
			PLANNEDTOTAL, DONEAMOUNT, DONETOTAL, DESCRIPTION
			from KPI_ACTIVITY ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="ACTIVITYNAME"><Name>Показатель</Name></Column>
                	<Column Id="WEIGHT"><Name>Вес</Name></Column>
                	<Column Id="PLANNEDAMOUNT"><Name>План. кол-во</Name></Column>
                	<Column Id="PLANNEDSALEAMOUNT"><Name>План. кол-во продаж</Name></Column>
                	<Column Id="PLANNEDTOTAL"><Name>План. сумма</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Сделано кол-во</Name></Column>
                	<Column Id="DONETOTAL"><Name>Сделано сумма</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Контакты сводный (по менеджеру)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select DOCTORNAME, CONTACTTYPENAME, AMOUNT, AMOUNTISSUCCESS, AMOUNTISNOTSUCCESS, 
			CLIENTAMOUNTSUCCESS, CLIENTGROUP1, CLIENTGROUP2, CLIENTGROUP3, CLIENTGROUP4, CLIENTGROUP5
			from KPI_CONTACTS ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CONTACTTYPENAME"><Name>Вид контакта</Name></Column>
                	<Column Id="AMOUNT"><Name>Общее кол-во</Name></Column>
                	<Column Id="AMOUNTISSUCCESS"><Name>Кол-во результативных контактов (РК)</Name></Column>
                	<Column Id="AMOUNTISNOTSUCCESS"><Name>Кол-во нерезультативных контактов</Name></Column>
                	<Column Id="CLIENTAMOUNTSUCCESS"><Name>Кол-во клиентов по РК</Name></Column>
                	<Column Id="CLIENTGROUP1"><Name>Клиентов РК: потенциальных</Name></Column>
                	<Column Id="CLIENTGROUP2"><Name>Клиентов РК: первый год</Name></Column>
                	<Column Id="CLIENTGROUP3"><Name>Клиентов РК: продленных</Name></Column>
                	<Column Id="CLIENTGROUP4"><Name>Клиентов РК: не продленных</Name></Column>
                	<Column Id="CLIENTGROUP5"><Name>Клиентов РК: отказ (=не клиент)</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Контакты детальный (по менеджеру)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, DOCTORNAME, OPERATIONDATE, CLIENTNAME, PERSONNAME, DICTCONTACTTYPENAME, COMMENT, 
			ISSUCCESS, DICTDEALINGREASONNAME
			from REPORT_CONTACT_DETAILS ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="PERSONNAME"><Name>Контактное лицо</Name></Column>
                	<Column Id="DICTCONTACTTYPENAME"><Name>Вид контакта</Name></Column>
                	<Column Id="COMMENT"><Name>Комментарий</Name></Column>
                	<Column Id="ISSUCCESS"><Name>Результативный?</Name></Column>
                	<Column Id="DICTDEALINGREASONNAME"><Name>Причина недозвона</Name></Column>
       		</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTCONTACT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Воронка продаж диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_DONE ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка отказов диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_REJECT ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка возможностей диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_AVAILABLE ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка сводный" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select STATENAME, DONEAMOUNT, STRDONEPERCENT, REJECTAMOUNT, STRREJECTPERCENT, AVAILABLEAMOUNT, STRAVAILABLEPERCENT, DESCRIPTION
			from SCRM_FUNNEL_COMMON ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="STATENAME"><Name>Состояние</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Выполнено</Name></Column>
                	<Column Id="STRDONEPERCENT"><Name>Выполнено, %</Name></Column>
                	<Column Id="REJECTAMOUNT"><Name>Отказов</Name></Column>
                	<Column Id="STRREJECTPERCENT"><Name>Отказов, %</Name></Column>
                	<Column Id="AVAILABLEAMOUNT"><Name>Выполнить</Name></Column>
                	<Column Id="STRAVAILABLEPERCENT"><Name>Выполнить, %</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Всего</Value1><Field>STATENAME</Field></Colorizer>
		</Colorizers>
	</Item>

	  </Items>
	</Pane>

        <Pane Caption="Контроль качества" Type="List">
	  <Items>

	<Item Caption="Контроль качества работы администраторов" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select OPERATIONDATE, EMPLOYEE, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from REPORT_CONTROL ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="EMPLOYEE"><Name>Сотрудник</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок программы</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Действие</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Получение отчетов на емейл" Icon="48mail.png">
                <DataSourceType>ExternalProgram</DataSourceType>
	        <DataSource>Docs\sms.html</DataSource>
	</Item>

	<Item Caption="Технология Sycret - контроль качества (подробный)" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, TASKGROUP, TASKNAME, RECORDCOUNT, CORRECTRECCOUNT, CORRECTRECPERCENT, 
			MINRECCOUNT, STRRECCOUNTMORETHENMIN, KOEF, WEIGHT, R100, R5
			from  SYCRET_REPORT ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="TASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="TASKNAME"><Name>Показатель</Name></Column>
                		<Column Id="RECORDCOUNT"><Name>Общее кол-во записей</Name></Column>
                		<Column Id="CORRECTRECCOUNT"><Name>Кол-во правильных записей</Name></Column>
                		<Column Id="CORRECTRECPERCENT"><Name>% правильных записей</Name></Column>
                		<Column Id="MINRECCOUNT"><Name>Минимальное кол-во записей</Name></Column>
                		<Column Id="STRRECCOUNTMORETHENMIN"><Name>Записей больше чем мин.?</Name></Column>
                		<Column Id="KOEF"><Name>Коэффициент понижения</Name></Column>
                		<Column Id="WEIGHT"><Name>Важность данного показателя</Name></Column>
                		<Column Id="R100"><Name>Оценка по 100 балльной шкале</Name></Column>
                		<Column Id="R5"><Name>Оценка по 5-ти балльной шкале</Name></Column>
       	</ColumnsMeta>
	</Item>

	<Item Caption="Итоговая оценка" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ORDERNUMBER, TASKGROUP, R5
			from  SYCRET_REPORT_COMMON ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="ORDERNUMBER"><Name>№</Name></Column>
                		<Column Id="TASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="TASKNAME"><Name>Показатель</Name></Column>
                		<Column Id="R100"><Name>Оценка по 100 балльной шкале</Name></Column>
                		<Column Id="R5"><Name>Оценка по 5-ти балльной шкале</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итоговая оценка</Value1><Field>TASKGROUP</Field></Colorizer>
		</Colorizers>
	</Item>



	  </Items>
	</Pane>



        <Pane Caption="Блок Максима Сергеева" Type="List">
	  <Items>



	<Item Caption="Рейтинг клиентов" Icon="green1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select id, surname, name, secondname, cellphone, segmentname, cardtype, cardnumber, SEX, 
			MANIPULATIONCOUNT, MANIPULATIONSUMMA, SALESUMMA, TOTALSUMMA, 
			AVERAGESUMMA, AVERAGESALESUMMA, AVERAGECHECK,
			LASTVISITDATE, LASTVISITDAYCOUNT, CANCELCOUNT, FIRSTVISITSUMMA, AVERAGEVISITPERCENT 
			from report_client ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во посещений</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="AVERAGESUMMA"><Name>Средний чек на услуги</Name></Column>
                		<Column Id="SALESUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="AVERAGESALESUMMA"><Name>Средний чек на продажи</Name></Column>
                		<Column Id="AVERAGECHECK"><Name>Средний чек посещения</Name></Column>
                		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
                		<Column Id="SEX"><Name>Пол</Name></Column>
                		<Column Id="LASTVISITDATE"><Name>Дата последнего посещения</Name></Column>
                		<Column Id="LASTVISITDAYCOUNT"><Name>Кол-во дней с последнего посещения</Name></Column>
                		<Column Id="SURNAME"><Name>Фамилия</Name></Column>
                		<Column Id="NAME"><Name>Имя</Name></Column>
                		<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
                		<Column Id="CELLPHONE"><Name>Моб. телефон</Name></Column>
                		<Column Id="CARDTYPE"><Name>Тип карты</Name></Column>
                		<Column Id="SEGMENTNAME"><Name>Сегмент</Name></Column>
                		<Column Id="CANCELCOUNT"><Name>Кол-во отмененный посещений</Name></Column>
                		<Column Id="FIRSTVISITSUMMA"><Name>Первый чек</Name></Column>
                		<Column Id="AVERAGEVISITPERCENT"><Name>Первый чек в % от среднего чека</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Динамика посещений клиента" Icon="green1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE1, PARAMVALUE2 FROM REPORT_DYN2 ('{0}', 'REPORT_DYN_CLIENT_BY_CLIENT', 'TOTALSUMMA', 'AVERAGECHECK', '{1}')</DataSource>
                <ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
	               		<GeneratedDataControl ID="Клиент" ControlType="Grid">
                    			<DataSource>
					SELECT c.ID, c.SURNAME, c.name, c.secondname, c.cardnumber, c.cellphone
					FROM client c
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>SURNAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="SURNAME"><Name>Фамилия</Name></Column>
						<Column Id="NAME"><Name>Имя</Name></Column>
						<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
						<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
						<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
				</GeneratedDataControls>
                </ParamForm>
		<OpenDiagram>
                	<DiagramType>0</DiagramType>
	                <NameColumn>PARAMNAME</NameColumn>
        	        <HiddenColumns>
        	        </HiddenColumns>
              	</OpenDiagram>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="PARAMNAME"><Name>Месяц</Name></Column>
                	<Column Id="PARAMVALUE1"><Name>Выручка</Name></Column>
                	<Column Id="PARAMVALUE2"><Name>Средний чек</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="Рейтинг специалистов - выручка" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, name, DEPARTMENT, CLIENTCOUNT, CANCELCLIENTCOUNT, 
			MANIPULATIONSUMMA, SALESUMMA, DOCTORINCOME, UOV1, UOV2,
			TOTALHOURS, BUSYHOURS, BUSYPERCENT from report_doctor_rating ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="DEPARTMENT"><Name>Подразделение</Name></Column>
                		<Column Id="CLIENTCOUNT"><Name>Кол-во посещений</Name></Column>
                		<Column Id="CANCELCLIENTCOUNT"><Name>Кол-во отмен посещений</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="SALESUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="DOCTORINCOME"><Name>Зарплата начислена</Name></Column>
                		<Column Id="UOV1"><Name>УОВ1</Name></Column>
                		<Column Id="UOV2"><Name>УОВ2</Name></Column>
                		<Column Id="TOTALHOURS"><Name>Всего часов</Name></Column>
                		<Column Id="BUSYHOURS"><Name>Длительность услуг</Name></Column>
                		<Column Id="BUSYPERCENT"><Name>% загрузки</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
	</Item>




	<Item Caption="Рейтинг специалистов - средний чек" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, name, DEPARTMENT, 
			AVERAGECHECK, AVERAGECHECKMANIP, AVERAGECHECKSALE, 
			MANIPULATIONPERCENT, SALEPERCENT from report_doctor_rating ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="DEPARTMENT"><Name>Подразделение</Name></Column>
                		<Column Id="AVERAGECHECK"><Name>Средний чек</Name></Column>
                		<Column Id="AVERAGECHECKMANIP"><Name>Средний чек за услуги</Name></Column>
                		<Column Id="AVERAGECHECKSALE"><Name>Средний чек за продажи</Name></Column>
                		<Column Id="MANIPULATIONPERCENT"><Name>Доля услуг в %</Name></Column>
                		<Column Id="SALEPERCENT"><Name>Доля продаж в %</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Рейтинг специалистов - первичные клиенты" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, name, DEPARTMENT, 
			CLIENTCOUNTNEW, CLIENTCOUNTPERMANENT, NEWCLIENTPERCENT, 
			AVERAGEFIRSTCHECK, NEWCLIENTTOPERMANENTPERCENT
			from REPORT_DOCTOR_RATING_NEW_CLIENT ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="DEPARTMENT"><Name>Подразделение</Name></Column>
                		<Column Id="CLIENTCOUNTNEW"><Name>Кол-во первичных клиентов</Name></Column>
                		<Column Id="CLIENTCOUNTPERMANENT"><Name>Кол-во постоянных клиентов</Name></Column>
                		<Column Id="NEWCLIENTPERCENT"><Name>Процент первичных клиентов</Name></Column>
                		<Column Id="AVERAGEFIRSTCHECK"><Name>Средний первый чек</Name></Column>
                		<Column Id="NEWCLIENTTOPERMANENTPERCENT"><Name>Процент удержания клиентов</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Специалисты - Место в рейтинге" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorid as ID, name, department, manipulationsummaplace, salesummaplace,
        		averagecheckplace,  uov1place, uov2place, doctorincomeplace
			from report_doctor_rating_total ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="DEPARTMENT"><Name>Подразделение</Name></Column>
                		<Column Id="MANIPULATIONSUMMAPLACE"><Name>Сумма услуг</Name></Column>
                		<Column Id="SALESUMMAPLACE"><Name>Сумма продаж</Name></Column>
                		<Column Id="AVERAGECHECKPLACE"><Name>Средний чек</Name></Column>
                		<Column Id="UOV1PLACE"><Name>УОВ1</Name></Column>
                		<Column Id="UOV2PLACE"><Name>УОВ2</Name></Column>
                		<Column Id="DOCTORINCOMEPLACE"><Name>Зарплата начислена</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Коэффициент Абсентеизма" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorid as ID, name, department, workdaycount, abcentcount, koef
			from ms_report_doctor_rating_abcent ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="DEPARTMENT"><Name>Подразделение</Name></Column>
                		<Column Id="WORKDAYCOUNT"><Name>Рабочих дней</Name></Column>
                		<Column Id="ABCENTCOUNT"><Name>Пропусков по уважительной причине</Name></Column>
                		<Column Id="KOEF"><Name>Коэффициент абсентеизма</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Обучение специалиастов" Icon="comment24.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DOCTORSTUDY</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	</Item>


	<Item Caption="Эффективность обучения" Icon="comment24.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorid as ID, name, department, studysumma, manipsumma, koef
			from ms_report_doctor_rating_study ('{0}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="DEPARTMENT"><Name>Подразделение</Name></Column>
                		<Column Id="STUDYSUMMA"><Name>Сумма на обучение</Name></Column>
                		<Column Id="MANIPSUMMA"><Name>Выручка с услуг</Name></Column>
                		<Column Id="KOEF"><Name>Коэффициент эффективности обучения</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
	</Item>


	<Item Caption="По предприятию - очищенная выручка" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, SUMMA, PRICE0, DOCTORINCOME, UOV1, UOV2
			from ms_report_company ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="PARAMNAME"><Name>Статья доходов</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма к оплате</Name></Column>
                		<Column Id="PRICE0"><Name>Себестоимость материалов</Name></Column>
                		<Column Id="DOCTORINCOME"><Name>Зарплата</Name></Column>
                		<Column Id="UOV1"><Name>УОВ1</Name></Column>
                		<Column Id="UOV2"><Name>УОВ2</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="По подразделениям" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select DEPARTMENTNAME, MANIPULATIONAMOUNT, MANIPULATIONSUMMA, SALEAMOUNT, SALESUMMA, 
			COURSEAMOUNT, COURSESUMMA, TOTALSUMMA from REPORT_DEPARTMENT ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
              		<Column Id="DEPARTMENTNAME"><Name>Подразделение</Name></Column>
              		<Column Id="MANIPULATIONAMOUNT"><Name>Кол-во посещений</Name></Column>
              		<Column Id="MANIPULATIONSUMMA"><Name>Сумма к оплате за услуги</Name></Column>
              		<Column Id="SALEAMOUNT"><Name>Кол-во продаж (единиц)</Name></Column>
              		<Column Id="SALESUMMA"><Name>Сумма к оплате за продажи</Name></Column>
              		<Column Id="COURSEAMOUNT"><Name>Кол-во продаж курсов услуг</Name></Column>
              		<Column Id="COURSESUMMA"><Name>Сумма к оплате за курсы услуг</Name></Column>
              		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Общий долг клиентов на дату" Icon="16paypurple.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, SUMMA FROM REPORT_TOTAL_DOLG_BY_DATE ('{0}')</DataSource>
               		<ParamForm ID="Дата">
	               	<ParentType>NewType</ParentType>
              			<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Дата" ControlType="DateTime" />
              			</GeneratedStaticControls>
        	        </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="PARAMNAME"><Name>Название</Name></Column>
                	<Column Id="SUMMA"><Name>Сумма</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>PARAMNAME</Field></Colorizer>
		</Colorizers>
	</Item>




		<Item Caption="Склад - соотношение остатков к выручке" Icon="purple1graph128.png"> 
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE from MS_REPORT_STORE_REST_VS_PROFIT ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Месяц" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MONTHS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	</ParamForm>
		      	<ColumnsMeta>
        	        	<Column Id="PARAMNAME"><Name>Название</Name></Column>
                		<Column Id="PARAMVALUE"><Name>Значение</Name></Column>
       			</ColumnsMeta>
		</Item> 



		<Item Caption="Склад - запас материалов" Icon="purple1graph128.png"> 
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE from MS_REPORT_STORE_REST_VS_LAYOUT ('{0}', '{1}', '{2}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Месяц" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MONTHS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
              			<GeneratedStaticControls>
	                       		<GeneratedStaticControl ID="Кол-во дней" ControlType="Number">
		                        	<DefaultValue>30</DefaultValue>
              				</GeneratedStaticControl>
              			</GeneratedStaticControls>
                	</ParamForm>
		      	<ColumnsMeta>
        	        	<Column Id="PARAMNAME"><Name>Название</Name></Column>
                		<Column Id="PARAMVALUE"><Name>Значение</Name></Column>
       			</ColumnsMeta>
		</Item> 


	<Item Caption="Стоимость активов предприятия на дату" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PRICE0, AMORT, CURPRICE FROM MS_REPORT_ACTIVE_SUMMA ('{0}')</DataSource>
               		<ParamForm ID="Дата">
	               	<ParentType>NewType</ParentType>
              			<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Дата" ControlType="DateTime" />
              			</GeneratedStaticControls>
        	        </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="PARAMNAME"><Name>Название актива</Name></Column>
                	<Column Id="PRICE0"><Name>Первоначальная стоимость</Name></Column>
                	<Column Id="AMORT"><Name>% амортизации</Name></Column>
                	<Column Id="CURPRICE"><Name>Стоимость на дату</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>PARAMNAME</Field></Colorizer>
		</Colorizers>
	</Item>



	  </Items>
        </Pane>


        <Pane Caption="SMS Рассылки" Type="List">
	  <Items>

		<Item Caption="SMS рассылки" Icon="16info.png">
                <DataSourceType>ExternalProgram</DataSourceType>
	        <DataSource>Docs\sms.html</DataSource>
		</Item>

		<Item Caption="Настройки сообщений" Icon="16options.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>SMSSETTINGS</DataSource>
		</Item>

		<Item Caption="Шаблоны сообщений" Icon="16log.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>SMSPATTERN</DataSource>
		</Item>

		<Item Caption="Рассылки" Icon="16sms.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>SMSGROUP</DataSource>
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	              	  <NewButtons>
                		<NewButton>
					<MultiButtonLaunch>true</MultiButtonLaunch>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Создать пустую рассылку</ButtonName>
					<ToolTip>Создать пустую рассылку для дальнейшего наполнения</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_ADD_GROUP</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>0</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Шаблон" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSPATTERN</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
		                        	<ConnectedTable>SMSPATTERN</ConnectedTable>
					</GeneratedDataControl>
					</GeneratedDataControls>
	              			<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Название" ControlType="String" />
        	                  		<GeneratedStaticControl ID="Время начала" ControlType="TimeSpan" />
              				</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
					<MultiButtonLaunch>true</MultiButtonLaunch>
	       				<ButtonIcon>addblue24.png</ButtonIcon>
                         		<ButtonName>Создать массовую рассылку</ButtonName>
					<ToolTip>Создать рассылку по всей базе клиентов</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_ADD_GROUP</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Шаблон" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSPATTERN</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
	              			<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Название" ControlType="String" />
        	                  		<GeneratedStaticControl ID="Время начала" ControlType="TimeSpan" />
              				</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
				<NewButton>
        	          		<ButtonName>Повторить рассылку</ButtonName>
					<ToolTip>Повторная отправка недоставленным адресатам или новая рассылка по всем адресатам</ToolTip> 
                  			<ButtonIcon>addyel24.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
		        	        <ProcedureName>SMS_COPY_GROUP</ProcedureName>
        		            	<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Шаблон" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSPATTERN</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
	              			<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Название" ControlType="String">
							<SQLReplacement>select name || ' Повтор' as "VALUE" from smsgroup where id = {[ID]}</SQLReplacement>
	                      		<DependentFields>
						<DependentField>
				                        <FieldId>Шаблон</FieldId>
                            				<SQL>select P.ID AS "VALUE" FROM SMSPATTERN P, SMSGROUP G WHERE P.ID = G.SMSPATTERNID AND G.ID = {[ID]}</SQL>
                          			</DependentField>
	                      		</DependentFields>
                        			</GeneratedStaticControl>
        	                  		<GeneratedStaticControl ID="Время начала" ControlType="TimeSpan">
							<SQLReplacement>select starttime as "VALUE" from smsgroup where id = {[ID]}</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Только недост." ControlType="Checkbox" />
              				</GeneratedStaticControls>
                	    		</ParamForm>
			            	</LaunchBaseProcedure>
			        </NewButton>
                		<NewButton>
                  			<ButtonName>Удалить</ButtonName>
                  			<ButtonIcon>delete.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SMS_DELETE_GROUP</ProcedureName>
	           			<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                		</NewButton>
	              	  </NewButtons>
		</Item>




	<Item Caption="Сформировать рассылку" Icon="16do.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select id, surname, name, secondname, cellphone, segmentname, cardtype, cardnumber, SEX, 
			MANIPULATIONCOUNT, MANIPULATIONSUMMA, SALESUMMA, TOTALSUMMA, 
			LASTVISITDATE, LASTVISITDAYCOUNT, STRSENDSMS, STRVALIDCELLPHONE, CLIENTSTATE, CLIENTNAME 
			from report_client ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="FIO2"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во посещений</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="AVERAGESUMMA"><Name>Средний чек на услуги</Name></Column>
                		<Column Id="SALESUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="AVERAGESALESUMMA"><Name>Средний чек на продажи</Name></Column>
                		<Column Id="AVERAGECHECK"><Name>Средний чек посещения</Name></Column>
                		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
                		<Column Id="SEX"><Name>Пол</Name></Column>
                		<Column Id="LASTVISITDATE"><Name>Дата последнего посещения</Name></Column>
                		<Column Id="LASTVISITDAYCOUNT"><Name>Кол-во дней с последнего посещения</Name></Column>
                		<Column Id="SURNAME"><Name>Фамилия</Name></Column>
                		<Column Id="NAME"><Name>Имя</Name></Column>
                		<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
                		<Column Id="CELLPHONE"><Name>Моб. телефон</Name></Column>
                		<Column Id="CARDTYPE"><Name>Тип карты</Name></Column>
                		<Column Id="STRSENDSMS"><Name>Рассылать SMS?</Name></Column>
                		<Column Id="STRVALIDCELLPHONE"><Name>Телефон заполнен правильно?</Name></Column>
                		<Column Id="SEGMENTNAME"><Name>Сегмент</Name></Column>
                		<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightGray</Color><Value1>Нет</Value1><Field>STRVALIDCELLPHONE</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Tan</Color><Value1>Нет</Value1><Field>STRSENDSMS</Field></Colorizer>
		</Colorizers>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	              	  <NewButtons>
                		<NewButton>
					<MultiButtonLaunch>true</MultiButtonLaunch>
	       				<ButtonIcon>16sms.png</ButtonIcon>
                         		<ButtonName>Добавить в SMS рассылку</ButtonName>
					<ToolTip>Сформировать группу клиентов и добавить ее в SMS рассылку</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_ADD_CLIENT_LIST</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>IDS</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Рассылка" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
		                        	<ConnectedTable>SMSGROUP</ConnectedTable>
					</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
	</Item>




	<Item Caption="Текущий баланс / Пополнить счет" Icon="16paypurple.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select id, summa from SMS_get_balance</DataSource>
      	<ColumnsMeta>
	                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="SUMMA"><Name>Текущий баланс</Name></Column>
       	</ColumnsMeta>
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Print"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Excel"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Diagram"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>16payred.png</ButtonIcon>
                         		<ButtonName>Пополнить счет</ButtonName>
					<ToolTip>Выставить счет на указанную сумму для пополнения виртуального счета в системе</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_SET_REQUSITES</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выставить счет">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Организация" ControlType="String" />
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String" />
                        			<GeneratedStaticControl ID="Сумма" ControlType="String" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-1 -Plugins\GenWordDoc\smsinvoice.xml -0 -0</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
		            	</LaunchBaseProcedure>
                             	</NewButton>
              	  </NewButtons>
	</Item>

	<Item Caption="Отчет - Отправленные сообщения (подробный)" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select operationdate, smsgroup, smstype, client, cellphone, smstext, smscount, smsstatus, result, resultdescription 
			from SMS_report ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="OPERATIONDATE"><Name>Время отправки</Name></Column>
                		<Column Id="SMSGROUP"><Name>Рассылка</Name></Column>
                		<Column Id="SMSTYPE"><Name>Вид рассылки</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
                		<Column Id="SMSTEXT"><Name>Сообщение</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во единиц</Name></Column>
                		<Column Id="SMSSTATUS"><Name>Статус доставки</Name></Column>
                		<Column Id="RESULT"><Name>Код ошибки</Name></Column>
                		<Column Id="RESULTDESCRIPTION"><Name>Описание ошибки</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Отчет - Клиенты - Отправленные сообщения" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, SURNAME, NAME, SECONDNAME, CELLPHONE, SMSCOUNT, SMSCOUNTDELIVERED, SMSCOUNTUNDELIVERED
			from SMS_report_client ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
	                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="SURNAME"><Name>Фамилия</Name></Column>
                		<Column Id="NAME"><Name>Имя</Name></Column>
                		<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
                		<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во сообщений</Name></Column>
                		<Column Id="SMSCOUNTDELIVERED"><Name>Доставлено сообщений</Name></Column>
                		<Column Id="SMSCOUNTUNDELIVERED"><Name>Недоставлено сообщений</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Отчет - По рассылкам - Доставленные" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select GROUPID, GROUPNAME, SMSTYPE, SMSCOUNT, SUMMA
			from SMS_report_group ('{0}', '{1}')</DataSource>
	              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="GROUPID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="GROUPNAME"><Name>Рассылка</Name></Column>
                		<Column Id="SMSTYPE"><Name>Вид рассылки</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во доставленных сообщений</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Отчет - План рассылок" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select GROUPID, GROUPNAME, SMSTYPE, SMSCOUNT, SUMMA
			from SMS_report_group_plan ('{0}', '{1}')</DataSource>
	              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="GROUPID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="GROUPNAME"><Name>Рассылка</Name></Column>
                		<Column Id="SMSTYPE"><Name>Вид рассылки</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во планируемых сообщений</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
       	</ColumnsMeta>
	</Item>


	  </Items>
	</Pane>





        <Pane Caption="Справочники" Type="List">
	  <Items>

		<Item Caption="Инструкция" Icon="16info.png">
                <DataSourceType>ExternalProgram</DataSourceType>
	        <DataSource>Docs\howto.html</DataSource>
		</Item>


		<Item Caption="Организации" Icon="company.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>COMPANY</DataSource>
		</Item>


		<Item Caption="Подразделения" Icon="16department.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DEPARTMENT</DataSource>
		</Item>

		<Item Caption="Партнеры" Icon="16department.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>REKLAMA</DataSource>
		</Item>

		<Item Caption="Специалисты" Icon="16specs.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DOCTOR</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Caption>Добавить (полная)</Caption></DefaultButton>
        	</DefaultButtons>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Добавить (краткая)</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>ADD_DOCTOR</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Добавление специалиста">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Подразделение" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DEPARTMENT</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Должность" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM "POSITION"</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Фамилия" ControlType="String" />
                        			<GeneratedStaticControl ID="Имя" ControlType="String" />
                        			<GeneratedStaticControl ID="Отчество" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Уволить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>DOCTOR_FIRE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Увольнение специалиста">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Специалист" ControlType="String">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
                  			<ButtonName>Добавить группу услуг</ButtonName>
					<ToolTip>Добавить в услуги, оказываемые специалистом, группу услуг</ToolTip> 
                  			<ButtonIcon>16uslugi.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_DOCTOR_MANIPULATION_1</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Группа услуг">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
                  			<ButtonName>Добавить группу услуг 2</ButtonName>
					<ToolTip>Добавить в услуги, оказываемые специалистом, группу услуг 2</ToolTip> 
                  			<ButtonIcon>16uslugi.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_DOCTOR_MANIPULATION_2</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Группа услуг 2">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг 2" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP2</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
                  			<ButtonName>Добавить группу услуг 3</ButtonName>
					<ToolTip>Добавить в услуги, оказываемые специалистом, группу услуг 3</ToolTip> 
                  			<ButtonIcon>16uslugi.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_DOCTOR_MANIPULATION_3</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Группа услуг 3">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг 3" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP3</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
                  			<ButtonName>Добавить отдельную услугу</ButtonName>
					<ToolTip>Добавить в услуги, оказываемые специалистом, отдельную услугу</ToolTip> 
                  			<ButtonIcon>16uslugi.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_DOCTOR_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Услуга">
                			<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.NAME, m.PRICE, m.CODE, mg.NAME, mg2.NAME, mg3.NAME
					FROM manipulation m, manipulationgroup mg, manipulationgroup2 mg2, manipulationgroup3 mg3 
					where 
						m.manipulationgroupid = mg.id
						and m.manipulationgroupid2 = mg2.id
						and m.manipulationgroupid3 = mg3.id
						and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                  		<NewButton>
                  		<ButtonName>Продать товар спец-ту</ButtonName>
                  		<ButtonIcon>16products.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>ADD_MATERIAL_SALE_DOCTOR</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="6"><ColumnName>{4}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="7"><ColumnName>{6}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="8"><ColumnName>{7}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Продажа товара специалисту">
                		<GeneratedDataControls>
	               			<GeneratedDataControl ID="Товар" ControlType="Grid">
	                    			<DataSource>
						SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
						FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
						where mv.id = m.materialvendorid
						    and mg.id = m.materialgroupid
						    and mb.id = m.materialbrandid
						    and m.isactive = 1
						</DataSource>
                	      			<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
                      				<NullString>0</NullString>
						<DependentFields>
							<DependentField>
					                        <FieldId>Цена</FieldId>
                	            				<SQL>select doctorprice from material where id = {{Товар}}</SQL>
                        	  			</DependentField>
							<DependentField>
					                        <FieldId>Сумма</FieldId>
                	            				<SQL>select summa from get_materialsaledoctor_summa ({{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Цена}})</SQL>
                        	  			</DependentField>
						</DependentFields>
						<ColumnsMeta>
							<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
							<Column Id="ARTICLE"><Name>Артикул</Name></Column>
							<Column Id="NAME"><Name>Товар</Name></Column>
							<Column Id="NAME1"><Name>Производитель</Name></Column>
							<Column Id="NAME2"><Name>Группа товаров</Name></Column>
							<Column Id="NAME3"><Name>Марка</Name></Column>
							<Column Id="PRICE"><Name>Стоимость</Name></Column>
						</ColumnsMeta>
                    			</GeneratedDataControl>
                  			<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM STORE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
	                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
        	              			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                	      			<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
	               				<SqlAddition>{0}</SqlAddition>
						<DependentFields>
							<DependentField>
					                        <FieldId>Сумма</FieldId>
                	            				<SQL>select summa from get_materialsaledoctor_summa ({{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Цена}})</SQL>
                        	  			</DependentField>
						</DependentFields>
        	            		</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Кол-во" ControlType="Number">
						<DependentFields>
							<DependentField>
					                        <FieldId>Сумма</FieldId>
                	            				<SQL>select summa from get_materialsaledoctor_summa ({{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Цена}})</SQL>
                        	  			</DependentField>
						</DependentFields>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Цена" ControlType="Number">
						<DependentFields>
							<DependentField>
					                        <FieldId>Сумма</FieldId>
                	            				<SQL>select summa from get_materialsaledoctor_summa ({{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Цена}})</SQL>
                        	  			</DependentField>
						</DependentFields>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Сумма" ControlType="Number">
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата продажи" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
		        	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16paygreen.png</ButtonIcon>
                         		<ButtonName>Выплатить деньги</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>ADD_SALARYPAYMENT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="2"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="1"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выплатить деньги">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Тип выплаты" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SALARYPAYMENTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
        	              			<GeneratedStaticControl ID="Дата" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Сумма" ControlType="Number" />
                        			<GeneratedStaticControl ID="Примечание" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Расходный кассовый ордер</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>BUH_RKO_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Расходный кассовый ордер">
                        		<GeneratedStaticControls>
        	              			<GeneratedStaticControl ID="Дата" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Статья" ControlType="String" />
                        			<GeneratedStaticControl ID="Сумма" ControlType="Number" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-1 -Plugins\GenWordDoc\rko.xml -0 -0</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
		            	</LaunchBaseProcedure>
                             	</NewButton>
   			</NewButtons>
		</Item>

		<Item Caption="График работы (почасовой)" Icon="16worktime.png"> 
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, STARTDATE, DOCTORNAME, POSITIONNAME, D01, D02, D03, D04, D05, D06, D07, D08,
			 D09, D10, D11, D12, D13, D14, D15, D16, D17, D18, D19, D20, D21, D22, D23, D24, D25,
			 D26, D27, D28, D29, D30, D31
			 from report_dict_timetable ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Месяц" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MONTHS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	</ParamForm>
		      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="STARTDATE"><Name>STARTDATE</Name><Visible>false</Visible></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
                		<Column Id="D01"><Name>01</Name></Column>
                		<Column Id="D02"><Name>02</Name></Column>
                		<Column Id="D03"><Name>03</Name></Column>
                		<Column Id="D04"><Name>04</Name></Column>
                		<Column Id="D05"><Name>05</Name></Column>
                		<Column Id="D06"><Name>06</Name></Column>
                		<Column Id="D07"><Name>07</Name></Column>
                		<Column Id="D08"><Name>08</Name></Column>
                		<Column Id="D09"><Name>09</Name></Column>
                		<Column Id="D10"><Name>10</Name></Column>
                		<Column Id="D11"><Name>11</Name></Column>
                		<Column Id="D12"><Name>12</Name></Column>
                		<Column Id="D13"><Name>13</Name></Column>
                		<Column Id="D14"><Name>14</Name></Column>
                		<Column Id="D15"><Name>15</Name></Column>
                		<Column Id="D16"><Name>16</Name></Column>
                		<Column Id="D17"><Name>17</Name></Column>
                		<Column Id="D18"><Name>18</Name></Column>
                		<Column Id="D19"><Name>19</Name></Column>
                		<Column Id="D20"><Name>20</Name></Column>
                		<Column Id="D21"><Name>21</Name></Column>
                		<Column Id="D22"><Name>22</Name></Column>
                		<Column Id="D23"><Name>23</Name></Column>
                		<Column Id="D24"><Name>24</Name></Column>
                		<Column Id="D25"><Name>25</Name></Column>
                		<Column Id="D26"><Name>26</Name></Column>
                		<Column Id="D27"><Name>27</Name></Column>
                		<Column Id="D28"><Name>28</Name></Column>
                		<Column Id="D29"><Name>29</Name></Column>
                		<Column Id="D30"><Name>30</Name></Column>
                		<Column Id="D31"><Name>31</Name></Column>
       			</ColumnsMeta>
   			<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16worktime.png</ButtonIcon>
                         		<ButtonName>Редактировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>TIME_TABLE_EDIT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>STARTDATE</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Редактирование">
                			<GeneratedDataControls>
                  				<GeneratedDataControl ID="Статус" ControlType="LookUpEdit">
                    					<DataSource>SELECT ID, NAME FROM TIMETABLESTATUS order by id</DataSource>
							<DataColumn>ID</DataColumn>
							<DisplayColumn>NAME</DisplayColumn>
							<SqlAddition>{0}</SqlAddition>
						</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Число месяца" ControlType="Number" />
	                      			<GeneratedStaticControl ID="Неполный день" ControlType="Checkbox" />
	                      			<GeneratedStaticControl ID="С (часов)" ControlType="Number" />
	                      			<GeneratedStaticControl ID="По (часов)" ControlType="Number" />
	                      			<GeneratedStaticControl ID="Специалист" ControlType="String">
							<SQLReplacement>select shortfio as "VALUE" from doctor where id = {[ID]}</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
   			</NewButtons>
		</Item> 


		<Item Caption="График работы (по дням)" Icon="16workdays.png"> 
			<DataSourceType>SchedulerWorkTimeEditor</DataSourceType> 
			<TabOpen> 
				<PanName>Работа предприятия</PanName> 
				<ItemName>Расписание</ItemName> 
			</TabOpen> 	
		</Item> 

		<Item Caption="Услуги" Icon="16uslugi.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MANIPULATION</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
              	  	<NewButtons>
                		<NewButton>
                  			<ButtonName>Стоимость</ButtonName>
					<ToolTip>Быстрое изменение стоимости услуги</ToolTip> 
                  			<ButtonIcon>16paygreen.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_MANIPULATION_PRICE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Изменение стоимости услуги">
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Стоимость" ControlType="Number" />
                        		</GeneratedStaticControls>

                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
                  			<ButtonName>Прайс-лист</ButtonName>
					<ToolTip>Прайс-лист</ToolTip> 
                  			<ButtonIcon>16log.png</ButtonIcon>
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\price.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
                		</NewButton>
              			<NewButton>
	       				<ButtonIcon></ButtonIcon>
                         		<ButtonName>!!!</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>FIX_MANIPULATION_REMOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="На кого переписываем">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Услуга" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATION</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<DependentFields>
							<DependentField>
					                        <FieldId>Информация</FieldId>
                	            				<SQL>select COMMENT from GET_MANIPULATION_INFO ({{Услуга}})</SQL>
                        	  			</DependentField>
						</DependentFields>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Информация" ControlType="String" />
                        		</GeneratedStaticControls>

                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
                  	<NewButton>
                  		<ButtonName>Присвоить штрихкод</ButtonName>
                  		<ButtonIcon>check24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>GET_NEW_SCANCODE_MANIP</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-3 -{0}</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Печать этикеток</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-2 -{0}</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                		<NewButton>
                  			<ButtonName>Процент спец-ту по группе услуг</ButtonName>
					<ToolTip>Быстрое изменение процента специалисту по категории и группе услуг</ToolTip> 
                  			<ButtonIcon>16salary.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_MANIPULATION_PERCENT</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Группа услуг">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Категория" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DOCTORLEVEL</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Процент" ControlType="Number" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
                  			<ButtonName>Процент спец-ту по группе услуг 2</ButtonName>
					<ToolTip>Быстрое изменение процента специалисту по категории и группе услуг 2</ToolTip> 
                  			<ButtonIcon>16salary.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_MANIPULATION_PERCENT_2</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Группа услуг 2">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Категория" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DOCTORLEVEL</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Группа услуг 2" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP2</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Процент" ControlType="Number" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
                  			<ButtonName>Процент спец-ту по группе услуг 3</ButtonName>
					<ToolTip>Быстрое изменение процента специалисту по категории и группе услуг 3</ToolTip> 
                  			<ButtonIcon>16salary.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_MANIPULATION_PERCENT_3</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Группа услуг 3">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Категория" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DOCTORLEVEL</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Группа услуг 3" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP3</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Процент" ControlType="Number" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
              	  	</NewButtons>
		</Item>

		<Item Caption="Группы услуг" Icon="16servicegroup.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MANIPULATIONGROUP</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		</Item>

		<Item Caption="Дисконтные карты" Icon="16cards.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CARDTYPE</DataSource>
		</Item>

		<Item Caption="Накопительная система" Icon="16cardbonus.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CARDACCUMULATION</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		</Item>

		<Item Caption="Акции" Icon="16action.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>ACTIONS</DataSource>
		</Item>

		<Item Caption="Разовые акции" Icon="16action.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DICTDISCOUNT</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		</Item>

		<Item Caption="Оборудование" Icon="128equipment.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>EQUIPMENT</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		</Item>

		<Item Caption="Кабинеты" Icon="16cabinet.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CABINET</DataSource>
		</Item>

		<Item Caption="Курсы услуг" Icon="128document.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DICTCOURSE</DataSource>
		</Item>

		<Item Caption="Прогрессивная зарплата" Icon="16salary.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DICTSALARYPROGRESS</DataSource>
		</Item>


		<Item Caption="Настройки" Icon="16options.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>OPTIONS</DataSource>
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
              	  <NewButtons>
                	<NewButton>
                  		<ButtonName>Создать резервную копию</ButtonName>
				<ToolTip>Создать резервную копию базы данных</ToolTip> 
                  		<ButtonIcon>16options.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>archive\createarchive.bat</ProgAddress>
                    				<ProgParam>{0}</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
              	  </NewButtons>
		</Item>

		<Item Caption="Пользователи" Icon="16specs.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>EMPLOYEE</DataSource>
                  		<ShowExcelButton>true</ShowExcelButton>
		</Item>

	  </Items>
	</Pane>

	<Pane Caption="Блок руководителя" Type="Tree">
	  <Items>


	<Item Caption="Отчет - выручка предприятия" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE1, PARAMVALUE2, PARAMVALUE3 
			from REPORT_COMPANY ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>PARAMNAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="PARAMNAME"><Name>Название</Name></Column>
                		<Column Id="PARAMVALUE1"><Name>Нал</Name></Column>
                		<Column Id="PARAMVALUE2"><Name>Безнал</Name></Column>
                		<Column Id="PARAMVALUE3"><Name>Всего</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>PARAMNAME</Field></Colorizer>
		</Colorizers>
	</Item>




	<Item Caption="Наличная касса" Icon="16reportkassa.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE1, PARAMVALUE2, PARAMVALUE3, PARAMVALUE4 
			from REPORT_DAILY_CASSA ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>PARAMNAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="PARAMNAME"><Name>Название</Name></Column>
                		<Column Id="PARAMVALUE1"><Name>Наличные</Name></Column>
                		<Column Id="PARAMVALUE2"><Name>Безналичные</Name></Column>
                		<Column Id="PARAMVALUE3"><Name>С депозита</Name></Column>
                		<Column Id="PARAMVALUE4"><Name>Всего</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>PARAMNAME</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Отчет по услугам" Icon="16uslugi.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, CARDNUMBER, CLIENTNAME, NAME, DEPARTMENT, GROUP2, GROUP3,
		MANIPULATIONGROUP, MANIPULATIONNAME, AMOUNT, 
		PRICE, DICTPAYED, PAYMENTDEPOSIT, PAYMENTNALBEZNAL, PAYMENTTYPE, 
		MATERIALSUMMA, ISWHITE, PAYMENTNAL, PAYMENTBEZNAL, COMPANY  
		from REPORT_DAILY_MANIPULATION ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="MANIPULATIONGROUP"><Name>Группа услуг</Name></Column>
                		<Column Id="MANIPULATIONADD"><Name>Доп. услуга</Name></Column>
                		<Column Id="PRICE"><Name>Сумма к оплате</Name></Column>
                		<Column Id="MATERIALSUMMA"><Name>Себестоимость материалов</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="DICTPAYED"><Name>Статус оплаты</Name></Column>
                		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
                		<Column Id="GROUP2"><Name>Группа 2</Name></Column>
                		<Column Id="GROUP3"><Name>Группа 3</Name></Column>
                		<Column Id="DEPARTMENT"><Name>подразделение</Name></Column>
                		<Column Id="ISWHITE"><Name>Пок. в отчетах?</Name></Column>
                		<Column Id="CHECKNUMBER"><Name>Номер чека</Name></Column>
                		<Column Id="PAYMENTDEPOSIT"><Name>Оплата с депозита</Name></Column>
                		<Column Id="PAYMENTNALBEZNAL"><Name>Оплата нал/безнал</Name></Column>
                		<Column Id="PAYMENTNAL"><Name>Оплата нал</Name></Column>
                		<Column Id="PAYMENTBEZNAL"><Name>Оплата безнал</Name></Column>
                		<Column Id="COMPANY"><Name>Организация</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>APPOINTMENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Отчет по продажам" Icon="16products.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENTNAME, CARDNUMBER, MATERIALNAME, 
			MATERIALGROUP, AMOUNT, PRICE, SUMMA, SALARY, ISWHITE, SUMMA0, PAYMENTTYPE, COMPANY
		from REPORT_DAILY_MATERIAL_SALE2 ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="PRICE"><Name>Цена</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="SUMMA0"><Name>Себестоимость</Name></Column>
                		<Column Id="SALARY"><Name>Зарплата</Name></Column>
                		<Column Id="ISWHITE"><Name>Пок. в отчетах?</Name></Column>
                		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
                		<Column Id="COMPANY"><Name>Организация</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>MATERIALSALE</Table>
	</EditorOpen>
	</Item>


	<Item Caption="По подразделениям" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select DEPARTMENTNAME, MANIPULATIONAMOUNT, MANIPULATIONSUMMA, SALEAMOUNT, SALESUMMA, 
			COURSEAMOUNT, COURSESUMMA, TOTALSUMMA, COMPANY from REPORT_DEPARTMENT ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
              		<Column Id="DEPARTMENTNAME"><Name>Подразделение</Name></Column>
              		<Column Id="MANIPULATIONAMOUNT"><Name>Кол-во посещений</Name></Column>
              		<Column Id="MANIPULATIONSUMMA"><Name>Сумма к оплате за услуги</Name></Column>
              		<Column Id="SALEAMOUNT"><Name>Кол-во продаж (единиц)</Name></Column>
              		<Column Id="SALESUMMA"><Name>Сумма к оплате за продажи</Name></Column>
              		<Column Id="COURSEAMOUNT"><Name>Кол-во продаж курсов услуг</Name></Column>
              		<Column Id="COURSESUMMA"><Name>Сумма к оплате за курсы услуг</Name></Column>
              		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
                	<Column Id="COMPANY"><Name>Организация</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="По группам услуг" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, MANIPULATIONGROUP, SUMMA from REPORT_MANIPULATION_GROUP ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
              		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
              		<Column Id="MANIPULATIONGROUP"><Name>Группа услуг</Name></Column>
              		<Column Id="SUMMA"><Name>Сумма к оплате</Name></Column>
       	</ColumnsMeta>
	</Item>

	<Item Caption="Рейтинг услуг" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select MANIPULATIONGROUP, GROUP2, GROUP3, NAME, MANIPULATIONCOUNT, 
		MANIPULATIONSUMMA, MATERIALSUMMA, DOCTORINCOME, DELTAPERMANIPULATION, DELTA, units 
		from report_manipulation ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="MANIPULATIONGROUP"><Name>Группа услуг</Name></Column>
                		<Column Id="NAME"><Name>Услуга</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во услуг</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма</Name></Column>
                		<Column Id="MATERIALSUMMA"><Name>Себестоимость материалов</Name></Column>
                		<Column Id="DOCTORINCOME"><Name>З.п. специалистам</Name></Column>
                		<Column Id="DELTAPERMANIPULATION"><Name>Ср. дельта с 1 услуги</Name></Column>
                		<Column Id="DELTA"><Name>Общая дельта</Name></Column>
                		<Column Id="GROUP2"><Name>Группа 2</Name></Column>
                		<Column Id="GROUP3"><Name>Группа 3</Name></Column>
                		<Column Id="DEPARTMENT"><Name>подразделение</Name></Column>
                		<Column Id="UNITS"><Name>Кол-во единиц</Name></Column>
       	</ColumnsMeta>
	</Item>

	<Item Caption="Рейтинг товаров" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select MATERIALGROUP, NAME, MATERIALCOUNT, SUMMA, SUMMAPRICE0, DOCTORINCOME,
			DELTAPERMATERIAL, DELTA, VENDOR, BRAND, ORIGINALSUMMA, UNRECEIVEDPROFIT
			from REPORT_MATERIAL_RATING ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
                		<Column Id="NAME"><Name>Товар</Name></Column>
                		<Column Id="MATERIALCOUNT"><Name>Кол-во единиц</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="SUMMAPRICE0"><Name>Себестоимость</Name></Column>
                		<Column Id="DOCTORINCOME"><Name>З.п. специалистам</Name></Column>
                		<Column Id="DELTAPERMATERIAL"><Name>Дельта с 1 единицы</Name></Column>
                		<Column Id="VENDOR"><Name>Производитель</Name></Column>
                		<Column Id="BRAND"><Name>Бренд</Name></Column>
                		<Column Id="DELTA"><Name>Общая дельта</Name></Column>
                		<Column Id="ORIGINALSUMMA"><Name>Сумма без скидок</Name></Column>
                		<Column Id="UNRECEIVEDPROFIT"><Name>Недополученная прибыль</Name></Column>
       	</ColumnsMeta>
	</Item>

	<Item Caption="Услуги по специалистам" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select name, SALARYTYPENAME, MANIPULATIONNAME, MANIPULATIONCOUNT, PRICE, 
			MANIPULATIONSUMMA, MANIPULATIONPAYMENT, PERCENT, DOCTORINCOME 
			from report_doctor_manipulation ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="SALARYTYPENAME"><Name>Тип</Name></Column>
                		<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во услуг</Name></Column>
                		<Column Id="PRICE"><Name>Цена</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма к оплате</Name></Column>
                		<Column Id="MANIPULATIONPAYMENT"><Name>Оплаты</Name></Column>
                		<Column Id="PERCENT"><Name>Процент</Name></Column>
                		<Column Id="DOCTORINCOME"><Name>Зарплата</Name></Column>
       	</ColumnsMeta>
	</Item>

	<Item Caption="Рейтинг специалистов" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, name, DEPARTMENT, CLIENTCOUNT, MANIPULATIONSUMMA, SALESUMMA,
			TOTALHOURS, BUSYHOURS, BUSYPERCENT from report_doctor_rating ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="DEPARTMENT"><Name>Подразделение</Name></Column>
                		<Column Id="CLIENTCOUNT"><Name>Кол-во посещений</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="SALESUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="TOTALHOURS"><Name>Всего часов</Name></Column>
                		<Column Id="BUSYHOURS"><Name>Длительность услуг</Name></Column>
                		<Column Id="BUSYPERCENT"><Name>% загрузки</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Зарплата специалистов" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select id, name, fixsalary, rentsumma, manipulationsumma, incomemanip, salesumma, incomesale, 
			incometotal, incomepayment, saledoctorsumma, tobepayed, materialprice0, paymentrest, 
			outdatefrom, outdateto 
			from report_doctor_income ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Специалист</Name></Column>
                		<Column Id="FIXSALARY"><Name>Оклад</Name></Column>
                		<Column Id="RENTSUMMA"><Name>Стоимость аренды</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="INCOMEMANIP"><Name>Зарплата с услуг</Name></Column>
                		<Column Id="SALESUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="INCOMESALE"><Name>Зарплата с продаж</Name></Column>
                		<Column Id="INCOMETOTAL"><Name>Зарплата всего</Name></Column>
                		<Column Id="INCOMEPAYMENT"><Name>Выдано</Name></Column>
                		<Column Id="SALEDOCTORSUMMA"><Name>Сумма покупок</Name></Column>
                		<Column Id="TOBEPAYED"><Name>Итого к выплате</Name></Column>
	                	<Column Id="MATERIALPRICE0"><Name>Себестоимость материалов</Name></Column>
	                	<Column Id="PAYMENTREST"><Name>Долг по выплатам (с предыдущего периода)</Name></Column>
	                	<Column Id="OUTDATEFROM"><Name>Дата с</Name></Column>
	                	<Column Id="OUTDATETO"><Name>Дата по</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DOCTOR</Table>
	</EditorOpen>
        	<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16paygreen.png</ButtonIcon>
                         		<ButtonName>Выплатить деньги</ButtonName>
					<ToolTip>Выберите специалиста и укажите сумму к выплате</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>ADD_SALARYPAYMENT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="2"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="1"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выплатить деньги">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Тип выплаты" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SALARYPAYMENTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
        	              			<GeneratedStaticControl ID="Дата" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Сумма" ControlType="Number" />
                        			<GeneratedStaticControl ID="Примечание" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16payred.png</ButtonIcon>
                         		<ButtonName>Перенести остатки выплат на следующий период</ButtonName>
					<ToolTip>Все остатки по выплате (из колонки 'Итого к выплате') будут перенесены на указанную дату в качестве долга</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SALARY_MOVE_TOBEPAYED</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>OUTDATEFROM</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>OUTDATETO</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести выплаты на следующую дату">
                        		<GeneratedStaticControls>
        	              			<GeneratedStaticControl ID="Дата" ControlType="DateTime" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
        	</NewButtons>
	</Item>

	<Item Caption="Зарплата специалистов (подробный)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select name, operationdate, salarytypename, manipulationname, clientname, amount, price, tobepayed, income, materialprice0, manipulationprice0 
			from report_doctor_income_detail ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="NAME"><Name>Специалист</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="SALARYTYPENAME"><Name>Тип</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="PRICE"><Name>Стоимость</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
                	<Column Id="MATERIALPRICE0"><Name>Себестоимость материалов</Name></Column>
                	<Column Id="MANIPULATIONPRICE0"><Name>Себестоимость услуги</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Выплаты специалистам (подробный)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select name, operationdate, salarytypename, summa, comment 
			from report_doctor_income_payment ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="NAME"><Name>Специалист</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="SALARYTYPENAME"><Name>Тип</Name></Column>
                	<Column Id="SUMMA"><Name>Сумма</Name></Column>
                	<Column Id="COMMENT"><Name>Комментарий</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="Отчет по администраторам" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select NAME, VISITCOUNT, OKLAD, MANIPULATIONSUMMA, SALARY 
			from REPORT_RECEPTION ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="NAME"><Name>Администратор</Name></Column>
                		<Column Id="VISITCOUNT"><Name>Кол-во клиентов</Name></Column>
                		<Column Id="OKLAD"><Name>Оклад</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="SALARY"><Name>Зарплата</Name></Column>
      	</ColumnsMeta>
	</Item>




	<Item Caption="Рейтинг клиентов" Icon="green1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select id, surname, name, secondname, cellphone, segmentname, cardtype, cardnumber, SEX, 
			MANIPULATIONCOUNT, MANIPULATIONSUMMA, SALESUMMA, TOTALSUMMA, 
			AVERAGESUMMA, AVERAGESALESUMMA, AVERAGECHECK,
			LASTVISITDATE, LASTVISITDAYCOUNT 
			from report_client ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во посещений</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="AVERAGESUMMA"><Name>Средний чек на услуги</Name></Column>
                		<Column Id="SALESUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="AVERAGESALESUMMA"><Name>Средний чек на продажи</Name></Column>
                		<Column Id="AVERAGECHECK"><Name>Средний чек посещения</Name></Column>
                		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
                		<Column Id="SEX"><Name>Пол</Name></Column>
                		<Column Id="LASTVISITDATE"><Name>Дата последнего посещения</Name></Column>
                		<Column Id="LASTVISITDAYCOUNT"><Name>Кол-во дней с последнего посещения</Name></Column>
                		<Column Id="SURNAME"><Name>Фамилия</Name></Column>
                		<Column Id="NAME"><Name>Имя</Name></Column>
                		<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
                		<Column Id="CELLPHONE"><Name>Моб. телефон</Name></Column>
                		<Column Id="CARDTYPE"><Name>Тип карты</Name></Column>
                		<Column Id="SEGMENTNAME"><Name>Сегмент</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Первичные клиенты" Icon="green1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select NEWAMOUNT, ACQUIREDAMOUNT, LOSTAMOUNT from report_new_clients ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
	<ColumnsMeta>
                		<Column Id="NEWAMOUNT"><Name>Новых клиентов</Name></Column>
	                	<Column Id="ACQUIREDAMOUNT"><Name>Приходили еще</Name></Column>
	                	<Column Id="LOSTAMOUNT"><Name>Не приходили</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Первичные клиенты (подробный)" Icon="green1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, NAME, STATUS, TOTALVISITS, FIRSTDATE, MANIPULATION, DOCTOR, REKLAMA 
			from report_new_clients_detail ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Новый клиент</Name></Column>
                		<Column Id="STATUS"><Name>Статус</Name></Column>
                		<Column Id="TOTALVISITS"><Name>Всего визитов</Name></Column>
                		<Column Id="FIRSTDATE"><Name>Дата первого посещения</Name></Column>
                		<Column Id="MANIPULATION"><Name>Первая услуга</Name></Column>
                		<Column Id="DOCTOR"><Name>Первый специалист</Name></Column>
                		<Column Id="REKLAMA"><Name>Источник рекламы</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Оплаты за услуги" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, PAYMENTDATE, CLIENTNAME, CARDNUMBER, PAYMENTSUMMA, PAYMENTTYPE,
		    APPOINTMENTDATE, DOCTORNAME, MANIPULATIONLIST, TOBEPAYED, ISTHESAMEDAY, ISTHESAMEDAYSTR,
			ISTHESAMESUMMA, ISTHESAMESUMMASTR
			from REPORT_MANIPULATION_PAYMENT ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
	      	<ColumnsMeta>
              		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
              		<Column Id="PAYMENTDATE"><Name>Дата оплаты</Name></Column>
              		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
               		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
              		<Column Id="PAYMENTSUMMA"><Name>Сумма оплаты</Name></Column>
              		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
              		<Column Id="APPOINTMENTDATE"><Name>Дата оказания услуг</Name></Column>
                	<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                	<Column Id="MANIPULATIONLIST"><Name>Список услуг</Name></Column>
                	<Column Id="TOBEPAYED"><Name>Сумма услуг</Name></Column>
                	<Column Id="ISTHESAMEDAY"><Name>Оплачено в тот же день?</Name><Visible>false</Visible></Column>
                	<Column Id="ISTHESAMEDAYSTR"><Name>Оплачено в тот же день?</Name></Column>
                	<Column Id="ISTHESAMESUMMA"><Name>Оплата = к оплате?</Name><Visible>false</Visible></Column>
                	<Column Id="ISTHESAMESUMMASTR"><Name>Оплата = к оплате?</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>ISTHESAMEDAY</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Tan</Color><Value1>0</Value1><Field>ISTHESAMESUMMA</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>0</Value1><Field>ISTHESAMEDAY</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="Отчет по депозитам" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select DEPOSITOPERATIONTYPE AS NAME, SUMMA from REPORT_DEPOSIT ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="NAME"><Name>Тип операции</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
      	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>NAME</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Отчет по депозитам (подробный)" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, CLIENT, DEPOSITOPERATIONTYPE, SUMMA, CERTIFICATENUMBER, COMMENT
		from REPORT_DEPOSIT_DETAILS ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="DEPOSITOPERATIONTYPE"><Name>Вид операции</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="CERTIFICATENUMBER"><Name>Номер сертификата</Name></Column>
                		<Column Id="COMMENT"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>DEPOSIT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Отчет по сертификатам" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, SALEDATE, CERTIFICATENUMBER, CLIENT, DOCTOR, SUMMA, PAYMENTTYPE, COMMENT,
			STRISACTIVATED, ACTIVATIONDATE, ACTIVATECLIENT 
			from REPORT_CERTIFICATE ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="SALEDATE"><Name>Дата продажи</Name></Column>
                		<Column Id="CERTIFICATENUMBER"><Name>Номер сертификата</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент (кто купил)</Name></Column>
                		<Column Id="DOCTOR"><Name>Специалист</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
                		<Column Id="COMMENT"><Name>Комментарий</Name></Column>
                		<Column Id="STRISACTIVATED"><Name>Активирован?</Name></Column>
                		<Column Id="ACTIVATIONDATE"><Name>Дата активации</Name></Column>
                		<Column Id="ACTIVATECLIENT"><Name>Клиент (кто активаровал)</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CERTIFICATESALE</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Отчет по курсам услуг - продажи" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, SALEDATE, COURSENUMBER, COURSENAME, CLIENT, DOCTOR, 
			SUMMA, PAYMENT, DOLG, FINISHDATE
			from REPORT_COURSE ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="SALEDATE"><Name>Дата продажи</Name></Column>
                		<Column Id="COURSENUMBER"><Name>Номер курса</Name></Column>
                		<Column Id="COURSENAME"><Name>Курс услуг</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="DOCTOR"><Name>Специалист (кто продал)</Name></Column>
                		<Column Id="SUMMA"><Name>Стоимость</Name></Column>
                		<Column Id="PAYMENT"><Name>Сумма оплат</Name></Column>
                		<Column Id="DOLG"><Name>Не оплачено</Name></Column>
                		<Column Id="FINISHDATE"><Name>Дата окончания</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>COURSE</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Отчет по курсам услуг - оплаты" Icon="16money.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, COURSENUMBER, COURSENAME, CLIENT, PAYMENTTYPE, SUMMA
			from REPORT_COURSE_PAYMENT ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата оплаты</Name></Column>
                		<Column Id="COURSENUMBER"><Name>Номер курса</Name></Column>
                		<Column Id="COURSENAME"><Name>Курс услуг</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>COURSEPAYMENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Отчет по источникам рекламы" Icon="16reklama.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select name, clientcount from report_reklama ('{0}', '{1}')</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                		<Column Id="NAME"><Name>источник рекламы</Name></Column>
                		<Column Id="CLIENTCOUNT"><Name>Кол-во клиентов</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="Отчет по акциям" Icon="16reklama.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ACTIONID, ACTIONNAME, STARTDATE, FINISHDATE, CLIENTCOUNT, MANIPULATIONSUMMA
			from REPORT_ACTION ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ACTIONID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="ACTIONNAME"><Name>Акция</Name></Column>
                		<Column Id="STARTDATE"><Name>Дата начала</Name></Column>
                		<Column Id="FINISHDATE"><Name>Дата окончания</Name></Column>
                		<Column Id="CLIENTCOUNT"><Name>Кол-во клиентов</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма всех услуг по акции</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ACTIONID</Column>
		<Table>ACTIONS</Table>
	</EditorOpen>
	</Item>

	<Item Caption="Динамика - Предприятие - Выручка по месяцам" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE FROM REPORT_DYN ('{0}', 'REPORT_DYN_SALON_SUMMA', 'TOTALSUMMA')</DataSource>
                <ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="PARAMNAME"><Name>Месяц</Name></Column>
                	<Column Id="PARAMVALUE"><Name>Значение</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Отчет - загрузка подразделения по дням" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select DAYNUMBER, CLIENTCOUNT, DURATION, DURATIONPERCENT
			from REPORT_WORKLOAD_DAYS ('{0}', '{1}', '{2}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Месяц" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MONTHS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Подразделение" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DEPARTMENT</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	</ParamForm>

		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="DAYNUMBER"><Name>Число</Name></Column>
                		<Column Id="CLIENTCOUNT"><Name>Кол-во клиентов</Name></Column>
                		<Column Id="DURATION"><Name>Длительность услуг, часов</Name></Column>
                		<Column Id="DURATIONPERCENT"><Name>Процент загрузки</Name></Column>
      	</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>0</DiagramType>
	                <NameColumn>DAYNUMBER</NameColumn>
        	        <HiddenColumns>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Загрузка оборудования" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, name, PRICE0, MANIPULATIONCOUNT, MANIPULATIONSUMMA, 
			TOTALHOURS, BUSYPERCENT from report_equipment ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>Оборудование</Name></Column>
                		<Column Id="PRICE0"><Name>Стоимость</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во услуг</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма</Name></Column>
                		<Column Id="TOTALHOURS"><Name>Всего часов</Name></Column>
                		<Column Id="BUSYPERCENT"><Name>% занятости</Name></Column>
       	</ColumnsMeta>
	</Item>

	<Item Caption="Аналитика деятельности предприятия" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE from report_analysis ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
	<ColumnsMeta>
                		<Column Id="PARAMNAME"><Name>Параметр</Name></Column>
	                	<Column Id="PARAMVALUE"><Name>Значение</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Бизнес прогноз (по М.Сергееву)" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, VREAL, V100, V90, V80, V70, V60, V50, V40, V30, V20, V10 from report_forecast2 ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
	<ColumnsMeta>
                		<Column Id="PARAMNAME"><Name>Параметр</Name></Column>
	                	<Column Id="VREAL"><Name>По факту</Name></Column>
	                	<Column Id="V100"><Name>100% загрузка</Name></Column>
	                	<Column Id="V90"><Name>90% загрузка</Name></Column>
	                	<Column Id="V80"><Name>80% загрузка</Name></Column>
	                	<Column Id="V70"><Name>70% загрузка</Name></Column>
	                	<Column Id="V60"><Name>60% загрузка</Name></Column>
	                	<Column Id="V50"><Name>50% загрузка</Name></Column>
	                	<Column Id="V40"><Name>40% загрузка</Name></Column>
	                	<Column Id="V30"><Name>30% загрузка</Name></Column>
	                	<Column Id="V20"><Name>20% загрузка</Name></Column>
	                	<Column Id="V10"><Name>10% загрузка</Name></Column>
       	</ColumnsMeta>
	</Item>





	<Item Caption="Отчет - План посещений" Icon="16worktime.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select MANIPULATIONGROUP, NAME, MANIPULATIONCOUNT, MANIPULATIONSUMMA, tobepayedsumma,
			MATERIALSUMMA, DOCTORINCOME, DELTAPERMANIPULATION, DELTA 			
		from report_manipulation_plan ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="MANIPULATIONGROUP"><Name>Группа услуг</Name></Column>
                		<Column Id="NAME"><Name>Услуга</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во услуг</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Стоимость услуг</Name></Column>
                		<Column Id="TOBEPAYEDSUMMA"><Name>Сумма к оплате</Name></Column>
                		<Column Id="MATERIALSUMMA"><Name>Себестоимость материалов</Name></Column>
                		<Column Id="DOCTORINCOME"><Name>З.п. специалистам</Name></Column>
                		<Column Id="DELTAPERMANIPULATION"><Name>Ср. дельта с 1 услуги</Name></Column>
                		<Column Id="DELTA"><Name>Общая дельта</Name></Column>
       	</ColumnsMeta>
	</Item>

	<Item Caption="Отчет - План посещений (подробный)" Icon="16worktime.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select OPERATIONDATE, CARDNUMBER, CLIENTNAME, DOCTORNAME, DEPARTMENT, GROUP2, GROUP3,
			MANIPULATIONGROUP, MANIPULATIONNAME, PRICE, TOBEPAYED
		from REPORT_MANIPULATION_PLAN_DETAIL ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                		<Column Id="MANIPULATIONGROUP"><Name>Группа услуг</Name></Column>
                		<Column Id="PRICE"><Name>Стоимость услуги</Name></Column>
                		<Column Id="TOBEPAYED"><Name>Сумма к оплате</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="GROUP2"><Name>Группа 2</Name></Column>
                		<Column Id="GROUP3"><Name>Группа 3</Name></Column>
                		<Column Id="DEPARTMENT"><Name>подразделение</Name></Column>
      	</ColumnsMeta>
	</Item>



		<Item Caption="Удаленные записи" Icon="48control.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DELETEDAPPOINTMENT</DataSource>
                <ShowExcelButton>true</ShowExcelButton>
		</Item>



		<Item Caption="Лента событий" Icon="48control.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>LOG</DataSource>
		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>Выполненная услуга</Value1><Field>DETAILS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGray</Color><Value1>Отмененная услуга</Value1><Field>DETAILS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Tan</Color><Value1>2</Value1><Field>LOGACTIONID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSalmon</Color><Value1>4</Value1><Field>LOGACTIONTYPEID</Field></Colorizer>
		</Colorizers>
		</Item>


		<Item Caption="Контроль закрытия смен" Icon="48control.png">
        		<DataSourceType>QueryReport</DataSourceType>
        		<DataSource>select OPERATIONDATE, EMPLOYEE, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
				from REPORT_CONTROL_DAYCLOSE ('{0}', '{1}')</DataSource>
	                	<ParamForm ID="Период">
        	        		<ParentType>DateChoose</ParentType>
                		</ParamForm>
			<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="EMPLOYEE"><Name>Сотрудник</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок программы</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Действие</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
	       	</ColumnsMeta>
		</Item>






	  </Items>
	</Pane>

        <Pane Caption="Складской учет" Type="List">
	  <Items>
	<Item Caption="Товары" Icon="16products.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIAL</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
                  	<NewButtons>
                		<NewButton>
                  			<ButtonName>Стоимость</ButtonName>
					<ToolTip>Быстрое изменение стоимости товара</ToolTip> 
                  			<ButtonIcon>16paygreen.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>UPDATE_MATERIAL_PRICE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Изменение стоимости товара">
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Стоимость" ControlType="Number" />
                        		</GeneratedStaticControls>

                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                  	<NewButton>
                  		<ButtonName>Присвоить штрихкод</ButtonName>
                  		<ButtonIcon>check24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>GET_NEW_SCANCODE</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
	            	</LaunchBaseProcedure>
	        </NewButton>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки (без даты прихода)</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-4 -{0}</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>

                		<NewButton>
                  			<ButtonName>Печать ценника</ButtonName>
					<ToolTip>Печать ценника</ToolTip> 
                  			<ButtonIcon>16checkgreen.png</ButtonIcon>
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\label.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
	               		</NewButton>


	        </NewButtons>
	</Item>

	<Item Caption="Нормы расхода материалов" Icon="good.ico">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALOUTLAYSTANDARD</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	</Item>

	<Item Caption="Технологические карты услуг" Icon="good.ico">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MANIPULATIONMATERIAL</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	</Item>

	<Item Caption="Группы товаров" Icon="good.ico">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALGROUP</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	</Item>

	<Item Caption="Торговые марки" Icon="good.ico">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALBRAND</DataSource>
                  		<ShowExcelButton>true</ShowExcelButton>
	</Item>

	<Item Caption="Поставщики" Icon="good.ico">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALPROVIDER</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	</Item>

	<Item Caption="Склады" Icon="16store.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>STORE</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	</Item>


		<Item Caption="Приход товаров" Icon="16storeincome.png">
		  <DataSourceType>Table</DataSourceType>
		  <DataSource>STOREINCOME</DataSource>
                  <ShowExcelButton>true</ShowExcelButton>
              	  <NewButtons>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeincome.xml -0 -0</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
              	  </NewButtons>
		</Item>

		<Item Caption="Перемещение товаров" Icon="16storemovement.png">
		  <DataSourceType>Table</DataSourceType>
		  <DataSource>STOREMOVEMENT</DataSource>
                  <ShowExcelButton>true</ShowExcelButton>
              	  <NewButtons>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storemovement.xml -0 -0</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
              	  </NewButtons>
		</Item>

		<Item Caption="Списание товаров" Icon="16storeoutcome.png">
		  <DataSourceType>Table</DataSourceType>
		  <DataSource>STOREOUTCOME</DataSource>
                  <ShowExcelButton>true</ShowExcelButton>
              	  <NewButtons>
                	<NewButton>
                  		<ButtonName>Накладная списания</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeoutcome.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
              	  </NewButtons>
		</Item>


		<Item Caption="Инвентаризация" Icon="16inventory.png">
			<DataSourceType>Table</DataSourceType>
			<DataSource>INVENTORY</DataSource>
			<LoadEditorOnCreate>false</LoadEditorOnCreate>
			<DefaultButtons>
	        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                  	<NewButtons>
        	          	<NewButton>
	                  		<ButtonName>Добавить</ButtonName>
       					<ButtonIcon>add24.png</ButtonIcon>
					<ToolTip>Инвентаризация по всем товарам</ToolTip> 
	        		        <LaunchBaseProcedure>
	        		        <ProcedureName>INVENTORY_ADD</ProcedureName>
        		            	<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
			                <ParamForm ID="Инвентаризация">
	                  		<GeneratedDataControls>
        	          		<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                	    			<DataSource>SELECT ID, NAME FROM STORE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
        	              			<GeneratedStaticControl ID="Дата" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
			                       	<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                        	</GeneratedStaticControls>
			                </ParamForm>
	            			</LaunchBaseProcedure>
		        	</NewButton>
                	  	<NewButton>
                  			<ButtonName>Удалить</ButtonName>
                  			<ButtonIcon>delete.png</ButtonIcon>
		        	        <LaunchBaseProcedure>
		        	            	<ProcedureName>INVENTORY_DELETE</ProcedureName>
        		            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
	        	    	</LaunchBaseProcedure>
			        </NewButton>
        	          	<NewButton>
	                  		<ButtonName>Добавить по группе товаров</ButtonName>
       					<ButtonIcon>addblue24.png</ButtonIcon>
					<ToolTip>Инвентаризация по выбранной группе товаров</ToolTip> 
	        		        <LaunchBaseProcedure>
	        		        <ProcedureName>INVENTORY_ADD_MATERIALGROUP</ProcedureName>
        		            	<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
			                <ParamForm ID="Инвентаризация">
	                  		<GeneratedDataControls>
        	          		<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                	    			<DataSource>SELECT ID, NAME FROM STORE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
        	          		<GeneratedDataControl ID="Группа товаров" ControlType="LookUpEdit">
                	    			<DataSource>SELECT ID, NAME FROM MATERIALGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
        	              			<GeneratedStaticControl ID="Дата" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
			                       	<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                        	</GeneratedStaticControls>
			                </ParamForm>
	            			</LaunchBaseProcedure>
		        	</NewButton>
	        	</NewButtons>
		</Item>


		<Item Caption="Продажа товаров" Icon="16materialsale.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALSALE</DataSource>
                <ShowExcelButton>true</ShowExcelButton>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		</Item>



		<Item Caption="Продажа товаров специалистам" Icon="16specs.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALSALEDOCTOR</DataSource>
                <ShowExcelButton>true</ShowExcelButton>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
              	<NewButtons>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\saledoctor.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
              	</NewButtons>
		</Item>



	<Item Caption="Отчет - Состояние складов на дату" Icon="blue1graph128.png">
       		<DataSourceType>QueryReport</DataSourceType>
		<DataSource>select STORENAME, ARTICLE, MATERIALNAME, VOLUME, AMOUNT, AMOUNTML, PRICE0, SUMMA,
		 MATERIALGROUP, MATERIALBRAND, MATERIALVENDOR, MINAMOUNT, UPGRADEAMOUNT 
		from get_store_material_by_Date ('{0}')</DataSource>
                	<ParamForm ID="Дата">
                		<ParentType>NewType</ParentType>
               			<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Дата" ControlType="DateTime" />
              			</GeneratedStaticControls>
                	</ParamForm>
              	<ColumnsMeta>
	                	<Column Id="STORENAME"><Name>Склад</Name></Column>
                		<Column Id="ARTICLE"><Name>Артикул</Name></Column>
	                	<Column Id="MATERIALVENDOR"><Name>Производитель</Name></Column>
	                	<Column Id="MATERIALBRAND"><Name>Марка (линия)</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
	                	<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во в шт.</Name></Column>
	                	<Column Id="VOLUME"><Name>Объем</Name></Column>
	                	<Column Id="BOXVOLUME"><Name>Вес тары</Name></Column>
                		<Column Id="AMOUNTML"><Name>Кол-во в мл/гр</Name></Column>
	                	<Column Id="PRICE0"><Name>Себестоимость</Name></Column>
	                	<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="STOREID"><Name>#</Name></Column>
	                	<Column Id="MATERIALID"><Name>##</Name></Column>
                		<Column Id="MINAMOUNT"><Name>Мин. остаток в шт.</Name></Column>
	                	<Column Id="NEEDUPGRADE"><Name>Нужно ли пополнение</Name></Column>
                		<Column Id="UPGRADEAMOUNT"><Name>Требуемое кол-во в шт.</Name></Column>
              	</ColumnsMeta>
	</Item>


	<Item Caption="Отчет - Движение по складам (общий)" Icon="blue1graph128.png">
        	<ShowExcelButton>true</ShowExcelButton>
                	<ShowDiagramButton>true</ShowDiagramButton>
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select storename, materialvendor, materialbrand, materialgroup, article, materialname, 
		volume, amountold, amountoldml, amountoldsumma, 
		income, incomeml, incomesumma, outcome, outcomeml, outcomesumma, 
		amountnew, amountnewml, amountnewsumma from report_store ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
      	<ColumnsMeta>
                		<Column Id="STORENAME"><Name>Склад</Name></Column>
	                	<Column Id="MATERIALVENDOR"><Name>Производитель</Name></Column>
	                	<Column Id="MATERIALBRAND"><Name>Марка (линия)</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
	                	<Column Id="ARTICLE"><Name>Артикул</Name></Column>
	                	<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
	                	<Column Id="VOLUME"><Name>Объем (вес с тарой)</Name></Column>
	                	<Column Id="BOXVOLUME"><Name>Вес тары</Name></Column>
                		<Column Id="AMOUNTOLD"><Name>Остаток в шт. на начало периода</Name></Column>
                		<Column Id="AMOUNTOLDML"><Name>Остаток в мл/гр на начало периода</Name></Column>
	                	<Column Id="AMOUNTOLDSUMMA"><Name>Сумма остатка на начало периода</Name></Column>
                		<Column Id="INCOME"><Name>Приход в шт.</Name></Column>
                		<Column Id="INCOMEML"><Name>Приход в мл/гр</Name></Column>
	                	<Column Id="INCOMESUMMA"><Name>Сумма прихода</Name></Column>
                		<Column Id="OUTCOME"><Name>Расход в шт.</Name></Column>
                		<Column Id="OUTCOMEML"><Name>Расход в мл/гр</Name></Column>
				<Column Id="OUTCOMESUMMA"><Name>Сумма расхода</Name></Column>
	                	<Column Id="AMOUNTNEW"><Name>Остаток в шт. на конец периода</Name></Column>
	                	<Column Id="AMOUNTNEWML"><Name>Остаток в мл/гр на конец периода</Name></Column>
                		<Column Id="AMOUNTNEWSUMMA"><Name>Сумма остатка на конец периода</Name></Column>
                		<Column Id="SALEPRICE"><Name>Цена для клиента</Name></Column>
                		<Column Id="DOCTORPRICE"><Name>Цена для специалиста</Name></Column>
       	</ColumnsMeta>
	</Item>



	<Item Caption="Отчет - Расход товаров на услуги" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
               	<ParamForm ID="Период">
               		<ParentType>DateChoose</ParentType>
               	</ParamForm>
		<DataSource>select OPERATIONDATE, MANIPULATIONNAME, TOBEPAYED, MATERIALNAME, AMOUNT, AMOUNTML, 
			MEASUREMENTUNIT, MATERIALPRICE0, STORENAME, DOCTOR, MATERIALGROUP 
			from REPORT_MATERIAL_OUTLAY_2 ('{0}', '{1}')</DataSource>
              	<ColumnsMeta>
	                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
	                	<Column Id="TOBEPAYED"><Name>Сумма к оплате</Name></Column>
	                	<Column Id="MANIPULATIONPRICE0"><Name>Общая себестоимость материалов</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Материал</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во в шт.</Name></Column>
	                	<Column Id="AMOUNTML"><Name>Кол-во в мл</Name></Column>
	                	<Column Id="MEASUREMENTUNIT"><Name>Ед. измерения</Name></Column>
	                	<Column Id="MATERIALPRICE0"><Name>Себестоимость материала</Name></Column>
	                	<Column Id="STORENAME"><Name>Склад</Name></Column>
	                	<Column Id="DOCTOR"><Name>Специалист</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
              	</ColumnsMeta>
	</Item>



	<Item Caption="Отчет - История операций с товаром" Icon="blue1graph128.png">
		<DataSourceType>QueryReport</DataSourceType>
		<DataSource>select MATERIALNAME, OPERATIONDATE, OPERATIONNAME, STORENAME, 
			 AMOUNT, AMOUNTML, SUMMA, COMMENT from REPORT_MATERIAL ('{0}')</DataSource>
                <ParamForm ID="Товар">
                		<ParentType>NewType</ParentType>
                    		<GeneratedDataControls>
	               		<GeneratedDataControl ID="Товар" ControlType="Grid">
                    			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
               	</ParamForm>
              	<ColumnsMeta>
	                	<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
	                	<Column Id="OPERATIONNAME"><Name>Операция</Name></Column>
	                	<Column Id="STORENAME"><Name>Склад</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во в шт.</Name></Column>
                		<Column Id="AMOUNTML"><Name>Кол-во в мл/гр</Name></Column>
	                	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				<Column Id="COMMENT"><Name>Комментарий</Name></Column>
              	</ColumnsMeta>
	</Item>



	<Item Caption="Отчет - Продажа товаров клиентам" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, ARTICLE, MATERIALNAME, AMOUNT, MEASUREMENTUNIT, PRICE, SUMMA, 
		SUMMA0, MATERIALGROUP, MATERIALBRAND, MATERIALVENDOR, DOCTORNAME, CLIENTNAME, PERCENT
		from REPORT_A_MATERIAL_SALE ('{0}', '{1}', '{2}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Параметры отчета">
                		<ParentType>NewType</ParentType>
               			<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Дата с:" ControlType="DateTime" />
                          		<GeneratedStaticControl ID="Дата по:" ControlType="DateTime" />
              			</GeneratedStaticControls>
				<GeneratedDataControls>
                  			<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM STORE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>

                	</ParamForm>

      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="ARTICLE"><Name>Артикул</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="MEASUREMENTUNIT"><Name>Ед. измерения</Name></Column>
                		<Column Id="PRICE"><Name>Цена</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="SUMMA0"><Name>Себестоимость</Name></Column>
	                	<Column Id="MATERIALVENDOR"><Name>Производитель</Name></Column>
	                	<Column Id="MATERIALBRAND"><Name>Марка (линия)</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
	                	<Column Id="PERCENT"><Name>Процент</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>MATERIALSALE</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Отчет - Продажа товаров специалистам" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, ARTICLE, MATERIALNAME, AMOUNT, MEASUREMENTUNIT, PRICE, SUMMA, 
		SUMMA0, MATERIALGROUP, MATERIALBRAND, MATERIALVENDOR, DOCTORNAME
		from REPORT_A_MATERIAL_SALE_DOCTOR ('{0}', '{1}', '{2}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Параметры отчета">
                		<ParentType>NewType</ParentType>
               			<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Дата с:" ControlType="DateTime" />
                          		<GeneratedStaticControl ID="Дата по:" ControlType="DateTime" />
              			</GeneratedStaticControls>
				<GeneratedDataControls>
                  			<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM STORE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>

                	</ParamForm>

      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="ARTICLE"><Name>Артикул</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="MEASUREMENTUNIT"><Name>Ед. измерения</Name></Column>
                		<Column Id="PRICE"><Name>Цена</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="SUMMA0"><Name>Себестоимость</Name></Column>
	                	<Column Id="MATERIALVENDOR"><Name>Производитель</Name></Column>
	                	<Column Id="MATERIALBRAND"><Name>Марка (линия)</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>MATERIALSALE</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Отчет - Все приходы за период" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select OPERATIONDATE, ARTICLE, MATERIALNAME, AMOUNT, MEASUREMENTUNIT, PRICE0, SUMMA0, 
		MATERIALGROUP, MATERIALBRAND, MATERIALVENDOR, STORENAME
		from REPORT_A_INCOME ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
               	<ParamForm ID="Период">
               		<ParentType>DateChoose</ParentType>
               	</ParamForm>
	      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="ARTICLE"><Name>Артикул</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="MEASUREMENTUNIT"><Name>Ед. измерения</Name></Column>
                		<Column Id="PRICE0"><Name>Себестоимость</Name></Column>
                		<Column Id="SUMMA0"><Name>Сумма Себестоимости</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
	                	<Column Id="MATERIALBRAND"><Name>Марка (линия)</Name></Column>
	                	<Column Id="MATERIALVENDOR"><Name>Производитель</Name></Column>
	                	<Column Id="STORENAME"><Name>Склад</Name></Column>
      		</ColumnsMeta>
	</Item>

	<Item Caption="Отчет - Все перемещения за период" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select OPERATIONDATE, ARTICLE, MATERIALNAME, AMOUNT, MEASUREMENTUNIT, PRICE0, SUMMA0, 
		MATERIALGROUP, MATERIALBRAND, MATERIALVENDOR, FROMSTORENAME, TOSTORENAME
		from REPORT_A_MOVEMENT ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
               	<ParamForm ID="Период">
               		<ParentType>DateChoose</ParentType>
               	</ParamForm>
	      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="ARTICLE"><Name>Артикул</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="MEASUREMENTUNIT"><Name>Ед. измерения</Name></Column>
                		<Column Id="PRICE0"><Name>Себестоимость</Name></Column>
                		<Column Id="SUMMA0"><Name>Сумма Себестоимости</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
	                	<Column Id="MATERIALBRAND"><Name>Марка (линия)</Name></Column>
	                	<Column Id="MATERIALVENDOR"><Name>Производитель</Name></Column>
	                	<Column Id="FROMSTORENAME"><Name>Со склада</Name></Column>
	                	<Column Id="TOSTORENAME"><Name>На склад</Name></Column>
      		</ColumnsMeta>
	</Item>

	<Item Caption="Отчет - Все списания за период" Icon="blue1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select OPERATIONDATE, ARTICLE, MATERIALNAME, AMOUNT, MEASUREMENTUNIT, PRICE0, SUMMA0, 
		MATERIALGROUP, MATERIALBRAND, MATERIALVENDOR, STORENAME, COMMENT
		from REPORT_A_OUTCOME ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
               	<ParamForm ID="Период">
               		<ParentType>DateChoose</ParentType>
               	</ParamForm>
	      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="ARTICLE"><Name>Артикул</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="MEASUREMENTUNIT"><Name>Ед. измерения</Name></Column>
                		<Column Id="PRICE0"><Name>Себестоимость</Name></Column>
                		<Column Id="SUMMA0"><Name>Сумма Себестоимости</Name></Column>
	                	<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
	                	<Column Id="MATERIALBRAND"><Name>Марка (линия)</Name></Column>
	                	<Column Id="MATERIALVENDOR"><Name>Производитель</Name></Column>
	                	<Column Id="STORENAME"><Name>Склад</Name></Column>
	                	<Column Id="COMMENT"><Name>Примечание</Name></Column>
      		</ColumnsMeta>
	</Item>


		<Item Caption="Бухгалтеру: Выгрузка в 1С" Icon="16info.png">
                <DataSourceType>ExternalProgram</DataSourceType>
	        <DataSource>Docs\1С.html</DataSource>
		</Item>

	<Item Caption="Выгрузка документов в 1С" Icon="report.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, DOCTYPEID, NAME, OPERATIONDATE, DOCNUMBER, SUMMA, PAYMENTTYPE from REPORT_1CDOCUMENTS ('{0}', '{1}', '{2}')</DataSource>
                	<ParamForm ID="Период и тип документов">
                		<ParentType>NewType</ParentType>
              			<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Дата с" ControlType="DateTime" />
                          		<GeneratedStaticControl ID="Дата по" ControlType="DateTime" />
              			</GeneratedStaticControls>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Тип документа" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DICT1CDOCTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	</ParamForm>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="DOCTYPEID"><Name>DOCTYPEID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="NAME"><Name>Название</Name></Column>
                		<Column Id="DOCNUMBER"><Name>Номер документа</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
       	</ColumnsMeta>
                		<NewButtons>
                		<NewButton>
                  			<ButtonName>Выгрузить приход</ButtonName>
					<ToolTip>Выгрузить все документы по приходу</ToolTip> 
                  			<ButtonIcon>16storeincome.png</ButtonIcon>
                  			<LaunchProgram>
                    				<ProgAddress>1C\SycretTo1C.exe</ProgAddress>
                    				<ProgParam>-1 -2011-01-01 -2011-12-31 -100</ProgParam>
				                <ColumnName>ID</ColumnName>
                  			</LaunchProgram>
                		</NewButton>
                		<NewButton>
                  			<ButtonName>Выгрузить расход</ButtonName>
					<ToolTip>Выгрузить все документы по реализации</ToolTip> 
                  			<ButtonIcon>16storeoutcome.png</ButtonIcon>
                  			<LaunchProgram>
                    				<ProgAddress>1C\SycretTo1C.exe</ProgAddress>
                    				<ProgParam>-2 -2011-01-01 -2011-12-31 -100</ProgParam>
                  			</LaunchProgram>
                		</NewButton>
              			</NewButtons>
	</Item>





 </Items>
	</Pane>


	<Pane Caption="Работа предприятия" Type="Tree">
	  <Items>
	        <Item Caption="Расписание" Icon="16scheduler.png">
        		<DataSourceType>Scheduler</DataSourceType>
	              	<DataSource>APPOINTMENT</DataSource>
	              	<SchedulerSettings>
				<LoadEditorOnCreate>false</LoadEditorOnCreate>
				<EnableDeleteButton>false</EnableDeleteButton>
			        <LoadByDay>true</LoadByDay>
				<SchedulerColorColumn>MANIPULATIONSTATUSID</SchedulerColorColumn>
				<SchedulerColorTable>MANIPULATIONSTATUS</SchedulerColorTable>
				<SchedulerBorderColorColumn>COLORID</SchedulerBorderColorColumn> 
				<SchedulerBorderColorTable>COLOR</SchedulerBorderColorTable> 
				<TryToUpdateSubject>true</TryToUpdateSubject>
				<CloseOnSave>false</CloseOnSave>
				<ForegroundRefresh>0</ForegroundRefresh>
				<ShowSelfButton>false</ShowSelfButton>
                		<WorkTime>
                  			<MinutesFrom>420</MinutesFrom>
                  			<MinutesTo>1440</MinutesTo>
	                		<ShowOnlyWorkTime>true</ShowOnlyWorkTime>
                		</WorkTime>
        	        	<GroupBy>
					<SchedulerTableForeignColumn>DOCTORID</SchedulerTableForeignColumn>
                   			<SchedulerWorkTimeTable>WORKTIME</SchedulerWorkTimeTable>
					<SchedulerGroupByColumn>ORDERNUMBER</SchedulerGroupByColumn>
               				<SchedulerVisibleColumn>VISIBLE</SchedulerVisibleColumn>
			                <SchedulerDividerColumn>DEPARTMENTID</SchedulerDividerColumn>
					<SchedulerDividerTable>DEPARTMENT</SchedulerDividerTable>
					<SchedulerWorktimeVisibleColumn>ISACTIVE</SchedulerWorktimeVisibleColumn>
			                <SchedulerAltMessage>
                    				<MessageProcedure>select STRVALUE from SCHEDULER_GET_ALT_TEXT ({cid}, '{from}', '{to}')</MessageProcedure>
				                <MessageStringParameter>STRVALUE</MessageStringParameter>
			                </SchedulerAltMessage>
				</GroupBy>

		                <AdditionalWorkTimeColumns>
                  			<Column Id="DEPARTMENTID"><Name>Подразделение</Name><DeepLook>true</DeepLook></Column>
                  			<Column Id="ORDERNUMBER"><Name>№</Name><Sorted>Ascending</Sorted></Column>
		                </AdditionalWorkTimeColumns>

				<MiniInsertFormColumns> 
					<Column Id="CLIENTID" /> 
					<Column Id="EMPLOYEEID"> 
						<Val>AUTH_ID</Val> 
					</Column> 
				</MiniInsertFormColumns> 
		                <MiniInsertFormCloseOnSave>true</MiniInsertFormCloseOnSave>

			<MainMenuButtons> 
			<NewButton> 
                  		<ButtonName>Продать товар</ButtonName>
                  		<ButtonIcon>cassa24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>ADD_MATERIAL_SALE</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{6}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="6"><ColumnName>{9}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="7"><ColumnName>{11}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="8"><ColumnName>{4}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="9"><ConstantValue>0</ConstantValue></ProcedureParam>
	                      		<ProcedureParam Position="10"><ColumnName>{5}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="11"><ColumnName>{8}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="12"><ConstantValue>1</ConstantValue></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Продажа товара">
                		<GeneratedDataControls>
                  		<GeneratedDataControl ID="Клиент" ControlType="Grid">
                    			<DataSource>
						select ID, surname, name, secondname, cellphone, homephone, cardnumber, 
						dolg, deposit, fio2
						from client
					</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>FIO2</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
					<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="FIO2"><Name>Клиент</Name></Column>
						<Column Id="SURNAME"><Name>Фамилия</Name></Column>
						<Column Id="NAME"><Name>Имя</Name></Column>
						<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
						<Column Id="CELLPHONE"><Name>Моб. телефон</Name></Column>
						<Column Id="HOMEPHONE"><Name>Дом. телефон</Name></Column>
						<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
						<Column Id="DOLG"><Name>Долг</Name></Column>
						<Column Id="DEPOSIT"><Name>Депозит</Name></Column>
					</ColumnsMeta>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>select price from material where id = {{Товар}}</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
					</DependentFields>
				</GeneratedDataControl>
	               		<GeneratedDataControl ID="Товар" ControlType="Grid">
                    			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>select price from material where id = {{Товар}}</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Остаток</FieldId>
                	            			<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT ({{Товар}}, {{Склад}})</SQL>
        	                  		</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		<GeneratedDataControl ID="Специалист" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>SHORTFIO</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
				</GeneratedDataControl>
                  		<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>NAME</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
				</GeneratedDataControl>
                  		<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, NAME FROM STORE</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>NAME</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
        	              		<DependentFields>
						<DependentField>
					        	<FieldId>Остаток</FieldId>
                	            			<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT ({{Товар}}, {{Склад}})</SQL>
        	                  		</DependentField>
	                      		</DependentFields>
				</GeneratedDataControl>
	                    	<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
        	              		<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                	      		<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
               				<SqlAddition>{0}</SqlAddition>
					<DependentFields>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
					</DependentFields>
    	            		</GeneratedDataControl>
				</GeneratedDataControls>
        	        	<GeneratedStaticControls>
	                        <GeneratedStaticControl ID="Кол-во" ControlType="Number">
					<DependentFields>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
	                	            		<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
        	                	  	</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Скидка" ControlType="Number">
					<DefaultValue>0</DefaultValue>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
	                	            		<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
        	                	  	</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена со скидкой" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Сумма" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
        	              	<GeneratedStaticControl ID="Дата продажи" ControlType="TimeSpan">
			        	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
	                       	<GeneratedStaticControl ID="Остаток" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			<NewButton>
                  		<ButtonName>ККМ - возврат суммы</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Оформление возврата суммы</ToolTip> 
		                  <LaunchBaseProcedure>
	        	            	<ProcedureName>FAKE</ProcedureName>
        	            		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>

			                <ParamForm ID="Возврат суммы">
					<GeneratedStaticControls>
						<GeneratedStaticControl ID="Сумма" ControlType="Number" />
        	                	</GeneratedStaticControls>
	                	    	</ParamForm>
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-4 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                  </LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>ККМ - X отчет (без гашения)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Формирование X отчета (без гашения)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-2 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton>
                  		<ButtonName>ККМ - Z отчет (с гашением)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Формирование Z отчета (с гашением)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-3 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton> 
                  		<ButtonName>Доступные услуги</ButtonName>
                  		<ButtonIcon>cassa24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>GET_AVAILABLE_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Доступные услуги">
                        	<GeneratedStaticControls>
        	              	<GeneratedStaticControl ID="Время" ControlType="TimeSpan">
			        	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			<NewButton> 
                  		<ButtonName>Проверить сертификат по номеру</ButtonName>
                  		<ButtonIcon>do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>CHECK_CERTIFICATE_BY_NUMBER</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Проверка сертификата по номеру">
                        	<GeneratedStaticControls>
        	              	<GeneratedStaticControl ID="Номер сертификата" ControlType="String" />
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			</MainMenuButtons> 

		    	<NewButtons>
			<NewButton>
				<ButtonName>В карточку клиента</ButtonName>
				<ButtonIcon>kartochka24.png</ButtonIcon>
				<LaunchEditor>
					<ColumnName>CLIENTID</ColumnName>
					<ItemName>CLIENT</ItemName>
				</LaunchEditor>
			</NewButton>

			<NewButton>
		              	<ButtonName>Услуга</ButtonName>
              			<ButtonIcon>usluga24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_APP_MANIP</ProcedureName>
                		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Добавление услуги">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
						SELECT ID, NAME, PRICE, CODE, NAME1, NAME2, NAME3
						FROM GET_DOCTORMANIP_LIST_BY_APP ({[ID]})
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        		               			<FieldId>Стоимость</FieldId>
                        				<SQL>select price from get_tobepayed_for_appmanip ({[ID]}, {{Услуга}})</SQL>
                      				</DependentField>
                      				<DependentField>
                	        			<FieldId>К оплате</FieldId>
        	                			<SQL>select tobepayed from get_tobepayed_for_appmanip ({[ID]}, {{Услуга}})</SQL>
	                      			</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="String">
						<SQLReplacement>
						select 1 as "VALUE" from doctor where id = 0
						</SQLReplacement>
                    			</GeneratedStaticControl>
                    			<GeneratedStaticControl ID="Стоимость" ControlType="Number">
					<DependentFields>
                      				<DependentField>
                	        			<FieldId>К оплате</FieldId>
        	                			<SQL>select tobepayed from get_tobepayed_by_price ({[ID]}, {{Услуга}}, {{Стоимость}})</SQL>
	                      			</DependentField>
					</DependentFields>
                    			</GeneratedStaticControl>
                      			<GeneratedStaticControl ID="К оплате" ControlType="Number">
	                   		</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
            		</NewButton>

                  	<NewButton>
                  		<ButtonName>Комментарий</ButtonName>
                  		<ButtonIcon>comment24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>SCHEDULER_ADD_COMMENT</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Комментарий">
                  		<GeneratedStaticControls>
	                      		<GeneratedStaticControl ID="Комментарий" ControlType="String">
					<SQLReplacement>
						select comment3 as "VALUE"
						from appointment
						where id = ({[ID]})
					</SQLReplacement>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                	    	</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>

			<NewButton>
                  		<ButtonName>Вып./Опл. весь визит</ButtonName>
                  		<ButtonIcon>dopay24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>DO_AND_PAY_VISIT_2</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{5}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{12}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="6"><ColumnName>{4}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Вып./Опл. весь визит">
                			<GeneratedDataControls>
                  				<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    					<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
							<DataColumn>ID</DataColumn>
							<DisplayColumn>NAME</DisplayColumn>
							<SqlAddition>{0}</SqlAddition>
						</GeneratedDataControl>
			                        <GeneratedDataControl ID="Услуги и товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA, UNITS FROM GET_VISIT_CHECK ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>200</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        	<Column Id="UNITS"><Name>Кол-во единиц</Name></Column>
				                        </ColumnsMeta>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
	                  		<GeneratedStaticControls>
		                       		<GeneratedStaticControl ID="Общая сумма" ControlType="Number">
							<SQLReplacement>
								select summa as "VALUE"
								from CHECK_VISIT_TOBEPAYED ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Ранее оплачено" ControlType="Number">
							<SQLReplacement>
								select ALREADYPAYEDSUMMA as "VALUE"
								from GET_VISIT_PAYED_ALREADY ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Сумма с депозита" ControlType="Number">
						<DefaultValue>0</DefaultValue>
		                      		<DependentFields>
							<DependentField>
					                        <FieldId>К оплате</FieldId>
								<SQL>
									select first 1 
									(select summa from CHECK_VISIT_TOBEPAYED ({[ID]})) - 
									(select ALREADYPAYEDSUMMA from GET_VISIT_PAYED_ALREADY ({[ID]})) - 
									{{Сумма с депозита}} 
									as "VALUE" from RDB$RELATIONS
								</SQL>
                          				</DependentField>
		                      		</DependentFields>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="К оплате" ControlType="Number">
							<SQLReplacement>select first 1 
								(select summa from CHECK_VISIT_TOBEPAYED ({[ID]})) - 
								(select ALREADYPAYEDSUMMA from GET_VISIT_PAYED_ALREADY ({[ID]})) - 
								{{Сумма с депозита}} 
								as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
		                        		<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Клиент" ControlType="String">
							<SQLReplacement>
								select c.fio as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Тип карты" ControlType="String">
							<SQLReplacement>
								select ct.name as "VALUE"
								from client c, appointment a, cardtype ct
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
									and ct.id = c.cardtypeid
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Сумма накопл." ControlType="Number">
							<SQLReplacement>
								select manipulationsumma as "VALUE"
								from GET_CLIENT_MANIP_SUMMA_BY_APP ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Долг клиента" ControlType="Number">
							<SQLReplacement>
								select c.dolg as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Долг за курсы" ControlType="Number">
							<SQLReplacement>
				                                select iif (sum (co.summa - co.payment) is null, 0, sum (co.summa - co.payment)) as "VALUE"
								from client c, course co, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
									and co.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Депозит клиента" ControlType="Number">
							<SQLReplacement>
								select c.deposit as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Пробить чек" ControlType="Checkbox">
		                        		<DefaultValue>1</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Обяз. списание" ControlType="String">
							<SQLReplacement>
								select STATUSTEXT as "VALUE" from MMA_GET_VISIT_STATUS ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Остаток единиц" ControlType="String">
							<SQLReplacement>
								select first 1 unitsrest as "VALUE" from SUBSCRIPTION_GET_SUBSCR_FOR_APP ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                  			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>


                  	<NewButton>
                  		<ButtonName>Подтвердить</ButtonName>
                  		<ButtonIcon>confirm24.png</ButtonIcon>
		        	<LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        		<ProcedureName>APPOINTMENT_SUBMIT</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
				</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

                  	<NewButton>
                  		<ButtonName>Клиент пришел</ButtonName>
                  		<ButtonIcon>clienthere24.png</ButtonIcon>
	        		<LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        		<ProcedureName>APPOINTMENT_CLIENT_ENTERED</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
				</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

                  	<NewButton>
                  		<ButtonName>Отменить</ButtonName>
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	            	<ProcedureName>CANCEL_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				        </ProcedureParams>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>

                  	<NewButton>
                  		<ButtonName>Вернуть в предв. запись</ButtonName>
                  		<ButtonIcon>back24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	            	<ProcedureName>GETBACK_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				        </ProcedureParams>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>1</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>6</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>

                  	<NewButton>
				<DeletedAfterAction>true</DeletedAfterAction>
                  		<ButtonName>Удалить</ButtonName>
                  		<ButtonIcon>delete.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>DELETE_APPOINTMENT</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Удаление записи">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Причина" ControlType="String" />
                        			</GeneratedStaticControls>
                				<GeneratedDataControls>
                  					<GeneratedDataControl ID="Администратор" ControlType="LookUpEdit">
								<DefaultValue>AUTH_ID</DefaultValue>
                    						<DataSource>SELECT ID, LOGIN FROM EMPLOYEE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>LOGIN</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<ReadOnly>true</ReadOnly>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>



              	  </NewButtons>


	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="APPOINTMENTMANIPULATION" Index="0">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                  	<NewButtons>
                  	<NewButton>
                  		<ButtonName>Изменить сумму</ButtonName>
                  		<ButtonIcon>cassa.bmp</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>APPOINTMENT_CHANGE_APPMANIP_SUM</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Изменить сумму">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Стоимость" ControlType="Number" />
                        			</GeneratedStaticControls>
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="К оплате" ControlType="Number" />
                        			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
	        	</NewButton>
                  	</NewButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="MATERIALSALE" Index="1">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="APPOINTMENTPAYMENT" Index="2">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME" Index="5">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAY" Index="3">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION" Index="4">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>

              
 	<FormSettings>
	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	 </LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONADDID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
		<ShowUpperColumn>SALOONNAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="DOCTORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="CITYID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="SALOONNAME" />
                 			<AdditionalColumn FieldName="URNAME" />
                 			<AdditionalColumn FieldName="CONTRACTNUMBER" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="CONTACTPERSONID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="LPRPERSONID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="COMMENT" />
               		</AdditionalColumns>
          	 </LookUpEditRelation>
    	</LookUpEditRelations>
	</FormSettings>

        	        </SchedulerSettings>
       	        </Item>

		<Item Caption="Расписание (таблица)" Icon="16workdays.png">
		  <DataSourceType>Table</DataSourceType>
		  <DataSource>APPOINTMENT</DataSource>
		  <DefaultButtons>
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
		  </DefaultButtons>
		  <CustomExcelExport>true</CustomExcelExport>
	              	  <NewButtons>
                			<NewButton>
	                  			<ButtonName>Создать архив</ButtonName>
                  				<ButtonIcon>16options.png</ButtonIcon>
                  				<LaunchProgram>
                    					<ProgAddress>..\Plugins\archive\createarchive.bat</ProgAddress>
                  				</LaunchProgram>
		                	</NewButton>
	              	  </NewButtons>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Red</Color><Value1>2</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>3</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGray</Color><Value1>4</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Yellow</Color><Value1>5</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
		</Colorizers>
		</Item>


	<Item Caption="Мои клиенты" Icon="16client.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, DOCTOR, ISCLIENT, CLIENTSTATE, CITY, SALOONNAME, URNAME, CONTACTDATE, 
			CONTRACTNUMBER, CONTRACTDATE, CONTRACTFINISHDATE, CONTRACTCONTINUENUMBER,
			CONTRACTCONTINUEDATE, LPRPERSON, CONTACTPERSON, COMMENT, 
			REKLAMA, CLIENTSEGMENT, ISHOTSALE, LASTCONTACTDATE 
			from SCRM_GET_CLIENTS_BY_MANAGER</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="DOCTOR"><Name>Менеджер</Name></Column>
                		<Column Id="ISCLIENT"><Name>Клиент?</Name></Column>
                		<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                		<Column Id="CITY"><Name>Город</Name></Column>
                		<Column Id="SALOONNAME"><Name>Салон</Name></Column>
                		<Column Id="URNAME"><Name>Юр. название</Name></Column>
                		<Column Id="CONTACTDATE"><Name>Дата 1 контакта</Name></Column>
                		<Column Id="CONTRACTNUMBER"><Name>Номер 1-го договора</Name></Column>
                		<Column Id="CONTRACTDATE"><Name>Дата 1-го договора</Name></Column>
                		<Column Id="CONTRACTFINISHDATE"><Name>Дата окончания договора</Name></Column>
                		<Column Id="CONTRACTCONTINUENUMBER"><Name>Номер договора на продление</Name></Column>
                		<Column Id="CONTRACTCONTINUEDATE"><Name>Дата договора на продление</Name></Column>
                		<Column Id="LPRPERSON"><Name>ЛПР</Name></Column>
                		<Column Id="CONTACTPERSON"><Name>Контактное лицо</Name></Column>
                		<Column Id="COMMENT"><Name>Комментарий</Name></Column>
                		<Column Id="REKLAMA"><Name>Источник рекламы</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="LASTCONTACTDATE"><Name>Посл. контакт</Name></Column>
       	</ColumnsMeta>
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Добавить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{6}</ColumnName></ProcedureParam>
						<ProcedureParam Position="8"><ColumnName>{7}</ColumnName></ProcedureParam>
						<ProcedureParam Position="9"><ColumnName>{8}</ColumnName></ProcedureParam>
						<ProcedureParam Position="10"><ColumnName>{9}</ColumnName></ProcedureParam>
						<ProcedureParam Position="11"><ColumnName>{10}</ColumnName></ProcedureParam>
						<ProcedureParam Position="12"><ColumnName>{11}</ColumnName></ProcedureParam>
						<ProcedureParam Position="13"><ColumnName>{12}</ColumnName></ProcedureParam>
						<ProcedureParam Position="14"><ColumnName>{13}</ColumnName></ProcedureParam>
						<ProcedureParam Position="15"><ColumnName>{14}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Новый потенциальный клиент">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Город" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM CITY</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<ConnectedTable>CITY</ConnectedTable>
						<VisibleIndex>1</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Должность" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM "POSITION"</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>7</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Источник рекламы" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM REKLAMA</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>11</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Тип 1-го контакта" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DICTFIRSTCONTACTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>15</VisibleIndex>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Название салона" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Юр лицо" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Фамилия" ControlType="String">
							<VisibleIndex>4</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Имя" ControlType="String">
							<VisibleIndex>5</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Отчество" ControlType="String">
							<VisibleIndex>6</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Моб телефон" ControlType="String">
							<VisibleIndex>8</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Раб телефон" ControlType="String">
							<VisibleIndex>9</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Мейл" ControlType="String">
							<VisibleIndex>10</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Дата 1 контакта" ControlType="DateTime"><VisibleIndex>12</VisibleIndex>
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Адрес" ControlType="String">
							<VisibleIndex>13</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>14</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>1</Value1><Field>ISHOTSALE</Field></Colorizer>
		</Colorizers>
	</Item>

<!--!!!!-->
		<Item Caption="Инструменты" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>INSTRUMENT</DataSource>
			<Colorizers>
				<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>6</Value1><Field>INSTRUMENTSTATUSID</Field></Colorizer>
			</Colorizers>
		</Item>

		<Item Caption="Все клиенты" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CLIENT</DataSource>
		<CustomExcelExport>true</CustomExcelExport>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>1</Value1><Field>ISHOTSALE</Field></Colorizer>
		</Colorizers>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Добавить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{6}</ColumnName></ProcedureParam>
						<ProcedureParam Position="8"><ColumnName>{7}</ColumnName></ProcedureParam>
						<ProcedureParam Position="9"><ColumnName>{8}</ColumnName></ProcedureParam>
						<ProcedureParam Position="10"><ColumnName>{9}</ColumnName></ProcedureParam>
						<ProcedureParam Position="11"><ColumnName>{10}</ColumnName></ProcedureParam>
						<ProcedureParam Position="12"><ColumnName>{11}</ColumnName></ProcedureParam>
						<ProcedureParam Position="13"><ColumnName>{12}</ColumnName></ProcedureParam>
						<ProcedureParam Position="14"><ColumnName>{13}</ColumnName></ProcedureParam>
						<ProcedureParam Position="15"><ColumnName>{14}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Новый потенциальный клиент">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Город" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM CITY</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>1</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Должность" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM "POSITION"</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>7</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Источник рекламы" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM REKLAMA</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>11</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Тип 1-го контакта" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DICTFIRSTCONTACTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>15</VisibleIndex>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Название салона" ControlType="String"><VisibleIndex>2</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Юр лицо" ControlType="String"><VisibleIndex>3</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Фамилия" ControlType="String"><VisibleIndex>4</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Имя" ControlType="String"><VisibleIndex>5</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Отчество" ControlType="String"><VisibleIndex>6</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Моб телефон" ControlType="String"><VisibleIndex>8</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Раб телефон" ControlType="String"><VisibleIndex>9</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Мейл" ControlType="String"><VisibleIndex>10</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Дата 1 контакта" ControlType="DateTime"><VisibleIndex>12</VisibleIndex>
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Адрес" ControlType="String"><VisibleIndex>13</VisibleIndex></GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Комментарий" ControlType="String"><VisibleIndex>14</VisibleIndex></GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>do.png</ButtonIcon>
                         		<ButtonName>!!!</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>FIX_CLIENT_REMOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="На кого переписываем">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Клиент" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, FIO2 FROM CLIENT</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>FIO2</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<DependentFields>
							<DependentField>
					                        <FieldId>Информация</FieldId>
                	            				<SQL>select COMMENT from CLIENT WHERE ID = {parentid}</SQL>
                        	  			</DependentField>
						</DependentFields>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Информация" ControlType="String" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
                  			<ButtonName>Конверты</ButtonName>
					<ToolTip>Печать конвертов</ToolTip> 
                  			<ButtonIcon>16sms.png</ButtonIcon>
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\envelopes.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
                		</NewButton>
	              	  </NewButtons>
		</Item>


		<Item Caption="Контактные лица" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>PERSON</DataSource>
		</Item>


		<Item Caption="Счета" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>INVOICE</DataSource>
		</Item>


		<Item Caption="Источники рекламы" Icon="16reklama.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>REKLAMA</DataSource>
		</Item>


		<Item Caption="Продажа товаров" Icon="16materialsale.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALSALE</DataSource>
                <ShowExcelButton>true</ShowExcelButton>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		</Item>


		<Item Caption="Продажа курсов услуг" Icon="16materialsale.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>COURSE</DataSource>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>COURSE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
		</Item>


		<Item Caption="Продажа сертификатов" Icon="16materialsale.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CERTIFICATESALE</DataSource>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CERTIFICATE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
		</Item>


		<Item Caption="Приходы ДС" Icon="16moneyplus.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DDSPLUS</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
              	<NewButtons>
              			<NewButton>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Добавить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>DDSPLUS_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Добавление прихода денежных средств">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Статья приходов" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DDSPLUSARTICLE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>2</VisibleIndex>
		                        	<ConnectedTable>DDSPLUSARTICLE</ConnectedTable>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>4</VisibleIndex>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Сумма" ControlType="Number">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>5</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
			<NewButton>
                  		<ButtonName>Приходный ордер</ButtonName>
                  		<ButtonIcon>16checkgreen.png</ButtonIcon>
				<ToolTip>Печать приходного ордера</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\dsorder.xml -1 -1</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
           	</NewButtons>
		</Item>


		<Item Caption="Расходы ДС" Icon="16moneyminus.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>DDS</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
              	<NewButtons>
              			<NewButton>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Добавить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>DDS_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Добавление расхода денежных средств">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Статья расходов" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DDSARTICLE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>2</VisibleIndex>
		                        	<ConnectedTable>DDSARTICLE</ConnectedTable>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>4</VisibleIndex>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Сумма" ControlType="Number">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>5</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
			<NewButton>
                  		<ButtonName>Расходный ордер</ButtonName>
                  		<ButtonIcon>16checkgreen.png</ButtonIcon>
				<ToolTip>Печать расходного ордера</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\dsorder.xml -1 -1</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
           	</NewButtons>
		</Item>

		<Item Caption="План посещений (таблица)" Icon="16worktime.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MANIPULATIONPLAN</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		</Item>


		<Item Caption="Входящие звонки" Icon="48telephone.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CALLSINCOME</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>16client.png</ButtonIcon>
                         		<ButtonName>Создать карточку клиента</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CALL_ADD_CLIENT</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
		</Item>

		<Item Caption="Журнал чеков ККМ" Icon="16log.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>KKMLOG</DataSource>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		</Item>

		<Item Caption="Журнал заявок с сайта" Icon="16phoneok.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>WEBLOG</DataSource>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		</Item>

	  </Items>
	</Pane>

      </Panes>

<TableEditorParts>


<TableEditorPart Table="KB">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="KBANSWER">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
				<NewButtons>
				<NewButton>
                  			<ButtonName>Отмодерировать</ButtonName>
                  			<ButtonIcon>16do.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_ANSWER_MODERATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Задать статус">
                        		<GeneratedDataControls>
					<GeneratedDataControl ID="Статус" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBSTATUS WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>	                    		
					</GeneratedDataControl>
					</GeneratedDataControls>
	            	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Принять</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>KB_ANSWER_ACCEPT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>
				<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Отклонить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>KB_ANSWER_DECLINE</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>
				</NewButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>
	
			<NewButtons>
				<NewButton>
                  			<ButtonName>Ответить</ButtonName>
                  			<ButtonIcon>16do.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_SET_ANSWER</ProcedureName>
        	            		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Ответить">
                        		<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Ответ" ControlType="String">
						<VisibleIndex>1</VisibleIndex>
                        		</GeneratedStaticControl>
					<GeneratedStaticControl ID="Дата добавления" ControlType="DateTime">
			                        <DefaultValue>NOW</DefaultValue>
						<ReadOnly>true</ReadOnly>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
			</NewButtons>
</TableEditorPart>

<TableEditorPart Table="KBANSWER">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>


<TableEditorPart Table="CLIENTWORK">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="CLIENT">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	<NewButtons>


                	<NewButton>
                  		<ButtonName>Коммент</ButtonName>
               			<ButtonIcon>16checkgreen.png</ButtonIcon>
				<ToolTip>Добавить комментарий в карточку клиента</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_ADD_COMMENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

                	<NewButton>
                  		<ButtonName>Рез. ИЗ</ButtonName>
               			<ButtonIcon>48telephone.png</ButtonIcon>
				<ToolTip>Исходящий звонок по телефону или скайп, когда дозвонились</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_OUTCALL_SUCCESS</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>1</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE (ID = 3) OR (ID = 7)</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>3</VisibleIndex>
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

                	<NewButton>
                  		<ButtonName>Недозвон</ButtonName>
               			<ButtonIcon>cancel24.png</ButtonIcon>
				<ToolTip>Исходящий звонок по телефону или скайп, когда не удалось поговорить с абонентом</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_OUTCALL_REJECT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>1</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE (ID = 3) OR (ID = 7)</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Причина недозвона" ControlType="Grid">
						<VisibleIndex>3</VisibleIndex>
                      				<DataSource>SELECT ID, NAME FROM DICTDEALINGREASON WHERE ID > 0</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="NAME"><Name>Причина недозвона</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>4</VisibleIndex>
						<SQLReplacement>select first 1 '.' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>


                	<NewButton>
                  		<ButtonName>Контакт</ButtonName>
               			<ButtonIcon>16phoneok.png</ButtonIcon>
				<ToolTip>Добавить контакт с клиентом, все кроме исходящих звонков</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_ADD</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="7"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="8"><ConstantValue>0</ConstantValue></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE ID != 1 AND ID != 3 AND ID != 7</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>3</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>4</VisibleIndex>
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Горячая рекомендация</ButtonName>
					<ToolTip>Клиент изначально настроен покупать у нас. Задача не завалить презентацию и продать как можно больший пакет.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_HOT_RECOMMEND_ON</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Обычная рекомендация</ButtonName>
					<ToolTip>Во время процесса продажи выясняется, что клиент "не горячий" (выбирает между компаниями, слишком вялый и т.п.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_HOT_RECOMMEND_OFF</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

<!--
              			<NewButton>
                         		<ButtonName>АКТИВНОСТЬ</ButtonName>
                             	</NewButton>


              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Презентовать БС</ButtonName>
					<ToolTip>Создать вручную себе задачу "Презентация БС". Нужно для замера твоей активности по презентациям.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD_PRESENT_BS</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Повторный контакт по продаже БС</ButtonName>
					<ToolTip>Создать вручную себе задачу "Повторный контакт по продаже БС". Нужно чтобы не забыть связаться и завершить продажу.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD_PRESENT_BS_MORE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Предложить беспл. интенсив</ButtonName>
					<ToolTip>Для того, чтобы клиент начал пользоваться всеми возможностями и делал дальнейшие покупки.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_FREE_I_PRESENT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="ЛПР согласен?" ControlType="Checkbox" />
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Предложить беспл. И. повторно</ButtonName>
					<ToolTip>Для того, чтобы клиент начал пользоваться всеми возможностями и делал дальнейшие покупки.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_FREE_I_PRES_2</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="ЛПР согласен?" ControlType="Checkbox" />
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
-->
<!--
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Исх звонок ЛПР по новинкам</ButtonName>
					<ToolTip>Исходящий звонок ЛПР (личная инициатива менеджера) для допродажи новинок и некупленных модулей</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CONTACT_OUT_LPR</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>40030</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Тема конс-тации" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
-->
              			<NewButton>
                         		<ButtonName>---ПРОДАЖА-----------------------</ButtonName>
                             	</NewButton>

			<NewButton>
		              	<ButtonName>Продать товар</ButtonName>
              			<ButtonIcon>16materialsale.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>SCRM_ADD_MATERIAL_SALE</ProcedureName>
                		<ProcedureParams>
                  			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
			                <ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Продажа товара">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
					<VisibleIndex>1</VisibleIndex>
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>SELECT PRICE FROM SCRM_GET_PRICE_BY_MATERIAL ({[ID]}, {{Товар}})</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select first 1 {{Цена}} - {{Скидка}} as "VALUE" from RDB$RELATIONS</SQL>
                        	  		</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
					<VisibleIndex>3</VisibleIndex>
                      			<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                        	<GeneratedStaticControl ID="Цена" ControlType="Number">
					<VisibleIndex>4</VisibleIndex>
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Скидка" ControlType="Number">
					<VisibleIndex>5</VisibleIndex>
					<DefaultValue>0</DefaultValue>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select first 1 {{Цена}} - {{Скидка}} as "VALUE" from RDB$RELATIONS</SQL>
                        	  		</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена со скидкой" ControlType="Number">
					<VisibleIndex>6</VisibleIndex>
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                      		<GeneratedStaticControl ID="Дата продажи" ControlType="DateTime">
					<VisibleIndex>2</VisibleIndex>
		                       	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Получить первую оплату</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_GET_FIRST_PAY</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>3</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String">
							<VisibleIndex>1</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата договора" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Продлить договор</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_CONT_CONTRACT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>3</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String">
							<VisibleIndex>1</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата договора" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Запланировать допродажу</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SALE_MORE_PLAN</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Начать допродажу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата счета" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Товары" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Получить оплату за допродажу</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_PAY_SALE_MORE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>2</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата оплаты" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>

<!--                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Реквизиты</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_UPDATE_REQUITIES</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{6}</ColumnName></ProcedureParam>
						<ProcedureParam Position="8"><ColumnName>{7}</ColumnName></ProcedureParam>
						<ProcedureParam Position="9"><ColumnName>{8}</ColumnName></ProcedureParam>
						<ProcedureParam Position="10"><ColumnName>{9}</ColumnName></ProcedureParam>
						<ProcedureParam Position="11"><ColumnName>{10}</ColumnName></ProcedureParam>
						<ProcedureParam Position="12"><ColumnName>{11}</ColumnName></ProcedureParam>
						<ProcedureParam Position="13"><ColumnName>{12}</ColumnName></ProcedureParam>
						<ProcedureParam Position="14"><ColumnName>{13}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Реквизиты клиента">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Юр. форма" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, FULLNAME FROM DICTURTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>FULLNAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Должность" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM "POSITION"</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>11</VisibleIndex>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Клиент" ControlType="String">
							<VisibleIndex>1</VisibleIndex>
							<SQLReplacement>select CLIENTNAME AS "VALUE" FROM CLIENT WHERE ID = {[ID]}</SQLReplacement>
							<DependentFields>
								<DependentField>
							                <FieldId>Цена</FieldId>
                	            					<SQL>select CR.DICTURTYPEID AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQL>
	        	                	  		</DependentField>
							</DependentFields>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Юр. лицо" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
							<SQLReplacement>select CR.URNAME AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="ИНН" ControlType="String">
							<VisibleIndex>4</VisibleIndex>
							<SQLReplacement>select CR.INN AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="КПП" ControlType="String">
							<VisibleIndex>5</VisibleIndex>
							<SQLReplacement>select CR.KPP AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Факт. адрес" ControlType="String">
							<VisibleIndex>6</VisibleIndex>
							<SQLReplacement>select CR.FCTADDRESS AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Расч. счет" ControlType="String">
							<VisibleIndex>7</VisibleIndex>
							<SQLReplacement>select CR.RSCHET AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Назв. банка" ControlType="String">
							<VisibleIndex>8</VisibleIndex>
							<SQLReplacement>select CR.BANKNAME AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="БИК" ControlType="String">
							<VisibleIndex>9</VisibleIndex>
							<SQLReplacement>select CR.BIK AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Корр. счет" ControlType="String">
							<VisibleIndex>10</VisibleIndex>
							<SQLReplacement>select CR.CORSCHET AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Фамилия" ControlType="String">
							<VisibleIndex>12</VisibleIndex>
							<SQLReplacement>select CR.CORSCHET AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Имя" ControlType="String">
							<VisibleIndex>13</VisibleIndex>
							<SQLReplacement>select CR.SURNAME AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Отчество" ControlType="String">
							<VisibleIndex>14</VisibleIndex>
							<SQLReplacement>select CR.NAME AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>15</VisibleIndex>
							<SQLReplacement>select CR.SECONDNAME AS "VALUE" FROM CLIENTREQUISITE CR, CLIENT C WHERE CR.ID = C.CLIENTREQUISITEID AND C.ID = {[ID]}</SQLReplacement>
						</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
-->
              			

              			<NewButton>
                         		<ButtonName>---МС------------------</ButtonName>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Создать задачу</ButtonName>
					<ToolTip>Создать задачу вручную</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40010</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Создать задачу вручную">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Сотрудник" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Выполнить" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Задача" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Треб. акт сдачи?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Обновить</ButtonName>
					<ToolTip>Этому клиенту мной было установлено обновление, на все компьютеры, с сендером</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SOFT_UPDATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Установлена версия">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Версия ПО" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSSVERSION WHERE ID >= 9 AND ID != 1000</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Инд версия?" ControlType="Checkbox">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Бизнес-консультация</ButtonName>
					<ToolTip>Проведена консультация ЛПР по ведению бизнеса по входящему от ЛПР (не техподдержка!, не администраторы!)</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD_CONSULT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Повторное обучение 1 час</ButtonName>
					<ToolTip>Проведено повторное обучение 1 час. Если было 2 часа, нужно нажать 2 раза. Если платное, то дополнительно нужно продать товар "Платное обучение"</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD_TRAINING</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ConstantValue>60</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
                         		<ButtonName>---ТЕХПОДДЕРЖКА------------</ButtonName>
                             	</NewButton>
								<NewButton>
								<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Создать заявку</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
									<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
									<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
									<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
									<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		</ProcedureParams>
               		                <ParamForm ID="Новая заявка">
									<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Отв.сотр." ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Папка" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
									<GeneratedStaticControl ID="Дедлайн" ControlType="DateTime">
			                        <VisibleIndex>4</VisibleIndex>
									</GeneratedStaticControl>
									<GeneratedStaticControl ID="Время МС(мин)" ControlType="Number">
							<VisibleIndex>5</VisibleIndex>
                        			</GeneratedStaticControl>
									</GeneratedStaticControls>
	                      			</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Техподдержка</ButtonName>
					<ToolTip>Этому клиенту мной была оказана техподдержка, достаточно значимая, поэтому я хочу внести в базу</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SUPPORT_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40020</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Оказана техподдержка">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Тип задачи" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSUPPORTTYPE</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Вопрос клиента" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Что сделано" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Вопрос решен?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Техподдержка внерабочее</ButtonName>
					<ToolTip>Этому клиенту мной была оказана техподдержка во время моего дежурства в вечернее время и/или выходной день</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SUPPORT_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40025</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Оказана техподдержка">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Тип задачи" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSUPPORTTYPE</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Вопрос клиента" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Что сделано" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Вопрос решен?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
				<NewButton>
                         		<ButtonName>---ОТКАЗЫ----------------------------</ButtonName>
                             	</NewButton>

<!--
                	<NewButton>
                  		<ButtonName>Отказ</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Отказ" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM CLIENT_GET_AVAIL_CANCEL_STATE ({[ID]})</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
-->
                	<NewButton>
                  		<ButtonName>Отказ от первой покупки</ButtonName>
				<ToolTip>Отказ потенциального клиента от покупки программы</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_POT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="К кому ушел?" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTCOMPETITOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>3</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ уже клиента</ButtonName>
				<ToolTip>Уже клиент ушел перестал пользоваться программой</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_CLIENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="К кому ушел?" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTCOMPETITOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>3</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ продлить</ButtonName>
				<ToolTip>Клиент работает в программе, но не хочет продлять</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_PROLONG</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID IN (0, 1,2,3)</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Претензия от клиента</ButtonName>
               			<ButtonIcon>cancel24.png</ButtonIcon>
				<ToolTip>Клиент сообщил о претензии (возврат денег, не устраивают возможности ПО, претензия к МС, к техподдержке и пр)</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_COMPLAINT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>1</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE (ID = 2) OR (ID = 4) OR (ID = 6) OR (ID = 8)</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="К кому претензия?" ControlType="Grid">
						<VisibleIndex>3</VisibleIndex>
                      				<DataSource>SELECT ID, NAME FROM DICTCOMPLAINTTYPE</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="NAME"><Name>К кому претензия</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>4</VisibleIndex>
						<SQLReplacement>select first 1 '.' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

<!--
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Входящий контакт от ЛПР</ButtonName>
					<ToolTip>Проведена консультация ЛПР по ведению бизнеса (не техподдержка!), предложены новинки и некупленные модули</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CONTACT_IN_LPR</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>40040</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
-->

              			<NewButton>
                         		<ButtonName>---УПРАВЛЕНИЕ------------</ButtonName>
                             	</NewButton>
                	<NewButton>
                  		<ButtonName>Сменить менеджера по продаже</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_MANAGER</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Смена менеджера">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>SHORTFIO</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>


                	<NewButton>
                  		<ButtonName>Сменить менеджера по сопр.</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_MANAGER_SUPPORT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Смена менеджера">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 AND POSITIONID = 11</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>SHORTFIO</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>



              			<NewButton>
                         		<ButtonName>---ДОКУМЕНТЫ---------------------</ButtonName>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Выставить счет</ButtonName>
					<ToolTip>Выставить счет на все неоплаченные продажи товаров</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_INVOICE</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_invoice.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать договор на покупку</ButtonName>
					<ToolTip>Создать договор на покупку Sycret Saloon в соответствие с выставленным счетом</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_contract.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать договор на продление</ButtonName>
					<ToolTip>Создать договор на продление обслуживания в соответствие с выставленным счетом</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_contract_prolong.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать акт сдачи/приемки</ButtonName>
					<ToolTip>Создать акт сдачи/приемки в соответствие с договором</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_act.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
	</NewButtons>

	<ForeignKeyRelations>

        	<ForeignKeyRelation ChildTable="SERVICE" Index="0">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Презентовать</ButtonName>
				<ToolTip>Показал ЛПРу презентацию сервиса, объяснил выгоды, зафиксировал интерес. Можно делать презентацию несколько раз.</ToolTip> 
              			<ButtonIcon>16paygreen.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_PRESENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Презентовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Будет брать?" ControlType="Checkbox" />
	                      			<GeneratedStaticControl ID="Коммент" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Подключить</ButtonName>
				<ToolTip>Пошел отсчет платного использования, зафиксировал дату отключения</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_START</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Подключить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата запуска" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Оплачено до" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Коммент" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Продлить</ButtonName>
				<ToolTip>Продлил сервис, зафиксировал новую дату отключения</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_PROLONG</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Продлить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата отключения" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Коммент" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ от сервиса</ButtonName>
				<ToolTip>Клиент отказался продлить сервис. Указал причину</ToolTip> 
               			<ButtonIcon>cancel24.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Отказ">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Причина" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>


        	<ForeignKeyRelation ChildTable="INSTRUMENT" Index="7">
			<Colorizers>
				<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>6</Value1><Field>INSTRUMENT.INSTRUMENTSTATUSID</Field></Colorizer>
			</Colorizers>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Презентовать</ButtonName>
				<ToolTip>Показал ЛПРу И., объяснил выгоды. 
Зафиксируем интерес ЛПР к этому И.</ToolTip> 
               			<ButtonIcon>16paygreen.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_PRESENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Презентовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Будет внедрять?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Стартовать</ButtonName>
				<ToolTip>ЛПР приступил к запуску этого И.</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_START</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Стартовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Завершить</ButtonName>
				<ToolTip>Этот И. запущен успешно, переходим к запуску следующего. 
Или не получилось запустить и пока что этим И. перестаем заниматься...</ToolTip> 
               			<ButtonIcon>cancel24.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_FINISH</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Завершить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Успешно?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Указать прогресс</ButtonName>
				<ToolTip>Есть ли существенные улучшения с прошлого раза по данному И.?</ToolTip> 
               			<ButtonIcon>confirm24.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_SET_PROGRESS</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Указать прогресс">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Есть прогресс?" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM INSTRUMENTPROGRESS WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Поставить оценку</ButtonName>
				<ToolTip>Оценку берем из отчета Контроль дисциплины, оценка м.б. дробной</ToolTip> 
               			<ButtonIcon>green1graph128.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_SET_MARK</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Поставить оценку">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Оценка" ControlType="Number" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="PERSON" Index="3">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Указать как ЛПР</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_PLRPERSON</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Указать как ответственное лицо</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_CONTACTPERSON</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="CLIENTWORK" Index="1">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ от допродажи</ButtonName>
				<ToolTip>Была запланирована допродажа, но клиент в конце концов отказался</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_WORK_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 'Почему отказался?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
           		</NewButtons>
        	</ForeignKeyRelation>
			<!-- by Andrey -->
			<ForeignKeyRelation ChildTable="SUPPORTTASK" Index="9">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
              		<NewButtons>
              											
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Одобрить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_ACCEPT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Одобрить">
									<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Отв.сотр." ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
								<GeneratedDataControl ID="Стоимость" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM PRICETASK</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>3</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        	</ParamForm>
		            		</LaunchBaseProcedure>
						</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Принять в разработку</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_IN_DEVELOP</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
								</ProcedureParams>
               		        </LaunchBaseProcedure>
					 	</NewButton>
                	<NewButton>
                  		<ButtonName>Передать в тестирование</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_TESTING</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Передать в тестирование">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Папка" ControlType="String">
								<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
					<GeneratedStaticControl ID="Комментарий" ControlType="String">
					<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
						<VisibleIndex>3</VisibleIndex>
					</GeneratedStaticControl>
					<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>4</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Установлено клиенту</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_RELEASE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
									<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
								</ProcedureParams>
								<ParamForm ID="Установлено клиенту">
								<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Время МС" ControlType="Number">
								<VisibleIndex>2</VisibleIndex>
								</GeneratedStaticControl>
							</GeneratedStaticControls>
							</ParamForm>
               		        </LaunchBaseProcedure>
					 	</NewButton>
					
					<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Закрыта</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_CLOSE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
								</ProcedureParams>
               		        </LaunchBaseProcedure>
					 	</NewButton>
					
					<NewButton>
                  		<ButtonName>Отменена</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
								<VisibleIndex>2</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>3</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
                  		<ButtonName>Нет данных</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_NO_DATA</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
							<VisibleIndex>2</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>3</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
                  		<ButtonName>Вернуть в разработку</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_RETURN</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Вернуть в разработку">
									<GeneratedDataControls>
									<GeneratedDataControl ID="Сотрудник" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>	
								</GeneratedDataControls>
								<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
								<VisibleIndex>3</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время МС" ControlType="Number">
								<VisibleIndex>4</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
						</ParamForm>		
		            	</LaunchBaseProcedure>
                	</NewButton>
           		</NewButtons>
        	</ForeignKeyRelation>
				
			<!--end Andrey-->
        	<ForeignKeyRelation ChildTable="MATERIALSALE" Index="4">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="APPOINTMENT" Index="5">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="INVOICE" Index="6">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="CLIENTCONTACT" Index="2">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

	</ForeignKeyRelations>

</TableEditorPart>

<TableEditorPart Table="APPOINTMENT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>

	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="APPOINTMENTMANIPULATION">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="APPOINTMENTPAYMENT">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>



<Comment>Grid instead of lookupedit</Comment>
	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONADDID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
		<ShowUpperColumn>FIO2</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="FIO2" />
                 			<AdditionalColumn FieldName="SURNAME" />
                 			<AdditionalColumn FieldName="NAME" />
                 			<AdditionalColumn FieldName="SECONDNAME" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="HOMEPHONE" />
                 			<AdditionalColumn FieldName="CARDNUMBER" />
                 			<AdditionalColumn FieldName="CARDTYPEID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="DOLG" />
                 			<AdditionalColumn FieldName="DEPOSIT" />
                 			<AdditionalColumn FieldName="ISINBLACKLIST" />
                 			<AdditionalColumn FieldName="COMMENT2" />
                 			<AdditionalColumn FieldName="ISACTIVE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
    	</LookUpEditRelations>

</TableEditorPart>


<TableEditorPart Table="APPOINTMENTMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION" Index="0">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAY" Index="1">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME" Index="2">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>

	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
    	</LookUpEditRelations>

</TableEditorPart>


<TableEditorPart Table="MATERIALSALE">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE" />
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="PRICE" />
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           <LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
			<ShowUpperColumn>FIO2</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="FIO2" />
                 			<AdditionalColumn FieldName="SURNAME" />
                 			<AdditionalColumn FieldName="NAME" />
                 			<AdditionalColumn FieldName="SECONDNAME" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="HOMEPHONE" />
                 			<AdditionalColumn FieldName="CARDNUMBER" />
                 			<AdditionalColumn FieldName="CARDTYPEID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="DOLG" />
                 			<AdditionalColumn FieldName="DEPOSIT" />
               		</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>

	<NewButtons>
	</NewButtons>

</TableEditorPart>


<TableEditorPart Table="STOREINCOMEMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>

</TableEditorPart>

<TableEditorPart Table="STOREMOVEMENTMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTCOMEMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTLAY">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTLAYADDITION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="MATERIALSALEDOCTOR">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="MANIPULATIONMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREINCOME">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
				<KeyButton>N</KeyButton>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_INCOME_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар прихода">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SIID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
	                      			<DependentField>
        	                			<FieldId>Себестоимость</FieldId>
                	    				<SQL>select price0 from GET_MATERIAL_PRICE0 ({{Товар}})</SQL>
                      				</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                    			<GeneratedStaticControl ID="Себестоимость" ControlType="Number" />
                    			<GeneratedStaticControl ID="Ставка НДС" ControlType="Number" />
                      			<GeneratedStaticControl ID="За всю партию" ControlType="Checkbox" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeincome.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Печать этикеток</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-1 -{0}</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Печать ценников</ButtonName>
                  		<ButtonIcon>16checkgreen.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\labels.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREINCOMEMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	<NewButtons>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-0 -{0}</ProgParam>
                    			<ColumnName>STOREINCOMEMATERIAL.ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>



	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="STOREMOVEMENT">
		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_MOVEMENT_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар перемещения">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
                      			<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SMID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
                      			</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storemovement.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREMOVEMENTMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="STOREOUTCOME">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_OUTCOME_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар списания">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SOID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeoutcome.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREOUTCOMEMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DICTCOURSEMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="COURSE">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
               		<NewButtons>
                		<NewButton>
                  			<ButtonName>Оплатить курс</ButtonName>
                  			<ButtonIcon>cassa24.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>COURSE_ADD_PAYMENT</ProcedureName>
	           			<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
	                    		<ParamForm ID="Оплата курса услуг">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="К оплате" ControlType="String">
							<SQLReplacement>select summa - payment as "VALUE" from course where id = {[ID]}</SQLReplacement>
							<ReadOnly>true</ReadOnly>
		       	              			<DependentFields>
								<DependentField>
        	        	        				<FieldId>Оплата</FieldId>
                	        					<SQL>cast('{{К оплате}}' as decimal(15,2))</SQL>
                      						</DependentField>
							</DependentFields>
        	               			</GeneratedStaticControl>
						<GeneratedStaticControl ID="Оплата" ControlType="Number">
                        			</GeneratedStaticControl>
        	              			<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>COURSE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
               		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="COURSEMANIPULATION"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="COURSEPAYMENT"> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="COURSEMANIPULATION">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="COURSEPAYMENT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="MANIPULATION">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="MANIPULATIONMATERIAL" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONPERCENT" Index="1"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONMATERIALADD" Index="2"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="MATERIAL">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREINCOMEMATERIAL" Index="0"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
		<NewButtons>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-0 -{0}</ProgParam>
                    			<ColumnName>STOREINCOMEMATERIAL.ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MATERIALSALE"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MATERIALSALEDOCTOR"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREMOVEMENTMATERIAL"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTCOMEMATERIAL"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTLAY"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DEPOSIT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="DEPARTMENT">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DOCTOR" Index="0"> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONGROUP" Index="1"> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="APPOINTMENT" Index="2"> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DICTCOURSE">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить услугу</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_DICTCOUSEMANIPULATION</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Услуга курса">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.NAME, m.PRICE, m.CODE, mg.NAME, mg2.NAME, mg3.NAME
					FROM manipulation m, manipulationgroup mg, manipulationgroup2 mg2, manipulationgroup3 mg3 
					where 
						m.manipulationgroupid = mg.id
						and m.manipulationgroupid2 = mg2.id
						and m.manipulationgroupid3 = mg3.id
						and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Стоим. 1 услуги" ControlType="Number" />
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations>
        <ForeignKeyRelation ChildTable="DICTCOURSEMANIPULATION">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="MATERIALOUTLAYSTANDARD">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE" />
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="PRICE" />
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="SUBSCRIPTION">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONVISIT" Index="0"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONMANIP" Index="1"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONFREEZE" Index="2"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONPROLONG" Index="3"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="ACTIONS">
		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 1</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_1</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 1">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 2</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_2</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 2">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP2</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 3</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_3</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 3">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP3</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="ACTIONMANIPULATION"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 


	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="ACTIONMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="INVENTORY">


		<NewButtons>
			<NewButton>
		              	<ButtonName>Сформировать приход</ButtonName>
              			<ButtonIcon>16storeincome.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_GEN_STOREINCOME</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                		</ProcedureParams>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Сформировать списание</ButtonName>
              			<ButtonIcon>16storeoutcome.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_GEN_STOREOUTCOME</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                		</ProcedureParams>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INVENTORYMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
			<NewButton>
		              	<ButtonName>Фактический остаток</ButtonName>
              			<ButtonIcon>16store.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_SET_REAL_AMOUNT</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>INVENTORYMATERIAL.ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Фактический остаток">
				<GeneratedDataControls>
	                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
        	              			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                	      			<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
	               				<SqlAddition>{0}</SqlAddition>
        	            		</GeneratedDataControl>
				</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Факт. остаток" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="CARDTYPE">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DISCOUNTMANIPULATION" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DISCOUNT" Index="1"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DISCOUNTMATERIAL" Index="2"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DEPOSITBONUS" Index="3"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="DISCOUNTMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSE">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INDCOURSEVISIT" Index="0"> 
		<DefaultButtons>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="INDCOURSEPAYMENT" Index="1"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
			<NewButtons>
			<NewButton>
                  		<ButtonName>Чек (по оплатам)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Печать чека (квитанции)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcheckpay.xml -1 -1</ProgParam>
                    				<ColumnName>INDCOURSEPAYMENT.ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			</NewButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
		<NewButtons>
                	<NewButton>
                  		<ButtonName>На печать врачу</ButtonName>
                  		<ButtonIcon>icon.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcourse.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>На печать клиенту</ButtonName>
                  		<ButtonIcon>icon.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcourse_forclient.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
			<NewButton>
                  		<ButtonName>Оплатить программу</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_PAY</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Вид оплаты">
                			<GeneratedDataControls>
                  				<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    					<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
							<DataColumn>ID</DataColumn>
							<DisplayColumn>NAME</DisplayColumn>
							<SqlAddition>{0}</SqlAddition>
						</GeneratedDataControl>
					</GeneratedDataControls>
	                  		<GeneratedStaticControls>
		                       		<GeneratedStaticControl ID="Инд. программа" ControlType="String">
							<SQLReplacement>
								select name as "VALUE"
								from indcourse
								where id = {[ID]}
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Сумма" ControlType="String">
							<SQLReplacement>
								select dolg as "VALUE"
								from indcourse
								where id = {[ID]}
							</SQLReplacement>
							<ReadOnly>false</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
		                        		<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Основание платежа" ControlType="String" />
                  			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
			        </NewButton>
			<NewButton>
                  		<ButtonName>Чек (общий)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Печать чека (квитанции)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcheck.xml -1 -1</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Отменить оплату</ButtonName>
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_DELETE_PAY</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
			        </NewButton>
		</NewButtons>
</TableEditorPart>


<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSEVISIT">

		<NewButtons>
			<NewButton>
                  		<ButtonName>Зачесть услугу</ButtonName>
				<ToolTip>Добавить уже оказанную ранее услугу и зачесть ее оплату</ToolTip> 
                  		<ButtonIcon>new.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_ADD_DONE_MANIP</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Выбор услуги">
		             		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
					SELECT ID, OPERATIONDATE, NAME, TOBEPAYED, CODE, NAME1, NAME2, NAME3
					FROM INDCOURSE_GET_DONE_MANIPLIST ('{[ID]}')
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="TOBEPAYED"><Name>Сумма к оплате</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
	                    		</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INDCOURSEMANIPULATION" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSEMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<Comment>SMS start 2011-09-15</Comment>
<TableEditorPart Table="SMSGROUP">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
	             	<NewButton>
                  		<ButtonName>Удалить</ButtonName>
                  		<ButtonIcon>delete.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_DELETE_GROUP</ProcedureName>
	           		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
			<NewButton>
                  		<ButtonName>Добавить всех клиентов</ButtonName>
				<ToolTip>Добавить всех клиентов с номерами телефонов</ToolTip> 
                  		<ButtonIcon>16specs.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_ADD_ALL_CLIENTS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Добавить одного клиента</ButtonName>
				<ToolTip>Добавить всех клиентов с номерами телефонов</ToolTip> 
                  		<ButtonIcon>16clientok.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_ADD_CLIENT</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ConstantValue>0</ConstantValue></ProcedureParam>
				</ProcedureParams>
               		                <ParamForm ID="Выбор клиента">
                			<GeneratedDataControls>
	                    		<GeneratedDataControl ID="Клиент" ControlType="Grid">
        	              			<DataSource>SELECT ID, CARDNUMBER, SURNAME, NAME, SECONDNAME, CELLPHONE, FIO2 FROM CLIENT</DataSource>
        	              			<DataColumn>ID</DataColumn>
                	      			<DisplayColumn>FIO2</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                      			<NullString>0</NullString>
						<ColumnsMeta>
							<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
							<Column Id="SURNAME"><Name>Фамилия</Name></Column>
							<Column Id="NAME"><Name>Имя</Name></Column>
							<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
							<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
							<Column Id="FIO2"><Name>Клиент</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Отменить рассылку</ButtonName>
				<ToolTip>Отменить / остановить рассылку</ToolTip> 
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_SET_STATUS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ConstantValue>4</ConstantValue></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Активировать рассылку</ButtonName>
				<ToolTip>Активировать ранее отмененную рассылку</ToolTip> 
                  		<ButtonIcon>16do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_SET_STATUS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ConstantValue>1</ConstantValue></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="SMSGROUPCLIENT" Index="0"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>
<Comment>SMS finish</Comment>


<TableEditorPart Table="MEDRECORD">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
                  	<NewButton>
				<DeletedAfterAction>true</DeletedAfterAction>
                  		<ButtonName>Подписать</ButtonName>
                  		<ButtonIcon>do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>MED_RECORD_SUBSCRIBE</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Удаление записи">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Личный ключ" ControlType="String" />
                        			</GeneratedStaticControls>
                				<GeneratedDataControls>
                  					<GeneratedDataControl ID="Администратор" ControlType="LookUpEdit">
								<DefaultValue>AUTH_ID</DefaultValue>
                    						<DataSource>SELECT ID, LOGIN FROM EMPLOYEE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>LOGIN</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<ReadOnly>true</ReadOnly>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

			</NewButton>
		</NewButtons>
</TableEditorPart>

<TableEditorPart Table="MEDRECORDCONTENT">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
</TableEditorPart>


<TableEditorPart Table="DOCTOR">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="MATERIALSALEDOCTOR"> 
	<DefaultButtons>
        	<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="CERTIFICATESALE">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CERTIFICATE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
</TableEditorPart>


<TableEditorPart Table="DICTSALARYPROGRESS">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DICTSALARYPROGRESSDETAIL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DICTSALARYPROGRESSSALE"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="DICTSUBSCRIPTION">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DICTSUBSCRIPTIONDOW"> 
	<DefaultButtons>
        	<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DICTSUBSCRIPTIONMANIP"> 
	<DefaultButtons>
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="DICTSUBSCRIPTIONDOW">
	<DefaultButtons>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="CLIENTCONTACT">
	<DefaultButtons>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>


</TableEditorParts>

    </Role>

<Comment>**********************************************************************************************************</Comment>

    <Role id="2">
      <Panes>

	<Pane Caption="База знаний" Type="List">
         <Items>
               <Item Caption="База знаний" Icon="company.png">
               <DataSourceType>Query</DataSourceType>
               <DataSource>select ID, QUESTION, KBGROUP, KBGROUP2, KBGROUP3, QUESTIONDATE, QUESTIONDOCTOR, ANSWER, ANSWERDATE, KBSTATUS, ANSWERDOCTOR
			from KBASE</DataSource>
			   <DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
					<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
				<ColumnsMeta>
						<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="QUESTION"><Name>Вопрос</Name></Column>
                		<Column Id="KBGROUP"><Name>Группа 1</Name></Column>
                		<Column Id="KBGROUP2"><Name>Группа 2</Name></Column>
                		<Column Id="KBGROUP3"><Name>Группа 3</Name></Column>
                		<Column Id="QUESTIONDATE"><Name>Дата вопроса</Name></Column>
                		<Column Id="QUESTIONDOCTOR"><Name>Автор вопроса</Name></Column>
                		<Column Id="ANSWER"><Name>Ответ</Name></Column>
                		<Column Id="ANSWERDATE"><Name>Дата ответа</Name></Column>
                		<Column Id="KBSTATUS"><Name>Статус</Name></Column>
                		<Column Id="ANSWERDOCTOR"><Name>Автор ответа</Name></Column>
		       	</ColumnsMeta>
					<NewButtons>
	               			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Задать вопрос</ButtonName>
					<ToolTip>Есть вопрос? Здесть Поищи! Не нашёл? Напиши!</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_ADD_QUEST</ProcedureName>
        	            		<ProcedureParams>
	                    <ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Добавление вопроса">

                        		<GeneratedStaticControls>
									<GeneratedStaticControl ID="Вопрос" ControlType="String">
										<VisibleIndex>1</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата добавления" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
										<VisibleIndex>2</VisibleIndex>
										<ReadOnly>true</ReadOnly>
									</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
								
								<GeneratedDataControls>
								<GeneratedDataControl ID="Группа 1" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>3</VisibleIndex>	                    		
								</GeneratedDataControl>
								<GeneratedDataControl ID="Группа 2" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP2 WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>4</VisibleIndex>	                    		
								</GeneratedDataControl>
								<GeneratedDataControl ID="Группа 3" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP3 WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>5</VisibleIndex>	                    		
								</GeneratedDataControl>
								</GeneratedDataControls>
								
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              		</NewButtons>

		<EditorOpen>
			<Column>ID</Column>
			<Table>KB</Table>
		</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>Новый вопрос</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>Есть ответ</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>На модерации</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>Отклонён</Value1><Field>KBSTATUS</Field></Colorizer>
		</Colorizers>
	</Item>
        </Items>
        </Pane>


        <Pane Caption="KPI 2016" Type="List">
	  <Items>

	<Item Caption="Зарплата" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, NAME, SALARY
			from SCRM_SALARY_2016 ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="NAME"><Name>Наименование</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>NAME</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Зарплата - процент с продаж" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, STRPERCENT, income
			from SCRM_SALARY_2016_PERCENT ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Наименование</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>Сумма к оплате</Name></Column>
                	<Column Id="STRPERCENT"><Name>Процент</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Итого</Value1><Field>CLIENTNAME</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="KPI MC - Главный" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select KPINAME, SUMMA
			from KPI_2016_MS_TOTAL_SALARY ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="SUMMA"><Name>Выполнено в %</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>KPINAME</NameColumn>
              	</OpenDiagram>
	</Item>


	<Item Caption="KPI MC - Зарплата" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, SUMMA, SALARY
			from KPI_2016_MS_TOTAL_SALARY ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="SUMMA"><Name>Выполнено в %</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="TODO" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, subject, action, reason, expirationdate, dayamount, summa, priority
			from kpi_2016_ms_todo_main ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SUBJECT"><Name>Объект</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="REASON"><Name>Причина</Name></Column>
                	<Column Id="SUMMA"><Name>Принесет баллов</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>1</Value1><Field>PRIORITY</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>2</Value1><Field>PRIORITY</Field></Colorizer>
			<Colorizer Type="Equal"><Color>White</Color><Value1>3</Value1><Field>PRIORITY</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="KPI MC №1 - Запуск" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, AMOUNT, SUMMA, COMMENT, COMMENT2
			from KPI_2016_MS_LAUNCH ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="AMOUNT"><Name>Количество</Name></Column>
                	<Column Id="SUMMA"><Name>Баллы</Name></Column>
                	<Column Id="COMMENT"><Name>Формула подсчета баллов</Name></Column>
                	<Column Id="COMMENT2"><Name>Норма</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №1 - Оценки сендера" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, clientname, oldrate, newrate
			from KPI_2016_MS_SENDER ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="OLDRATE"><Name>Старая оценка</Name></Column>
                	<Column Id="NEWRATE"><Name>Новая оценка</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №1 - Контакты с ЛПР" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, clientname, OUTRESLPRCOUNT, OTHERLPRCOUNT, CLIENTWORKCOUNT
			from KPI_2016_CONTACTS ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="OUTRESLPRCOUNT"><Name>Исходящие звонки</Name></Column>
                	<Column Id="OTHERLPRCOUNT"><Name>Другие контакты</Name></Column>
                	<Column Id="CLIENTWORKCOUNT"><Name>Работы</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №1 - Нет контакта с ЛПР" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, OUTRESLPRCOUNT, OTHERLPRCOUNT, CLIENTWORKCOUNT
			from KPI_2016_NO_CONTACTS ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="OUTRESLPRCOUNT"><Name>Исходящие звонки</Name></Column>
                	<Column Id="OTHERLPRCOUNT"><Name>Другие контакты</Name></Column>
                	<Column Id="CLIENTWORKCOUNT"><Name>Работы</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №1 - TODO Запуск" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, subject, action, reason, summa, priority
			from kpi_2016_ms_1_launch_todo ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SUBJECT"><Name>Объект</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="REASON"><Name>Причина</Name></Column>
                	<Column Id="SUMMA"><Name>Принесет баллов</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №2 - Сервисы" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, AMOUNT, SUMMA, COMMENT, COMMENT2
			from KPI_2016_MS_3_SERVICE_MAIN ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="AMOUNT"><Name>Количество</Name></Column>
                	<Column Id="SUMMA"><Name>Баллы</Name></Column>
                	<Column Id="COMMENT"><Name>Формула подсчета баллов</Name></Column>
                	<Column Id="COMMENT2"><Name>Норма</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №2 - Запуски" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate
			from kpi_2016_ms_3_service_lauch ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №2 - Обслуживаются" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate, expirationdate
			from kpi_2016_ms_3_service_prolonged ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №2 - Просрочены" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate, expirationdate, dayamount
			from kpi_2016_ms_3_service_expired ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №2 - Отказы" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, startdate, expirationdate, dayamount, rejectdate
			from kpi_2016_ms_3_service_reject ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
                	<Column Id="REJECTDATE"><Name>Дата отказа</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №2 - TODO Сервисы" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, servicename, expirationdate, action, dayamount
			from kpi_2016_ms_3_service_todo ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №3 - Продления" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, KPINAME, AMOUNT, SUMMA, COMMENT, COMMENT2
			from KPI_2016_MS_2_PROLONG ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="AMOUNT"><Name>Количество</Name></Column>
                	<Column Id="SUMMA"><Name>Баллы</Name></Column>
                	<Column Id="COMMENT"><Name>Формула подсчета баллов</Name></Column>
                	<Column Id="COMMENT2"><Name>Норма</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №3 - Продления за месяц" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_PROLONG ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №3 - Мои клиенты, которых продлил я сам" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_MS_2_PROLONG_BY_YOU ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="KPI MC №3 - Пропущено продлений в этом месяце" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_MS_2_NOT_PROLONG ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="KPI MC №3 - Непродленные клиенты" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, clientstate, expirationdate
			from KPI_2016_MS_2_TOTAL_NOT_PROLONG ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Дата окончания договора</Name></Column>
       		</ColumnsMeta>
	</Item>

	
	<Item Caption="KPI MC №3 - TODO Продления" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>
			select doctorname, clientname, subject, action, reason, expirationdate, dayamount, summa, priority
			from kpi_2016_ms_2_prolong_todo ('{0}', '{1}')
		</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="SUBJECT"><Name>Объект</Name></Column>
                	<Column Id="ACTION"><Name>Что сделать</Name></Column>
                	<Column Id="REASON"><Name>Причина</Name></Column>
                	<Column Id="SUMMA"><Name>Принесет баллов</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачено до</Name></Column>
                	<Column Id="DAYAMOUNT"><Name>Дней осталось</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="Все сервисы" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select DOCTORNAME, ID, ISON, SERVICENAME, SERVICESTATUS, CLIENTNAME, STARTDATE, EXPIRATIONDATE, COMMENT
			from SERVICE_LIST_BY_MS</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
               		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="ISON"><Name>Подключен?</Name></Column>
                	<Column Id="SERVICENAME"><Name>Сервис</Name></Column>
                	<Column Id="SERVICESTATUS"><Name>Статус</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="STARTDATE"><Name>Дата запуска</Name></Column>
                	<Column Id="EXPIRATIONDATE"><Name>Оплачен до</Name></Column>
                	<Column Id="COMMENT"><Name>Комментарий</Name></Column>
       		</ColumnsMeta>
	</Item>



	  </Items>
	</Pane>


        <Pane Caption="Перспективность клиентов" Type="List">
	  <Items>


	<Item Caption="Перспективность клиентов" Icon="green1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select id, clientname, totalsumma, PLANNEDSUMMA, LASTMONTHSUMMA, TASKSUPPORTAMOUNT, 
			TASKMAINTENCEAMOUNT, CONTACTAMOUNT, STATENAME, INSTRUMENTMARK, INACTIVEDAYCOUNT, SUPPORTMANAGER, 
			RATING 
			from SCRM_REPORT_CLIENT_RATING ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
                		<Column Id="PLANNEDSUMMA"><Name>Сумма запланированных</Name></Column>
                		<Column Id="LASTMONTHSUMMA"><Name>Сумма покупок в посл. месяц</Name></Column>
                		<Column Id="TASKSUPPORTAMOUNT"><Name>Кол-во техподдержки</Name></Column>
                		<Column Id="TASKMAINTENCEAMOUNT"><Name>Кол-во др. задач по сопр.</Name></Column>
                		<Column Id="CONTACTAMOUNT"><Name>Кол-во контактов</Name></Column>
                		<Column Id="STATENAME"><Name>Состояние</Name></Column>
                		<Column Id="INSTRUMENTMARK"><Name>Сумма оценок за И.</Name></Column>
                		<Column Id="INACTIVEDAYCOUNT"><Name>Кол-во дней с посл. контакта/задачи</Name></Column>
                		<Column Id="SUPPORTMANAGER"><Name>МС</Name></Column>
                		<Column Id="RATING"><Name>Песпективность клиента</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	  </Item>

	  </Items>
	</Pane>

        

        <Pane Caption="МС" Type="List">
	  <Items>

	<Item Caption="Личные продажи - Динамика по месяцам" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE FROM REPORT_DYN ('{0}', 'SCRM_MS_REPORT_INCOME_KPI', 'SELFMANIPSUMMA')</DataSource>
                <ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="PARAMNAME"><Name>Месяц</Name></Column>
                	<Column Id="PARAMVALUE"><Name>Значение</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>0</DiagramType>
	                <NameColumn>PARAMNAME</NameColumn>
        	        <HiddenColumns>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="МС - Зарплата" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, SELFMANIPSUMMA, STRPERCENT, income
			from SCRM_MS_REPORT_INCOME_KPI ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
                	<Column Id="SELFMANIPSUMMA"><Name>Сумма личных продаж</Name></Column>
                	<Column Id="STRPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="МС - KPI - Активность" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, PRIORITY, ACTIVITYNAME, DESCRIPTION, WEIGHT, DONEAMOUNT, DONETOTAL
			from KPI_ACTIVITY_MS ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="ACTIVITYNAME"><Name>Показатель</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
                	<Column Id="WEIGHT"><Name>Вес</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Сделано кол-во</Name></Column>
                	<Column Id="DONETOTAL"><Name>Сделано сумма</Name></Column>
       		</ColumnsMeta>
	</Item>



	<Item Caption="МС - KPI - Аккуратность - просроченные работы" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_EXPIRED</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="МС - KPI - Аккуратность - Контроль качества" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENT, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from KK_MANAGER_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Показатель</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>


	<Item Caption="Выполненные работы" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEDONE, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISACTDONE
			from KK_CLIENTWORK_DONE_MANAGER ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEDONE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISACTDONE"><Name>Акт получен?</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>1</Value1><Field>ISNEEDACT</Field></Colorizer>
		</Colorizers>
	</Item>

	  </Items>
	</Pane>



	<Pane Caption="SCRM Контроль качества менеджер" Type="List">
	  <Items>

	<Item Caption="План работ на сегодня" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="План работ - просрочены" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_EXPIRED</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="План работ скоро" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_SOON</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
              			<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			</NewButtons>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Выполненные работы" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEDONE, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISACTDONE
			from KK_CLIENTWORK_DONE_MANAGER ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEDONE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISACTDONE"><Name>Акт получен?</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>1</Value1><Field>ISNEEDACT</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="Контроль качества (сегодня)" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENT, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from KK_MANAGER_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Показатель</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>
<!-- by Andrey -->

<Item Caption="Отчет по заявкам" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select NUMBER, CREATEDATE, CREATEDOCTOR, NAME, DOCNAME, STATUS, OPERATIONDATE, ENDDATE, MSCOUNT, DEVCOUNT, STATUSID, DEVELOP, PRICE
			from REPORT_SUPPORTTASK ('{0}', '{1}')</DataSource>
			<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="NUMBER"><Name>Номер заявки</Name></Column>
                		<Column Id="CREATEDATE"><Name>Дата создания</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="NAME"><Name>Клиент</Name></Column>
						<Column Id="DOCNAME"><Name>Отв.сотр.</Name></Column>
						<Column Id="STATUS"><Name>Статус</Name></Column>
						<Column Id="OPERATIONDATE"><Name>Дата последнего изменения</Name></Column>
                		<Column Id="ENDDATE"><Name>Дедлайн</Name></Column>
                		<Column Id="MSCOUNT"><Name>Время МС</Name></Column>
						<Column Id="DEVCOUNT"><Name>Время разраб.</Name></Column>
						<Column Id="STATUSID"><Name>ID</Name><Visible>false</Visible></Column>
						<Column Id="DEVELOP"><Name>Разработчик</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
       	</ColumnsMeta>
	<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>4</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>8</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>6</Value1><Field>STATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGray</Color><Value1>7</Value1><Field>STATUSID</Field></Colorizer>
		</Colorizers>
	</Item>
<!-- end -->
	<Item Caption="Зарплата старый" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, income
			from SCRM_MANAGER_REPORT_INCOME ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Зарплата kpi" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, doctorname, KPINAME, KPIDESCRIPTION, KPIVALUE, MARKDESCRIPTION, MARK, SALARY
			from KPI_SALARY ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="KPIDESCRIPTION"><Name>Описание</Name></Column>
                	<Column Id="KPIVALUE"><Name>Значение</Name></Column>
                	<Column Id="MARKDESCRIPTION"><Name>Описание оценки</Name></Column>
                	<Column Id="MARK"><Name>Оценка</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Зарплата прогрессивный процент" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, SELFMANIPSUMMA, STRPERCENT, income
			from SCRM_MANAGER_REPORT_INCOME_KPI ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
                	<Column Id="SELFMANIPSUMMA"><Name>Сумма личных продаж</Name></Column>
                	<Column Id="STRPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="kpi активность" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, PRIORITY, ACTIVITYNAME, WEIGHT, PLANNEDAMOUNT, PLANNEDSALEAMOUNT, 
			PLANNEDTOTAL, DONEAMOUNT, DONETOTAL, DESCRIPTION
			from KPI_ACTIVITY ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="ACTIVITYNAME"><Name>Показатель</Name></Column>
                	<Column Id="WEIGHT"><Name>Вес</Name></Column>
                	<Column Id="PLANNEDAMOUNT"><Name>План. кол-во</Name></Column>
                	<Column Id="PLANNEDSALEAMOUNT"><Name>План. кол-во продаж</Name></Column>
                	<Column Id="PLANNEDTOTAL"><Name>План. сумма</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Сделано кол-во</Name></Column>
                	<Column Id="DONETOTAL"><Name>Сделано сумма</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
	</Item>



	<Item Caption="Контакты сводный (по менеджеру)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select DOCTORNAME, CONTACTTYPENAME, AMOUNT, AMOUNTISSUCCESS, AMOUNTISNOTSUCCESS, 
			CLIENTAMOUNTSUCCESS, CLIENTGROUP1, CLIENTGROUP2, CLIENTGROUP3, CLIENTGROUP4, CLIENTGROUP5
			from KPI_CONTACTS ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="CONTACTTYPENAME"><Name>Вид контакта</Name></Column>
                	<Column Id="AMOUNT"><Name>Общее кол-во</Name></Column>
                	<Column Id="AMOUNTISSUCCESS"><Name>Кол-во результативных контактов (РК)</Name></Column>
                	<Column Id="AMOUNTISNOTSUCCESS"><Name>Кол-во нерезультативных контактов</Name></Column>
                	<Column Id="CLIENTAMOUNTSUCCESS"><Name>Кол-во клиентов по РК</Name></Column>
                	<Column Id="CLIENTGROUP1"><Name>Клиентов РК: потенциальных</Name></Column>
                	<Column Id="CLIENTGROUP2"><Name>Клиентов РК: первый год</Name></Column>
                	<Column Id="CLIENTGROUP3"><Name>Клиентов РК: продленных</Name></Column>
                	<Column Id="CLIENTGROUP4"><Name>Клиентов РК: не продленных</Name></Column>
                	<Column Id="CLIENTGROUP5"><Name>Клиентов РК: отказ (=не клиент)</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="Контакты детальный (по менеджеру)" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, DOCTORNAME, OPERATIONDATE, CLIENTNAME, PERSONNAME, DICTCONTACTTYPENAME, COMMENT, 
			ISSUCCESS, DICTDEALINGREASONNAME
			from REPORT_CONTACT_DETAILS ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="PERSONNAME"><Name>Контактное лицо</Name></Column>
                	<Column Id="DICTCONTACTTYPENAME"><Name>Вид контакта</Name></Column>
                	<Column Id="COMMENT"><Name>Комментарий</Name></Column>
                	<Column Id="ISSUCCESS"><Name>Результативный?</Name></Column>
                	<Column Id="DICTDEALINGREASONNAME"><Name>Причина недозвона</Name></Column>
       		</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTCONTACT</Table>
	</EditorOpen>
	</Item>

	<Item Caption="Воронка продаж диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_DONE ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка отказов диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_REJECT ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка возможностей диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_AVAILABLE ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка сводный" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select STATENAME, DONEAMOUNT, STRDONEPERCENT, REJECTAMOUNT, STRREJECTPERCENT, AVAILABLEAMOUNT, STRAVAILABLEPERCENT, DESCRIPTION
			from SCRM_FUNNEL_COMMON ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="STATENAME"><Name>Состояние</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Выполнено</Name></Column>
                	<Column Id="STRDONEPERCENT"><Name>Выполнено, %</Name></Column>
                	<Column Id="REJECTAMOUNT"><Name>Отказов</Name></Column>
                	<Column Id="STRREJECTPERCENT"><Name>Отказов, %</Name></Column>
                	<Column Id="AVAILABLEAMOUNT"><Name>Выполнить</Name></Column>
                	<Column Id="STRAVAILABLEPERCENT"><Name>Выполнить, %</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Всего</Value1><Field>STATENAME</Field></Colorizer>
		</Colorizers>
	</Item>

	  </Items>
	</Pane>

        <Pane Caption="SMS Рассылки" Type="List">
	  <Items>

		<Item Caption="SMS рассылки" Icon="16info.png">
                <DataSourceType>ExternalProgram</DataSourceType>
	        <DataSource>Docs\sms.html</DataSource>
		</Item>

		<Item Caption="Настройки сообщений" Icon="16options.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>SMSSETTINGS</DataSource>
		</Item>

		<Item Caption="Шаблоны сообщений" Icon="16log.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>SMSPATTERN</DataSource>
		</Item>

		<Item Caption="Рассылки" Icon="16sms.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>SMSGROUP</DataSource>
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	              	  <NewButtons>
                		<NewButton>
					<MultiButtonLaunch>true</MultiButtonLaunch>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Создать пустую рассылку</ButtonName>
					<ToolTip>Создать пустую рассылку для дальнейшего наполнения</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_ADD_GROUP</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>0</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Шаблон" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSPATTERN</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
		                        	<ConnectedTable>SMSPATTERN</ConnectedTable>
					</GeneratedDataControl>
					</GeneratedDataControls>
	              			<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Название" ControlType="String" />
        	                  		<GeneratedStaticControl ID="Время начала" ControlType="TimeSpan" />
              				</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
					<MultiButtonLaunch>true</MultiButtonLaunch>
	       				<ButtonIcon>addblue24.png</ButtonIcon>
                         		<ButtonName>Создать массовую рассылку</ButtonName>
					<ToolTip>Создать рассылку по всей базе клиентов</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_ADD_GROUP</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Шаблон" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSPATTERN</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
	              			<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Название" ControlType="String" />
        	                  		<GeneratedStaticControl ID="Время начала" ControlType="TimeSpan" />
              				</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
				<NewButton>
        	          		<ButtonName>Повторить рассылку</ButtonName>
					<ToolTip>Повторная отправка недоставленным адресатам или новая рассылка по всем адресатам</ToolTip> 
                  			<ButtonIcon>addyel24.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
		        	        <ProcedureName>SMS_COPY_GROUP</ProcedureName>
        		            	<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Шаблон" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSPATTERN</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
					</GeneratedDataControl>
					</GeneratedDataControls>
	              			<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Название" ControlType="String">
							<SQLReplacement>select name || ' Повтор' as "VALUE" from smsgroup where id = {[ID]}</SQLReplacement>
	                      		<DependentFields>
						<DependentField>
				                        <FieldId>Шаблон</FieldId>
                            				<SQL>select P.ID AS "VALUE" FROM SMSPATTERN P, SMSGROUP G WHERE P.ID = G.SMSPATTERNID AND G.ID = {[ID]}</SQL>
                          			</DependentField>
	                      		</DependentFields>
                        			</GeneratedStaticControl>
        	                  		<GeneratedStaticControl ID="Время начала" ControlType="TimeSpan">
							<SQLReplacement>select starttime as "VALUE" from smsgroup where id = {[ID]}</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Только недост." ControlType="Checkbox" />
              				</GeneratedStaticControls>
                	    		</ParamForm>
			            	</LaunchBaseProcedure>
			        </NewButton>
                		<NewButton>
                  			<ButtonName>Удалить</ButtonName>
                  			<ButtonIcon>delete.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SMS_DELETE_GROUP</ProcedureName>
	           			<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                		</NewButton>
	              	  </NewButtons>
		</Item>




	<Item Caption="Сформировать рассылку" Icon="16do.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select id, surname, name, secondname, cellphone, segmentname, cardtype, cardnumber, SEX, 
			MANIPULATIONCOUNT, MANIPULATIONSUMMA, SALESUMMA, TOTALSUMMA, 
			LASTVISITDATE, LASTVISITDAYCOUNT, STRSENDSMS, STRVALIDCELLPHONE, CLIENTSTATE, CLIENTNAME 
			from report_client ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="FIO2"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MANIPULATIONCOUNT"><Name>Кол-во посещений</Name></Column>
                		<Column Id="MANIPULATIONSUMMA"><Name>Сумма услуг</Name></Column>
                		<Column Id="AVERAGESUMMA"><Name>Средний чек на услуги</Name></Column>
                		<Column Id="SALESUMMA"><Name>Сумма продаж</Name></Column>
                		<Column Id="AVERAGESALESUMMA"><Name>Средний чек на продажи</Name></Column>
                		<Column Id="AVERAGECHECK"><Name>Средний чек посещения</Name></Column>
                		<Column Id="TOTALSUMMA"><Name>Общая сумма</Name></Column>
                		<Column Id="SEX"><Name>Пол</Name></Column>
                		<Column Id="LASTVISITDATE"><Name>Дата последнего посещения</Name></Column>
                		<Column Id="LASTVISITDAYCOUNT"><Name>Кол-во дней с последнего посещения</Name></Column>
                		<Column Id="SURNAME"><Name>Фамилия</Name></Column>
                		<Column Id="NAME"><Name>Имя</Name></Column>
                		<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
                		<Column Id="CELLPHONE"><Name>Моб. телефон</Name></Column>
                		<Column Id="CARDTYPE"><Name>Тип карты</Name></Column>
                		<Column Id="STRSENDSMS"><Name>Рассылать SMS?</Name></Column>
                		<Column Id="STRVALIDCELLPHONE"><Name>Телефон заполнен правильно?</Name></Column>
                		<Column Id="SEGMENTNAME"><Name>Сегмент</Name></Column>
                		<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightGray</Color><Value1>Нет</Value1><Field>STRVALIDCELLPHONE</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Tan</Color><Value1>Нет</Value1><Field>STRSENDSMS</Field></Colorizer>
		</Colorizers>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	              	  <NewButtons>
                		<NewButton>
					<MultiButtonLaunch>true</MultiButtonLaunch>
	       				<ButtonIcon>16sms.png</ButtonIcon>
                         		<ButtonName>Добавить в SMS рассылку</ButtonName>
					<ToolTip>Сформировать группу клиентов и добавить ее в SMS рассылку</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_ADD_CLIENT_LIST</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>IDS</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Рассылка">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Рассылка" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM SMSGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
		                        	<ConnectedTable>SMSGROUP</ConnectedTable>
					</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
	</Item>




	<Item Caption="Текущий баланс / Пополнить счет" Icon="16paypurple.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select id, summa from SMS_get_balance</DataSource>
      	<ColumnsMeta>
	                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="SUMMA"><Name>Текущий баланс</Name></Column>
       	</ColumnsMeta>
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Print"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Excel"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Diagram"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>16payred.png</ButtonIcon>
                         		<ButtonName>Пополнить счет</ButtonName>
					<ToolTip>Выставить счет на указанную сумму для пополнения виртуального счета в системе</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_SET_REQUSITES</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выставить счет">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Организация" ControlType="String" />
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String" />
                        			<GeneratedStaticControl ID="Сумма" ControlType="String" />
                        		</GeneratedStaticControls>
                	    		</ParamForm>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-1 -Plugins\GenWordDoc\smsinvoice.xml -0 -0</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
		            	</LaunchBaseProcedure>
                             	</NewButton>
              	  </NewButtons>
	</Item>

	<Item Caption="Отчет - Отправленные сообщения (подробный)" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select operationdate, smsgroup, smstype, client, cellphone, smstext, smscount, smsstatus, result, resultdescription 
			from SMS_report ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="OPERATIONDATE"><Name>Время отправки</Name></Column>
                		<Column Id="SMSGROUP"><Name>Рассылка</Name></Column>
                		<Column Id="SMSTYPE"><Name>Вид рассылки</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
                		<Column Id="SMSTEXT"><Name>Сообщение</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во единиц</Name></Column>
                		<Column Id="SMSSTATUS"><Name>Статус доставки</Name></Column>
                		<Column Id="RESULT"><Name>Код ошибки</Name></Column>
                		<Column Id="RESULTDESCRIPTION"><Name>Описание ошибки</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Отчет - Клиенты - Отправленные сообщения" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, SURNAME, NAME, SECONDNAME, CELLPHONE, SMSCOUNT, SMSCOUNTDELIVERED, SMSCOUNTUNDELIVERED
			from SMS_report_client ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
	                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="SURNAME"><Name>Фамилия</Name></Column>
                		<Column Id="NAME"><Name>Имя</Name></Column>
                		<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
                		<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во сообщений</Name></Column>
                		<Column Id="SMSCOUNTDELIVERED"><Name>Доставлено сообщений</Name></Column>
                		<Column Id="SMSCOUNTUNDELIVERED"><Name>Недоставлено сообщений</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Отчет - По рассылкам - Доставленные" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select GROUPID, GROUPNAME, SMSTYPE, SMSCOUNT, SUMMA
			from SMS_report_group ('{0}', '{1}')</DataSource>
	              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="GROUPID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="GROUPNAME"><Name>Рассылка</Name></Column>
                		<Column Id="SMSTYPE"><Name>Вид рассылки</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во доставленных сообщений</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
       	</ColumnsMeta>
	</Item>


	<Item Caption="Отчет - План рассылок" Icon="pink1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select GROUPID, GROUPNAME, SMSTYPE, SMSCOUNT, SUMMA
			from SMS_report_group_plan ('{0}', '{1}')</DataSource>
	              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="GROUPID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="GROUPNAME"><Name>Рассылка</Name></Column>
                		<Column Id="SMSTYPE"><Name>Вид рассылки</Name></Column>
                		<Column Id="SMSCOUNT"><Name>Кол-во планируемых сообщений</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
       	</ColumnsMeta>
	</Item>


	  </Items>
	</Pane>

        <Pane Caption="Справочники" Type="List">
	  <Items>

		<Item Caption="Инструкция" Icon="16info.png">
                <DataSourceType>ExternalProgram</DataSourceType>
	        <DataSource>Docs\howto.html</DataSource>
		</Item>


		<Item Caption="График работы (по дням)" Icon="16workdays.png"> 
			<DataSourceType>SchedulerWorkTimeEditor</DataSourceType> 
			<TabOpen> 
				<PanName>Работа предприятия</PanName> 
				<ItemName>Расписание</ItemName> 
			</TabOpen> 	
		</Item> 

		<Item Caption="Услуги" Icon="16uslugi.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MANIPULATION</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
		</Item> 


	  </Items>
	</Pane>



        <Pane Caption="Складской учет" Type="List">
	  <Items>
	<Item Caption="Товары" Icon="16products.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIAL</DataSource>
		<LoadEditorOnCreate>false</LoadEditorOnCreate>
	</Item>


 </Items>
	</Pane>


	<Pane Caption="Работа предприятия" Type="Tree">
	  <Items>

	        <Item Caption="Расписание" Icon="16scheduler.png">
        		<DataSourceType>Scheduler</DataSourceType>
	              	<DataSource>APPOINTMENT</DataSource>
	              	<SchedulerSettings>
				<LoadEditorOnCreate>false</LoadEditorOnCreate>
				<EnableDeleteButton>false</EnableDeleteButton>
			        <LoadByDay>true</LoadByDay>
				<SchedulerColorColumn>MANIPULATIONSTATUSID</SchedulerColorColumn>
				<SchedulerColorTable>MANIPULATIONSTATUS</SchedulerColorTable>
				<SchedulerBorderColorColumn>COLORID</SchedulerBorderColorColumn> 
				<SchedulerBorderColorTable>COLOR</SchedulerBorderColorTable> 
				<TryToUpdateSubject>true</TryToUpdateSubject>
				<CloseOnSave>false</CloseOnSave>
				<ForegroundRefresh>0</ForegroundRefresh>
				<ShowSelfButton>false</ShowSelfButton>
                		<WorkTime>
                  			<MinutesFrom>420</MinutesFrom>
                  			<MinutesTo>1440</MinutesTo>
	                		<ShowOnlyWorkTime>true</ShowOnlyWorkTime>
                		</WorkTime>
        	        	<GroupBy>
					<SchedulerTableForeignColumn>DOCTORID</SchedulerTableForeignColumn>
                   			<SchedulerWorkTimeTable>WORKTIME</SchedulerWorkTimeTable>
					<SchedulerGroupByColumn>ORDERNUMBER</SchedulerGroupByColumn>
               				<SchedulerVisibleColumn>VISIBLE</SchedulerVisibleColumn>
			                <SchedulerDividerColumn>DEPARTMENTID</SchedulerDividerColumn>
					<SchedulerDividerTable>DEPARTMENT</SchedulerDividerTable>
					<SchedulerWorktimeVisibleColumn>ISACTIVE</SchedulerWorktimeVisibleColumn>
			                <SchedulerAltMessage>
                    				<MessageProcedure>select STRVALUE from SCHEDULER_GET_ALT_TEXT ({cid}, '{from}', '{to}')</MessageProcedure>
				                <MessageStringParameter>STRVALUE</MessageStringParameter>
			                </SchedulerAltMessage>
				</GroupBy>

		                <AdditionalWorkTimeColumns>
                  			<Column Id="DEPARTMENTID"><Name>Подразделение</Name><DeepLook>true</DeepLook></Column>
                  			<Column Id="ORDERNUMBER"><Name>№</Name><Sorted>Ascending</Sorted></Column>
		                </AdditionalWorkTimeColumns>

				<MiniInsertFormColumns> 
					<Column Id="CLIENTID" /> 
					<Column Id="EMPLOYEEID"> 
						<Val>AUTH_ID</Val> 
					</Column> 
				</MiniInsertFormColumns> 
		                <MiniInsertFormCloseOnSave>true</MiniInsertFormCloseOnSave>

			<MainMenuButtons> 
			<NewButton> 
                  		<ButtonName>Продать товар</ButtonName>
                  		<ButtonIcon>cassa24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>ADD_MATERIAL_SALE</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{6}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="6"><ColumnName>{9}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="7"><ColumnName>{11}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="8"><ColumnName>{4}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="9"><ConstantValue>0</ConstantValue></ProcedureParam>
	                      		<ProcedureParam Position="10"><ColumnName>{5}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="11"><ColumnName>{8}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="12"><ConstantValue>1</ConstantValue></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Продажа товара">
                		<GeneratedDataControls>
                  		<GeneratedDataControl ID="Клиент" ControlType="Grid">
                    			<DataSource>
						select ID, surname, name, secondname, cellphone, homephone, cardnumber, 
						dolg, deposit, fio2
						from client
					</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>FIO2</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
					<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="FIO2"><Name>Клиент</Name></Column>
						<Column Id="SURNAME"><Name>Фамилия</Name></Column>
						<Column Id="NAME"><Name>Имя</Name></Column>
						<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
						<Column Id="CELLPHONE"><Name>Моб. телефон</Name></Column>
						<Column Id="HOMEPHONE"><Name>Дом. телефон</Name></Column>
						<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
						<Column Id="DOLG"><Name>Долг</Name></Column>
						<Column Id="DEPOSIT"><Name>Депозит</Name></Column>
					</ColumnsMeta>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>select price from material where id = {{Товар}}</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
					</DependentFields>
				</GeneratedDataControl>
	               		<GeneratedDataControl ID="Товар" ControlType="Grid">
                    			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>select price from material where id = {{Товар}}</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Остаток</FieldId>
                	            			<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT ({{Товар}}, {{Склад}})</SQL>
        	                  		</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		<GeneratedDataControl ID="Специалист" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>SHORTFIO</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
				</GeneratedDataControl>
                  		<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>NAME</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
				</GeneratedDataControl>
                  		<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, NAME FROM STORE</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>NAME</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
        	              		<DependentFields>
						<DependentField>
					        	<FieldId>Остаток</FieldId>
                	            			<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT ({{Товар}}, {{Склад}})</SQL>
        	                  		</DependentField>
	                      		</DependentFields>
				</GeneratedDataControl>
	                    	<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
        	              		<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                	      		<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
               				<SqlAddition>{0}</SqlAddition>
					<DependentFields>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
					</DependentFields>
    	            		</GeneratedDataControl>
				</GeneratedDataControls>
        	        	<GeneratedStaticControls>
	                        <GeneratedStaticControl ID="Кол-во" ControlType="Number">
					<DependentFields>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
	                	            		<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
        	                	  	</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Скидка" ControlType="Number">
					<DefaultValue>0</DefaultValue>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
	                	            		<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
        	                	  	</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена со скидкой" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Сумма" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
        	              	<GeneratedStaticControl ID="Дата продажи" ControlType="TimeSpan">
			        	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
	                       	<GeneratedStaticControl ID="Остаток" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			<NewButton>
                  		<ButtonName>ККМ - возврат суммы</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Оформление возврата суммы</ToolTip> 
		                  <LaunchBaseProcedure>
	        	            	<ProcedureName>FAKE</ProcedureName>
        	            		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>

			                <ParamForm ID="Возврат суммы">
					<GeneratedStaticControls>
						<GeneratedStaticControl ID="Сумма" ControlType="Number" />
        	                	</GeneratedStaticControls>
	                	    	</ParamForm>
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-4 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                  </LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>ККМ - X отчет (без гашения)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Формирование X отчета (без гашения)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-2 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton>
                  		<ButtonName>ККМ - Z отчет (с гашением)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Формирование Z отчета (с гашением)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-3 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton> 
                  		<ButtonName>Доступные услуги</ButtonName>
                  		<ButtonIcon>cassa24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>GET_AVAILABLE_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Доступные услуги">
                        	<GeneratedStaticControls>
        	              	<GeneratedStaticControl ID="Время" ControlType="TimeSpan">
			        	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			<NewButton> 
                  		<ButtonName>Проверить сертификат по номеру</ButtonName>
                  		<ButtonIcon>do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>CHECK_CERTIFICATE_BY_NUMBER</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Проверка сертификата по номеру">
                        	<GeneratedStaticControls>
        	              	<GeneratedStaticControl ID="Номер сертификата" ControlType="String" />
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			</MainMenuButtons> 

		    	<NewButtons>
			<NewButton>
				<ButtonName>В карточку клиента</ButtonName>
				<ButtonIcon>kartochka24.png</ButtonIcon>
				<LaunchEditor>
					<ColumnName>CLIENTID</ColumnName>
					<ItemName>CLIENT</ItemName>
				</LaunchEditor>
			</NewButton>

			<NewButton>
		              	<ButtonName>Услуга</ButtonName>
              			<ButtonIcon>usluga24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_APP_MANIP</ProcedureName>
                		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Добавление услуги">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
						SELECT ID, NAME, PRICE, CODE, NAME1, NAME2, NAME3
						FROM GET_DOCTORMANIP_LIST_BY_APP ({[ID]})
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        		               			<FieldId>Стоимость</FieldId>
                        				<SQL>select price from get_tobepayed_for_appmanip ({[ID]}, {{Услуга}})</SQL>
                      				</DependentField>
                      				<DependentField>
                	        			<FieldId>К оплате</FieldId>
        	                			<SQL>select tobepayed from get_tobepayed_for_appmanip ({[ID]}, {{Услуга}})</SQL>
	                      			</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="String">
						<SQLReplacement>
						select 1 as "VALUE" from doctor where id = 0
						</SQLReplacement>
                    			</GeneratedStaticControl>
                    			<GeneratedStaticControl ID="Стоимость" ControlType="Number">
					<DependentFields>
                      				<DependentField>
                	        			<FieldId>К оплате</FieldId>
        	                			<SQL>select tobepayed from get_tobepayed_by_price ({[ID]}, {{Услуга}}, {{Стоимость}})</SQL>
	                      			</DependentField>
					</DependentFields>
                    			</GeneratedStaticControl>
                      			<GeneratedStaticControl ID="К оплате" ControlType="Number">
	                   		</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
            		</NewButton>

                  	<NewButton>
                  		<ButtonName>Комментарий</ButtonName>
                  		<ButtonIcon>comment24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>SCHEDULER_ADD_COMMENT</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Комментарий">
                  		<GeneratedStaticControls>
	                      		<GeneratedStaticControl ID="Комментарий" ControlType="String">
					<SQLReplacement>
						select comment3 as "VALUE"
						from appointment
						where id = ({[ID]})
					</SQLReplacement>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                	    	</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>

			<NewButton>
                  		<ButtonName>Вып./Опл. весь визит</ButtonName>
                  		<ButtonIcon>dopay24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>DO_AND_PAY_VISIT_2</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{5}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{12}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="6"><ColumnName>{4}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Вып./Опл. весь визит">
                			<GeneratedDataControls>
                  				<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    					<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
							<DataColumn>ID</DataColumn>
							<DisplayColumn>NAME</DisplayColumn>
							<SqlAddition>{0}</SqlAddition>
						</GeneratedDataControl>
			                        <GeneratedDataControl ID="Услуги и товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA, UNITS FROM GET_VISIT_CHECK ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>200</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        	<Column Id="UNITS"><Name>Кол-во единиц</Name></Column>
				                        </ColumnsMeta>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
	                  		<GeneratedStaticControls>
		                       		<GeneratedStaticControl ID="Общая сумма" ControlType="Number">
							<SQLReplacement>
								select summa as "VALUE"
								from CHECK_VISIT_TOBEPAYED ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Ранее оплачено" ControlType="Number">
							<SQLReplacement>
								select ALREADYPAYEDSUMMA as "VALUE"
								from GET_VISIT_PAYED_ALREADY ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Сумма с депозита" ControlType="Number">
						<DefaultValue>0</DefaultValue>
		                      		<DependentFields>
							<DependentField>
					                        <FieldId>К оплате</FieldId>
								<SQL>
									select first 1 
									(select summa from CHECK_VISIT_TOBEPAYED ({[ID]})) - 
									(select ALREADYPAYEDSUMMA from GET_VISIT_PAYED_ALREADY ({[ID]})) - 
									{{Сумма с депозита}} 
									as "VALUE" from RDB$RELATIONS
								</SQL>
                          				</DependentField>
		                      		</DependentFields>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="К оплате" ControlType="Number">
							<SQLReplacement>select first 1 
								(select summa from CHECK_VISIT_TOBEPAYED ({[ID]})) - 
								(select ALREADYPAYEDSUMMA from GET_VISIT_PAYED_ALREADY ({[ID]})) - 
								{{Сумма с депозита}} 
								as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
		                        		<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Клиент" ControlType="String">
							<SQLReplacement>
								select c.fio as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Тип карты" ControlType="String">
							<SQLReplacement>
								select ct.name as "VALUE"
								from client c, appointment a, cardtype ct
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
									and ct.id = c.cardtypeid
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Сумма накопл." ControlType="Number">
							<SQLReplacement>
								select manipulationsumma as "VALUE"
								from GET_CLIENT_MANIP_SUMMA_BY_APP ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Долг клиента" ControlType="Number">
							<SQLReplacement>
								select c.dolg as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Долг за курсы" ControlType="Number">
							<SQLReplacement>
				                                select iif (sum (co.summa - co.payment) is null, 0, sum (co.summa - co.payment)) as "VALUE"
								from client c, course co, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
									and co.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Депозит клиента" ControlType="Number">
							<SQLReplacement>
								select c.deposit as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Пробить чек" ControlType="Checkbox">
		                        		<DefaultValue>1</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Обяз. списание" ControlType="String">
							<SQLReplacement>
								select STATUSTEXT as "VALUE" from MMA_GET_VISIT_STATUS ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Остаток единиц" ControlType="String">
							<SQLReplacement>
								select first 1 unitsrest as "VALUE" from SUBSCRIPTION_GET_SUBSCR_FOR_APP ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                  			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>


                  	<NewButton>
                  		<ButtonName>Подтвердить</ButtonName>
                  		<ButtonIcon>confirm24.png</ButtonIcon>
		        	<LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        		<ProcedureName>APPOINTMENT_SUBMIT</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
				</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

                  	<NewButton>
                  		<ButtonName>Клиент пришел</ButtonName>
                  		<ButtonIcon>clienthere24.png</ButtonIcon>
	        		<LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        		<ProcedureName>APPOINTMENT_CLIENT_ENTERED</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
				</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

                  	<NewButton>
                  		<ButtonName>Отменить</ButtonName>
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	            	<ProcedureName>CANCEL_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				        </ProcedureParams>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>

                  	<NewButton>
                  		<ButtonName>Вернуть в предв. запись</ButtonName>
                  		<ButtonIcon>back24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	            	<ProcedureName>GETBACK_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				        </ProcedureParams>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>1</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>6</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>

                  	<NewButton>
				<DeletedAfterAction>true</DeletedAfterAction>
                  		<ButtonName>Удалить</ButtonName>
                  		<ButtonIcon>delete.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>DELETE_APPOINTMENT</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Удаление записи">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Причина" ControlType="String" />
                        			</GeneratedStaticControls>
                				<GeneratedDataControls>
                  					<GeneratedDataControl ID="Администратор" ControlType="LookUpEdit">
								<DefaultValue>AUTH_ID</DefaultValue>
                    						<DataSource>SELECT ID, LOGIN FROM EMPLOYEE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>LOGIN</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<ReadOnly>true</ReadOnly>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

              	  </NewButtons>


	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="APPOINTMENTMANIPULATION" Index="0">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                  	<NewButtons>
                  	<NewButton>
                  		<ButtonName>Изменить сумму</ButtonName>
                  		<ButtonIcon>cassa.bmp</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>APPOINTMENT_CHANGE_APPMANIP_SUM</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Изменить сумму">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Стоимость" ControlType="Number" />
                        			</GeneratedStaticControls>
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="К оплате" ControlType="Number" />
                        			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
	        	</NewButton>
                  	</NewButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="MATERIALSALE" Index="1">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="APPOINTMENTPAYMENT" Index="2">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME" Index="5">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAY" Index="3">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION" Index="4">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>

              
 	<FormSettings>
	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	 </LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONADDID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
		<ShowUpperColumn>SALOONNAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="DOCTORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="CITYID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="SALOONNAME" />
                 			<AdditionalColumn FieldName="URNAME" />
                 			<AdditionalColumn FieldName="CONTRACTNUMBER" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="CONTACTPERSONID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="LPRPERSONID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="COMMENT" />
               		</AdditionalColumns>
          	 </LookUpEditRelation>
    	</LookUpEditRelations>
	</FormSettings>

        	        </SchedulerSettings>
       	        </Item>

		<Item Caption="Расписание (таблица)" Icon="16workdays.png">
		  <DataSourceType>Table</DataSourceType>
		  <DataSource>APPOINTMENT</DataSource>
		  <DefaultButtons>
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
		  </DefaultButtons>
		  <CustomExcelExport>true</CustomExcelExport>
	              	  <NewButtons>
                			<NewButton>
	                  			<ButtonName>Создать архив</ButtonName>
                  				<ButtonIcon>16options.png</ButtonIcon>
                  				<LaunchProgram>
                    					<ProgAddress>..\Plugins\archive\createarchive.bat</ProgAddress>
                  				</LaunchProgram>
		                	</NewButton>
	              	  </NewButtons>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Red</Color><Value1>2</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>3</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGray</Color><Value1>4</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>Yellow</Color><Value1>5</Value1><Field>MANIPULATIONSTATUSID</Field></Colorizer>
		</Colorizers>
		</Item>


	<Item Caption="Мои клиенты" Icon="16client.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, DOCTOR, ISCLIENT, CLIENTSTATE, CITY, SALOONNAME, URNAME, CONTACTDATE, 
			CONTRACTNUMBER, CONTRACTDATE, CONTRACTFINISHDATE, CONTRACTCONTINUENUMBER,
			CONTRACTCONTINUEDATE, LPRPERSON, CONTACTPERSON, COMMENT, 
			REKLAMA, CLIENTSEGMENT, ISHOTSALE, LASTCONTACTDATE  
			from SCRM_GET_CLIENTS_BY_MANAGER</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="DOCTOR"><Name>Менеджер</Name></Column>
                		<Column Id="ISCLIENT"><Name>Клиент?</Name></Column>
                		<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                		<Column Id="CITY"><Name>Город</Name></Column>
                		<Column Id="SALOONNAME"><Name>Салон</Name></Column>
                		<Column Id="URNAME"><Name>Юр. название</Name></Column>
                		<Column Id="CONTACTDATE"><Name>Дата 1 контакта</Name></Column>
                		<Column Id="CONTRACTNUMBER"><Name>Номер 1-го договора</Name></Column>
                		<Column Id="CONTRACTDATE"><Name>Дата 1-го договора</Name></Column>
                		<Column Id="CONTRACTFINISHDATE"><Name>Дата окончания договора</Name></Column>
                		<Column Id="CONTRACTCONTINUENUMBER"><Name>Номер договора на продление</Name></Column>
                		<Column Id="CONTRACTCONTINUEDATE"><Name>Дата договора на продление</Name></Column>
                		<Column Id="LPRPERSON"><Name>ЛПР</Name></Column>
                		<Column Id="CONTACTPERSON"><Name>Контактное лицо</Name></Column>
                		<Column Id="COMMENT"><Name>Комментарий</Name></Column>
                		<Column Id="REKLAMA"><Name>Источник рекламы</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="LASTCONTACTDATE"><Name>Посл. контакт</Name></Column>
       	</ColumnsMeta>
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Добавить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{6}</ColumnName></ProcedureParam>
						<ProcedureParam Position="8"><ColumnName>{7}</ColumnName></ProcedureParam>
						<ProcedureParam Position="9"><ColumnName>{8}</ColumnName></ProcedureParam>
						<ProcedureParam Position="10"><ColumnName>{9}</ColumnName></ProcedureParam>
						<ProcedureParam Position="11"><ColumnName>{10}</ColumnName></ProcedureParam>
						<ProcedureParam Position="12"><ColumnName>{11}</ColumnName></ProcedureParam>
						<ProcedureParam Position="13"><ColumnName>{12}</ColumnName></ProcedureParam>
						<ProcedureParam Position="14"><ColumnName>{13}</ColumnName></ProcedureParam>
						<ProcedureParam Position="15"><ColumnName>{14}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Новый потенциальный клиент">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Город" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM CITY</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>1</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Должность" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM "POSITION"</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>7</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Источник рекламы" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM REKLAMA</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>11</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Тип 1-го контакта" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DICTFIRSTCONTACTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>15</VisibleIndex>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Название салона" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Юр лицо" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Фамилия" ControlType="String">
							<VisibleIndex>4</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Имя" ControlType="String">
							<VisibleIndex>5</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Отчество" ControlType="String">
							<VisibleIndex>6</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Моб телефон" ControlType="String">
							<VisibleIndex>8</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Раб телефон" ControlType="String">
							<VisibleIndex>9</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Мейл" ControlType="String">
							<VisibleIndex>10</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Дата 1 контакта" ControlType="DateTime"><VisibleIndex>12</VisibleIndex>
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Адрес" ControlType="String">
							<VisibleIndex>13</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>14</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>1</Value1><Field>ISHOTSALE</Field></Colorizer>
		</Colorizers>
	</Item>


		<Item Caption="Инструменты" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>INSTRUMENT</DataSource>
			<Colorizers>
				<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>6</Value1><Field>INSTRUMENTSTATUSID</Field></Colorizer>
			</Colorizers>
		</Item>


	<Item Caption="Все клиенты" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CLIENT</DataSource>
		<CustomExcelExport>true</CustomExcelExport>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>1</Value1><Field>ISHOTSALE</Field></Colorizer>
		</Colorizers>
	</Item>


		<Item Caption="Контактные лица" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>PERSON</DataSource>
		</Item>


	  </Items>
	</Pane>
      </Panes>


<TableEditorParts>



<TableEditorPart Table="KB">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="KBANSWER">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
				<NewButtons>
				<NewButton>
                  			<ButtonName>Отмодерировать</ButtonName>
                  			<ButtonIcon>16do.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_ANSWER_MODERATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Задать статус">
                        		<GeneratedDataControls>
					<GeneratedDataControl ID="Статус" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBSTATUS WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>	                    		
					</GeneratedDataControl>
					</GeneratedDataControls>
	            	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Принять</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>KB_ANSWER_ACCEPT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>
				<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Отклонить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>KB_ANSWER_DECLINE</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>
				</NewButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>
	
			<NewButtons>
				<NewButton>
                  			<ButtonName>Ответить</ButtonName>
                  			<ButtonIcon>16do.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_SET_ANSWER</ProcedureName>
        	            		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Ответить">
                        		<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Ответ" ControlType="String">
						<VisibleIndex>1</VisibleIndex>
                        		</GeneratedStaticControl>
					<GeneratedStaticControl ID="Дата добавления" ControlType="DateTime">
			                        <DefaultValue>NOW</DefaultValue>
						<ReadOnly>true</ReadOnly>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
			</NewButtons>
</TableEditorPart>

<TableEditorPart Table="KBANSWER">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>


<TableEditorPart Table="CLIENTWORK">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="CLIENT">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	<NewButtons>


                	<NewButton>
                  		<ButtonName>Коммент</ButtonName>
               			<ButtonIcon>16checkgreen.png</ButtonIcon>
				<ToolTip>Добавить комментарий в карточку клиента</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_ADD_COMMENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

                	<NewButton>
                  		<ButtonName>Рез. ИЗ</ButtonName>
               			<ButtonIcon>48telephone.png</ButtonIcon>
				<ToolTip>Исходящий звонок по телефону или скайп, когда дозвонились</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_OUTCALL_SUCCESS</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>1</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE (ID = 3) OR (ID = 7)</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>3</VisibleIndex>
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

                	<NewButton>
                  		<ButtonName>Недозвон</ButtonName>
               			<ButtonIcon>cancel24.png</ButtonIcon>
				<ToolTip>Исходящий звонок по телефону или скайп, когда не удалось поговорить с абонентом</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_OUTCALL_REJECT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>1</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE (ID = 3) OR (ID = 7)</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Причина недозвона" ControlType="Grid">
						<VisibleIndex>3</VisibleIndex>
                      				<DataSource>SELECT ID, NAME FROM DICTDEALINGREASON WHERE ID > 0</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="NAME"><Name>Причина недозвона</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>4</VisibleIndex>
						<SQLReplacement>select first 1 '.' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>


                	<NewButton>
                  		<ButtonName>Контакт</ButtonName>
               			<ButtonIcon>16phoneok.png</ButtonIcon>
				<ToolTip>Добавить контакт с клиентом, все кроме исходящих звонков</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_ADD</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="7"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="8"><ConstantValue>0</ConstantValue></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE ID != 1 AND ID != 3 AND ID != 7</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>3</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>4</VisibleIndex>
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
              			
				<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Горячая рекомендация</ButtonName>
					<ToolTip>Клиент изначально настроен покупать у нас. Задача не завалить презентацию и продать как можно больший пакет.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_HOT_RECOMMEND_ON</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
                         		<ButtonName>---АКТИВНОСТЬ----------------</ButtonName>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Презентовать БС</ButtonName>
					<ToolTip>Создать вручную себе задачу "Презентация БС". Нужно для замера твоей активности по презентациям.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD_PRESENT_BS</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Повторный контакт по продаже БС</ButtonName>
					<ToolTip>Создать вручную себе задачу "Повторный контакт по продаже БС". Нужно чтобы не забыть связаться и завершить продажу.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD_PRESENT_BS_MORE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Предложить беспл. интенсив</ButtonName>
					<ToolTip>Для того, чтобы клиент начал пользоваться всеми возможностями и делал дальнейшие покупки.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_FREE_I_PRESENT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="ЛПР согласен?" ControlType="Checkbox" />
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Предложить беспл. И. повторно</ButtonName>
					<ToolTip>Для того, чтобы клиент начал пользоваться всеми возможностями и делал дальнейшие покупки.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_FREE_I_PRES_2</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="ЛПР согласен?" ControlType="Checkbox" />
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>

<!--
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Исх звонок ЛПР по новинкам</ButtonName>
					<ToolTip>Исходящий звонок ЛПР (личная инициатива менеджера) для допродажи новинок и некупленных модулей</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CONTACT_OUT_LPR</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>40030</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Тема конс-тации" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
-->

              			<NewButton>
                         		<ButtonName>---ПРОДАЖА-----------------------</ButtonName>
                             	</NewButton>

			<NewButton>
		              	<ButtonName>Продать товар</ButtonName>
              			<ButtonIcon>16materialsale.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>SCRM_ADD_MATERIAL_SALE</ProcedureName>
                		<ProcedureParams>
                  			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
			                <ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Продажа товара">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
					<VisibleIndex>1</VisibleIndex>
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>SELECT PRICE FROM SCRM_GET_PRICE_BY_MATERIAL ({[ID]}, {{Товар}})</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select first 1 {{Цена}} - {{Скидка}} as "VALUE" from RDB$RELATIONS</SQL>
                        	  		</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
					<VisibleIndex>3</VisibleIndex>
                      			<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                        	<GeneratedStaticControl ID="Цена" ControlType="Number">
					<VisibleIndex>4</VisibleIndex>
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Скидка" ControlType="Number">
					<VisibleIndex>5</VisibleIndex>
					<DefaultValue>0</DefaultValue>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select first 1 {{Цена}} - {{Скидка}} as "VALUE" from RDB$RELATIONS</SQL>
                        	  		</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена со скидкой" ControlType="Number">
					<VisibleIndex>6</VisibleIndex>
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                      		<GeneratedStaticControl ID="Дата продажи" ControlType="DateTime">
					<VisibleIndex>2</VisibleIndex>
		                       	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Получить первую оплату</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_GET_FIRST_PAY</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>3</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String">
							<VisibleIndex>1</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата договора" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Продлить договор</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_CONT_CONTRACT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>3</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String">
							<VisibleIndex>1</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата договора" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Запланировать допродажу</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SALE_MORE_PLAN</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Начать допродажу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата счета" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Товары" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Получить оплату за допродажу</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_PAY_SALE_MORE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>2</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата оплаты" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                	<NewButton>
                  		<ButtonName>Сменить менеджера</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_MANAGER</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Смена менеджера">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>SHORTFIO</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

              			<NewButton>
                         		<ButtonName>---ОТКАЗЫ----------------------------</ButtonName>
                             	</NewButton>

<!--
                	<NewButton>
                  		<ButtonName>Отказ</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Отказ" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM CLIENT_GET_AVAIL_CANCEL_STATE ({[ID]})</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
-->
                	<NewButton>
                  		<ButtonName>Отказ от первой покупки</ButtonName>
				<ToolTip>Отказ потенциального клиента от покупки программы</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_POT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="К кому ушел?" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTCOMPETITOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>3</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ уже клиента</ButtonName>
				<ToolTip>Уже клиент ушел перестал пользоваться программой</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_CLIENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="К кому ушел?" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTCOMPETITOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>3</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ продлить</ButtonName>
				<ToolTip>Клиент работает в программе, но не хочет продлять</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_PROLONG</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID IN (0, 1,2,3)</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
              			<NewButton>
                         		<ButtonName>---ОБСЛУЖИВАНИЕ------------------</ButtonName>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Создать задачу</ButtonName>
					<ToolTip>Создать задачу вручную</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40010</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Создать задачу вручную">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Сотрудник" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Выполнить" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Задача" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Треб. акт сдачи?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Обновить</ButtonName>
					<ToolTip>Этому клиенту мной было установлено обновление, на все компьютеры, с сендером</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SOFT_UPDATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Установлена версия">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Версия ПО" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSSVERSION WHERE ID >= 9 AND ID != 1000</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Инд версия?" ControlType="Checkbox">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
								<NewButton>
								<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Создать заявку</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
									<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
									<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
									<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
									<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		</ProcedureParams>
               		                <ParamForm ID="Новая заявка">
									<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Отв.сотр." ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Папка" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
									<GeneratedStaticControl ID="Дедлайн" ControlType="DateTime">
			                        <VisibleIndex>4</VisibleIndex>
									</GeneratedStaticControl>
									<GeneratedStaticControl ID="Время МС(мин)" ControlType="Number">
							<VisibleIndex>5</VisibleIndex>
                        			</GeneratedStaticControl>
									</GeneratedStaticControls>
	                      			</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Техподдержка</ButtonName>
					<ToolTip>Этому клиенту мной была оказана техподдержка, достаточно значимая, поэтому я хочу внести в базу</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SUPPORT_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40020</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Оказана техподдержка">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Тип задачи" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSUPPORTTYPE</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Вопрос клиента" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Что сделано" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Вопрос решен?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Техподдержка внерабочее</ButtonName>
					<ToolTip>Этому клиенту мной была оказана техподдержка во время моего дежурства в вечернее время и/или выходной день</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SUPPORT_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40025</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Оказана техподдержка">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Тип задачи" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSUPPORTTYPE</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Вопрос клиента" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Что сделано" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Вопрос решен?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Бизнес-консультация</ButtonName>
					<ToolTip>Проведена консультация ЛПР по ведению бизнеса по входящему от ЛПР (не техподдержка!, не администраторы!)</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD_CONSULT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Повторное обучение 1 час</ButtonName>
					<ToolTip>Проведено повторное обучение 1 час. Если было 2 часа, нужно нажать 2 раза. Если платное, то дополнительно нужно продать товар "Платное обучение"</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD_TRAINING</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ConstantValue>60</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
<!--
                	<NewButton>
                  		<ButtonName>Сменить менеджера по сопр.</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_MANAGER_SUPPORT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Смена менеджера">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 AND POSITIONID = 11</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>SHORTFIO</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
-->
<!--
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Входящий контакт от ЛПР</ButtonName>
					<ToolTip>Проведена консультация ЛПР по ведению бизнеса (не техподдержка!), предложены новинки и некупленные модули</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CONTACT_IN_LPR</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>40040</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
-->        
	      			<NewButton>
                         		<ButtonName>---ДОКУМЕНТЫ---------------------</ButtonName>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Выставить счет</ButtonName>
					<ToolTip>Выставить счет на все неоплаченные продажи товаров</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_INVOICE</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_invoice.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать договор на покупку</ButtonName>
					<ToolTip>Создать договор на покупку Sycret Saloon в соответствие с выставленным счетом</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_contract.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать договор на продление</ButtonName>
					<ToolTip>Создать договор на продление обслуживания в соответствие с выставленным счетом</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_contract_prolong.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать акт сдачи/приемки</ButtonName>
					<ToolTip>Создать акт сдачи/приемки в соответствие с договором</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_act.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
	</NewButtons>


	<ForeignKeyRelations>


        	<ForeignKeyRelation ChildTable="SERVICE" Index="0">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Презентовать</ButtonName>
				<ToolTip>Показал ЛПРу презентацию сервиса, объяснил выгоды, зафиксировал интерес. Можно делать презентацию несколько раз.</ToolTip> 
              			<ButtonIcon>16paygreen.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_PRESENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Презентовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Будет брать?" ControlType="Checkbox" />
	                      			<GeneratedStaticControl ID="Коммент" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Подключить</ButtonName>
				<ToolTip>Пошел отсчет платного использования, зафиксировал дату отключения</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_START</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Подключить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата запуска" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Оплачено до" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Коммент" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Продлить</ButtonName>
				<ToolTip>Продлил сервис, зафиксировал новую дату отключения</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_PROLONG</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Продлить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата отключения" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Коммент" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ от сервиса</ButtonName>
				<ToolTip>Клиент отказался продлить сервис. Указал причину</ToolTip> 
               			<ButtonIcon>cancel24.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SERVICE_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Отказ">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Причина" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>


        	<ForeignKeyRelation ChildTable="INSTRUMENT" Index="7">
			<Colorizers>
				<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>6</Value1><Field>INSTRUMENT.INSTRUMENTSTATUSID</Field></Colorizer>
			</Colorizers>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Презентовать</ButtonName>
				<ToolTip>Показал ЛПРу И., объяснил выгоды. 
Зафиксируем интерес ЛПР к этому И.</ToolTip> 
               			<ButtonIcon>16paygreen.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_PRESENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Презентовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Будет внедрять?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Стартовать</ButtonName>
				<ToolTip>ЛПР приступил к запуску этого И.</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_START</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Стартовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Завершить</ButtonName>
				<ToolTip>Этот И. запущен успешно, переходим к запуску следующего. 
Или не получилось запустить и пока что этим И. перестаем заниматься...</ToolTip> 
               			<ButtonIcon>cancel24.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_FINISH</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Завершить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Успешно?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Указать прогресс</ButtonName>
				<ToolTip>Есть ли существенные улучшения с прошлого раза по данному И.?</ToolTip> 
               			<ButtonIcon>confirm24.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_SET_PROGRESS</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Указать прогресс">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Есть прогресс?" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM INSTRUMENTPROGRESS WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Поставить оценку</ButtonName>
				<ToolTip>Оценку берем из отчета Контроль дисциплины, оценка м.б. дробной</ToolTip> 
               			<ButtonIcon>green1graph128.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_SET_MARK</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Поставить оценку">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Оценка" ControlType="Number" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="PERSON" Index="3">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Указать как ЛПР</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_PLRPERSON</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Указать как ответственное лицо</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_CONTACTPERSON</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>
			<!-- by Andrey -->
			<ForeignKeyRelation ChildTable="SUPPORTTASK" Index="9">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
              		<NewButtons>
              											
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Одобрить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_ACCEPT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Одобрить">
									<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Отв.сотр." ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
								<GeneratedDataControl ID="Стоимость" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM PRICETASK</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>3</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        	</ParamForm>
		            		</LaunchBaseProcedure>
						</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Принять в разработку</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_IN_DEVELOP</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
								</ProcedureParams>
               		        </LaunchBaseProcedure>
					 	</NewButton>
                	<NewButton>
                  		<ButtonName>Передать в тестирование</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_TESTING</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Передать в тестирование">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Папка" ControlType="String">
								<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
					<GeneratedStaticControl ID="Комментарий" ControlType="String">
					<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
						<VisibleIndex>3</VisibleIndex>
					</GeneratedStaticControl>
					<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>4</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Установлено клиенту</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_RELEASE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
									<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
								</ProcedureParams>
								<ParamForm ID="Установлено клиенту">
								<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Время МС" ControlType="Number">
								<VisibleIndex>2</VisibleIndex>
								</GeneratedStaticControl>
							</GeneratedStaticControls>
							</ParamForm>
               		        </LaunchBaseProcedure>
					 	</NewButton>
					
					<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Закрыта</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_CLOSE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
								</ProcedureParams>
               		        </LaunchBaseProcedure>
					 	</NewButton>
					
					<NewButton>
                  		<ButtonName>Отменена</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
								<VisibleIndex>2</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>3</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
                  		<ButtonName>Нет данных</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_NO_DATA</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
							<VisibleIndex>2</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>3</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
                  		<ButtonName>Вернуть в разработку</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_RETURN</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Вернуть в разработку">
									<GeneratedDataControls>
									<GeneratedDataControl ID="Сотрудник" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>	
								</GeneratedDataControls>
								<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
								<VisibleIndex>3</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время МС" ControlType="Number">
								<VisibleIndex>4</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
						</ParamForm>		
		            	</LaunchBaseProcedure>
                	</NewButton>
           		</NewButtons>
        	</ForeignKeyRelation>
				
			<!--end Andrey-->
        	<ForeignKeyRelation ChildTable="CLIENTWORK" Index="1">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ от допродажи</ButtonName>
				<ToolTip>Была запланирована допродажа, но клиент в конце концов отказался</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_WORK_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 'Почему отказался?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
           		</NewButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="MATERIALSALE" Index="4">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="APPOINTMENT" Index="5">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="INVOICE" Index="6">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="CLIENTCONTACT" Index="2">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

	</ForeignKeyRelations>

</TableEditorPart>

<TableEditorPart Table="APPOINTMENT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>

	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="APPOINTMENTMANIPULATION">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="APPOINTMENTPAYMENT">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>



<Comment>Grid instead of lookupedit</Comment>
	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONADDID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
		<ShowUpperColumn>FIO2</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="FIO2" />
                 			<AdditionalColumn FieldName="SURNAME" />
                 			<AdditionalColumn FieldName="NAME" />
                 			<AdditionalColumn FieldName="SECONDNAME" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="HOMEPHONE" />
                 			<AdditionalColumn FieldName="CARDNUMBER" />
                 			<AdditionalColumn FieldName="CARDTYPEID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="DOLG" />
                 			<AdditionalColumn FieldName="DEPOSIT" />
                 			<AdditionalColumn FieldName="ISINBLACKLIST" />
                 			<AdditionalColumn FieldName="COMMENT2" />
                 			<AdditionalColumn FieldName="ISACTIVE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
    	</LookUpEditRelations>

</TableEditorPart>


<TableEditorPart Table="APPOINTMENTMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION" Index="0">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAY" Index="1">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME" Index="2">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>

	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
    	</LookUpEditRelations>

</TableEditorPart>


<TableEditorPart Table="MATERIALSALE">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE" />
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="PRICE" />
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           <LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
			<ShowUpperColumn>FIO2</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="FIO2" />
                 			<AdditionalColumn FieldName="SURNAME" />
                 			<AdditionalColumn FieldName="NAME" />
                 			<AdditionalColumn FieldName="SECONDNAME" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="HOMEPHONE" />
                 			<AdditionalColumn FieldName="CARDNUMBER" />
                 			<AdditionalColumn FieldName="CARDTYPEID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="DOLG" />
                 			<AdditionalColumn FieldName="DEPOSIT" />
               		</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>

	<NewButtons>
	</NewButtons>

</TableEditorPart>


<TableEditorPart Table="STOREINCOMEMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>

</TableEditorPart>

<TableEditorPart Table="STOREMOVEMENTMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTCOMEMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTLAY">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTLAYADDITION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="MATERIALSALEDOCTOR">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="MANIPULATIONMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREINCOME">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
				<KeyButton>N</KeyButton>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_INCOME_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар прихода">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SIID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
	                      			<DependentField>
        	                			<FieldId>Себестоимость</FieldId>
                	    				<SQL>select price0 from GET_MATERIAL_PRICE0 ({{Товар}})</SQL>
                      				</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                    			<GeneratedStaticControl ID="Себестоимость" ControlType="Number" />
                    			<GeneratedStaticControl ID="Ставка НДС" ControlType="Number" />
                      			<GeneratedStaticControl ID="За всю партию" ControlType="Checkbox" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeincome.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Печать этикеток</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-1 -{0}</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Печать ценников</ButtonName>
                  		<ButtonIcon>16checkgreen.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\labels.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREINCOMEMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	<NewButtons>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-0 -{0}</ProgParam>
                    			<ColumnName>STOREINCOMEMATERIAL.ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>



	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="STOREMOVEMENT">
		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_MOVEMENT_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар перемещения">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
                      			<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SMID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
                      			</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storemovement.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREMOVEMENTMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="STOREOUTCOME">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_OUTCOME_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар списания">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SOID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeoutcome.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREOUTCOMEMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DICTCOURSEMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="COURSE">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
               		<NewButtons>
                		<NewButton>
                  			<ButtonName>Оплатить курс</ButtonName>
                  			<ButtonIcon>cassa24.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>COURSE_ADD_PAYMENT</ProcedureName>
	           			<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
	                    		<ParamForm ID="Оплата курса услуг">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="К оплате" ControlType="String">
							<SQLReplacement>select summa - payment as "VALUE" from course where id = {[ID]}</SQLReplacement>
							<ReadOnly>true</ReadOnly>
		       	              			<DependentFields>
								<DependentField>
        	        	        				<FieldId>Оплата</FieldId>
                	        					<SQL>cast('{{К оплате}}' as decimal(15,2))</SQL>
                      						</DependentField>
							</DependentFields>
        	               			</GeneratedStaticControl>
						<GeneratedStaticControl ID="Оплата" ControlType="Number">
                        			</GeneratedStaticControl>
        	              			<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>COURSE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
               		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="COURSEMANIPULATION"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="COURSEPAYMENT"> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="COURSEMANIPULATION">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="COURSEPAYMENT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="MANIPULATION">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="MANIPULATIONMATERIAL" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONPERCENT" Index="1"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONMATERIALADD" Index="2"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="MATERIAL">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREINCOMEMATERIAL" Index="0"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
		<NewButtons>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-0 -{0}</ProgParam>
                    			<ColumnName>STOREINCOMEMATERIAL.ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MATERIALSALE"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MATERIALSALEDOCTOR"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREMOVEMENTMATERIAL"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTCOMEMATERIAL"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTLAY"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DEPOSIT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="DEPARTMENT">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DOCTOR" Index="0"> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONGROUP" Index="1"> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="APPOINTMENT" Index="2"> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DICTCOURSE">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить услугу</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_DICTCOUSEMANIPULATION</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Услуга курса">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.NAME, m.PRICE, m.CODE, mg.NAME, mg2.NAME, mg3.NAME
					FROM manipulation m, manipulationgroup mg, manipulationgroup2 mg2, manipulationgroup3 mg3 
					where 
						m.manipulationgroupid = mg.id
						and m.manipulationgroupid2 = mg2.id
						and m.manipulationgroupid3 = mg3.id
						and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Стоим. 1 услуги" ControlType="Number" />
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations>
        <ForeignKeyRelation ChildTable="DICTCOURSEMANIPULATION">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="MATERIALOUTLAYSTANDARD">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE" />
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="PRICE" />
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="SUBSCRIPTION">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONVISIT" Index="0"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONMANIP" Index="1"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONFREEZE" Index="2"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONPROLONG" Index="3"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="ACTIONS">
		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 1</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_1</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 1">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 2</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_2</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 2">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP2</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 3</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_3</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 3">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP3</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="ACTIONMANIPULATION"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 


	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="ACTIONMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="INVENTORY">


		<NewButtons>
			<NewButton>
		              	<ButtonName>Сформировать приход</ButtonName>
              			<ButtonIcon>16storeincome.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_GEN_STOREINCOME</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                		</ProcedureParams>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Сформировать списание</ButtonName>
              			<ButtonIcon>16storeoutcome.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_GEN_STOREOUTCOME</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                		</ProcedureParams>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INVENTORYMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
			<NewButton>
		              	<ButtonName>Фактический остаток</ButtonName>
              			<ButtonIcon>16store.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_SET_REAL_AMOUNT</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>INVENTORYMATERIAL.ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Фактический остаток">
				<GeneratedDataControls>
	                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
        	              			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                	      			<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
	               				<SqlAddition>{0}</SqlAddition>
        	            		</GeneratedDataControl>
				</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Факт. остаток" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="CARDTYPE">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DISCOUNTMANIPULATION" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DISCOUNT" Index="1"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DISCOUNTMATERIAL" Index="2"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DEPOSITBONUS" Index="3"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="DISCOUNTMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSE">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INDCOURSEVISIT" Index="0"> 
		<DefaultButtons>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="INDCOURSEPAYMENT" Index="1"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
			<NewButtons>
			<NewButton>
                  		<ButtonName>Чек (по оплатам)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Печать чека (квитанции)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcheckpay.xml -1 -1</ProgParam>
                    				<ColumnName>INDCOURSEPAYMENT.ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			</NewButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
		<NewButtons>
                	<NewButton>
                  		<ButtonName>На печать врачу</ButtonName>
                  		<ButtonIcon>icon.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcourse.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>На печать клиенту</ButtonName>
                  		<ButtonIcon>icon.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcourse_forclient.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
			<NewButton>
                  		<ButtonName>Оплатить программу</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_PAY</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Вид оплаты">
                			<GeneratedDataControls>
                  				<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    					<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
							<DataColumn>ID</DataColumn>
							<DisplayColumn>NAME</DisplayColumn>
							<SqlAddition>{0}</SqlAddition>
						</GeneratedDataControl>
					</GeneratedDataControls>
	                  		<GeneratedStaticControls>
		                       		<GeneratedStaticControl ID="Инд. программа" ControlType="String">
							<SQLReplacement>
								select name as "VALUE"
								from indcourse
								where id = {[ID]}
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Сумма" ControlType="String">
							<SQLReplacement>
								select dolg as "VALUE"
								from indcourse
								where id = {[ID]}
							</SQLReplacement>
							<ReadOnly>false</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
		                        		<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Основание платежа" ControlType="String" />
                  			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
			        </NewButton>
			<NewButton>
                  		<ButtonName>Чек (общий)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Печать чека (квитанции)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcheck.xml -1 -1</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Отменить оплату</ButtonName>
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_DELETE_PAY</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
			        </NewButton>
		</NewButtons>
</TableEditorPart>


<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSEVISIT">

		<NewButtons>
			<NewButton>
                  		<ButtonName>Зачесть услугу</ButtonName>
				<ToolTip>Добавить уже оказанную ранее услугу и зачесть ее оплату</ToolTip> 
                  		<ButtonIcon>new.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_ADD_DONE_MANIP</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Выбор услуги">
		             		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
					SELECT ID, OPERATIONDATE, NAME, TOBEPAYED, CODE, NAME1, NAME2, NAME3
					FROM INDCOURSE_GET_DONE_MANIPLIST ('{[ID]}')
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="TOBEPAYED"><Name>Сумма к оплате</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
	                    		</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INDCOURSEMANIPULATION" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSEMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<Comment>SMS start 2011-09-15</Comment>
<TableEditorPart Table="SMSGROUP">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
	             	<NewButton>
                  		<ButtonName>Удалить</ButtonName>
                  		<ButtonIcon>delete.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_DELETE_GROUP</ProcedureName>
	           		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
			<NewButton>
                  		<ButtonName>Добавить всех клиентов</ButtonName>
				<ToolTip>Добавить всех клиентов с номерами телефонов</ToolTip> 
                  		<ButtonIcon>16specs.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_ADD_ALL_CLIENTS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Добавить одного клиента</ButtonName>
				<ToolTip>Добавить всех клиентов с номерами телефонов</ToolTip> 
                  		<ButtonIcon>16clientok.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_ADD_CLIENT</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ConstantValue>0</ConstantValue></ProcedureParam>
				</ProcedureParams>
               		                <ParamForm ID="Выбор клиента">
                			<GeneratedDataControls>
	                    		<GeneratedDataControl ID="Клиент" ControlType="Grid">
        	              			<DataSource>SELECT ID, CARDNUMBER, SURNAME, NAME, SECONDNAME, CELLPHONE, FIO2 FROM CLIENT</DataSource>
        	              			<DataColumn>ID</DataColumn>
                	      			<DisplayColumn>FIO2</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                      			<NullString>0</NullString>
						<ColumnsMeta>
							<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
							<Column Id="SURNAME"><Name>Фамилия</Name></Column>
							<Column Id="NAME"><Name>Имя</Name></Column>
							<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
							<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
							<Column Id="FIO2"><Name>Клиент</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Отменить рассылку</ButtonName>
				<ToolTip>Отменить / остановить рассылку</ToolTip> 
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_SET_STATUS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ConstantValue>4</ConstantValue></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Активировать рассылку</ButtonName>
				<ToolTip>Активировать ранее отмененную рассылку</ToolTip> 
                  		<ButtonIcon>16do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_SET_STATUS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ConstantValue>1</ConstantValue></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="SMSGROUPCLIENT" Index="0"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>
<Comment>SMS finish</Comment>


<TableEditorPart Table="MEDRECORD">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
                  	<NewButton>
				<DeletedAfterAction>true</DeletedAfterAction>
                  		<ButtonName>Подписать</ButtonName>
                  		<ButtonIcon>do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>MED_RECORD_SUBSCRIBE</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Удаление записи">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Личный ключ" ControlType="String" />
                        			</GeneratedStaticControls>
                				<GeneratedDataControls>
                  					<GeneratedDataControl ID="Администратор" ControlType="LookUpEdit">
								<DefaultValue>AUTH_ID</DefaultValue>
                    						<DataSource>SELECT ID, LOGIN FROM EMPLOYEE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>LOGIN</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<ReadOnly>true</ReadOnly>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

			</NewButton>
		</NewButtons>
</TableEditorPart>

<TableEditorPart Table="MEDRECORDCONTENT">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
</TableEditorPart>


<TableEditorPart Table="DOCTOR">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="MATERIALSALEDOCTOR"> 
	<DefaultButtons>
        	<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="CERTIFICATESALE">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CERTIFICATE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
</TableEditorPart>


<TableEditorPart Table="DICTSALARYPROGRESS">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DICTSALARYPROGRESSDETAIL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DICTSALARYPROGRESSSALE"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="DICTSUBSCRIPTION">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DICTSUBSCRIPTIONDOW"> 
	<DefaultButtons>
        	<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DICTSUBSCRIPTIONMANIP"> 
	<DefaultButtons>
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="DICTSUBSCRIPTIONDOW">
	<DefaultButtons>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="CLIENTCONTACT">
	<DefaultButtons>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

</TableEditorParts>

    </Role>

<Comment>**********************************************************************************************************</Comment>

    <Role id="3">
      <Panes>


	<Pane Caption="База знаний" Type="List">
         <Items>
               <Item Caption="База знаний" Icon="company.png">
               <DataSourceType>Query</DataSourceType>
               <DataSource>select ID, QUESTION, KBGROUP, KBGROUP2, KBGROUP3, QUESTIONDATE, QUESTIONDOCTOR, ANSWER, ANSWERDATE, KBSTATUS, ANSWERDOCTOR
			from KBASE</DataSource>
			   <DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
					<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
				<ColumnsMeta>
						<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="QUESTION"><Name>Вопрос</Name></Column>
                		<Column Id="KBGROUP"><Name>Группа 1</Name></Column>
                		<Column Id="KBGROUP2"><Name>Группа 2</Name></Column>
                		<Column Id="KBGROUP3"><Name>Группа 3</Name></Column>
                		<Column Id="QUESTIONDATE"><Name>Дата вопроса</Name></Column>
                		<Column Id="QUESTIONDOCTOR"><Name>Автор вопроса</Name></Column>
                		<Column Id="ANSWER"><Name>Ответ</Name></Column>
                		<Column Id="ANSWERDATE"><Name>Дата ответа</Name></Column>
                		<Column Id="KBSTATUS"><Name>Статус</Name></Column>
                		<Column Id="ANSWERDOCTOR"><Name>Автор ответа</Name></Column>
		       	</ColumnsMeta>
					<NewButtons>
	               			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Задать вопрос</ButtonName>
					<ToolTip>Есть вопрос? Здесть Поищи! Не нашёл? Напиши!</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_ADD_QUEST</ProcedureName>
        	            		<ProcedureParams>
	                    <ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Добавление вопроса">

                        		<GeneratedStaticControls>
									<GeneratedStaticControl ID="Вопрос" ControlType="String">
										<VisibleIndex>1</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата добавления" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
										<VisibleIndex>2</VisibleIndex>
										<ReadOnly>true</ReadOnly>
									</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
								
								<GeneratedDataControls>
								<GeneratedDataControl ID="Группа 1" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>3</VisibleIndex>	                    		
								</GeneratedDataControl>
								<GeneratedDataControl ID="Группа 2" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP2 WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>4</VisibleIndex>	                    		
								</GeneratedDataControl>
								<GeneratedDataControl ID="Группа 3" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBGROUP3 WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
									<VisibleIndex>5</VisibleIndex>	                    		
								</GeneratedDataControl>
								</GeneratedDataControls>
								
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              		</NewButtons>

		<EditorOpen>
			<Column>ID</Column>
			<Table>KB</Table>
		</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>Новый вопрос</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightGreen</Color><Value1>Есть ответ</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>На модерации</Value1><Field>KBSTATUS</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>Отклонён</Value1><Field>KBSTATUS</Field></Colorizer>
		</Colorizers>
	</Item>
        </Items>
        </Pane>

	<Pane Caption="МП" Type="List">
	  <Items>
	<Item Caption="Личные продажи - Динамика по месяцам" Icon="purple1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select PARAMNAME, PARAMVALUE FROM REPORT_DYN ('{0}', 'SCRM_MS_REPORT_INCOME_KPI', 'SELFMANIPSUMMA')</DataSource>
                <ParamForm ID="Период">
                		<ParentType>NewType</ParentType>
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Год" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM YEARS</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
				</GeneratedDataControls>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="PARAMNAME"><Name>Месяц</Name></Column>
                	<Column Id="PARAMVALUE"><Name>Значение</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>0</DiagramType>
	                <NameColumn>PARAMNAME</NameColumn>
        	        <HiddenColumns>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="МП - Зарплата" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, operationdate, clientname, manipulationname, amount, tobepayed, SELFMANIPSUMMA, STRPERCENT, income
			from SCRM_MS_REPORT_INCOME_KPI ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                	<Column Id="MANIPULATIONNAME"><Name>Услуга</Name></Column>
                	<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                	<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="TOBEPAYED"><Name>К оплате</Name></Column>
                	<Column Id="INCOME"><Name>Зарплата</Name></Column>
                	<Column Id="SELFMANIPSUMMA"><Name>Сумма личных продаж</Name></Column>
                	<Column Id="STRPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="МП - KPI - Сводный" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, doctorname, KPINAME, KPIDESCRIPTION, KPIVALUE, MARKDESCRIPTION, MARK, SALARY
			from KPI_SALARY ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="KPINAME"><Name>Показатель</Name></Column>
                	<Column Id="KPIDESCRIPTION"><Name>Описание</Name></Column>
                	<Column Id="KPIVALUE"><Name>Значение</Name></Column>
                	<Column Id="MARKDESCRIPTION"><Name>Описание оценки</Name></Column>
                	<Column Id="MARK"><Name>Оценка</Name></Column>
                	<Column Id="SALARY"><Name>Зарплата</Name></Column>
       		</ColumnsMeta>
	</Item>


	<Item Caption="МП - KPI - Активность" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select doctorname, PRIORITY, ACTIVITYNAME, WEIGHT, PLANNEDAMOUNT, PLANNEDSALEAMOUNT, 
			PLANNEDTOTAL, DONEAMOUNT, DONETOTAL, DESCRIPTION
			from KPI_ACTIVITY ('{0}', '{1}', 1)</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                	<Column Id="PRIORITY"><Name>Приоритет</Name></Column>
                	<Column Id="ACTIVITYNAME"><Name>Показатель</Name></Column>
                	<Column Id="WEIGHT"><Name>Вес</Name></Column>
                	<Column Id="PLANNEDAMOUNT"><Name>План. кол-во</Name></Column>
                	<Column Id="PLANNEDSALEAMOUNT"><Name>План. кол-во продаж</Name></Column>
                	<Column Id="PLANNEDTOTAL"><Name>План. сумма</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Сделано кол-во</Name></Column>
                	<Column Id="DONETOTAL"><Name>Сделано сумма</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
	</Item>

	<Item Caption="МП - KPI - Дисциплина" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENT, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from KK_MANAGER_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Показатель</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>

<!--!!!!-->


	<Item Caption="Воронка продаж диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_DONE ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка отказов диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_REJECT ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка возможностей диаграмма" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select CLIENTSTATE, CLIENTAMOUNT
			from SCRM_FUNNEL_AVAILABLE ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                	<Column Id="CLIENTAMOUNT"><Name>Кол-во</Name></Column>
                	<Column Id="STRCLIENTPERCENT"><Name>Процент</Name></Column>
       		</ColumnsMeta>
		<OpenDiagram>
                	<DiagramType>3</DiagramType>
	                <NameColumn>CLIENTSTATE</NameColumn>
        	        <HiddenColumns>
		                <NameColumn>STRCLIENTSTATE</NameColumn>
        	        </HiddenColumns>
              	</OpenDiagram>
	</Item>

	<Item Caption="Воронка сводный" Icon="red1graph128.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select STATENAME, DONEAMOUNT, STRDONEPERCENT, REJECTAMOUNT, STRREJECTPERCENT, AVAILABLEAMOUNT, STRAVAILABLEPERCENT, DESCRIPTION
			from SCRM_FUNNEL_COMMON ('{0}', '{1}', 1)</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                	<Column Id="STATENAME"><Name>Состояние</Name></Column>
                	<Column Id="DONEAMOUNT"><Name>Выполнено</Name></Column>
                	<Column Id="STRDONEPERCENT"><Name>Выполнено, %</Name></Column>
                	<Column Id="REJECTAMOUNT"><Name>Отказов</Name></Column>
                	<Column Id="STRREJECTPERCENT"><Name>Отказов, %</Name></Column>
                	<Column Id="AVAILABLEAMOUNT"><Name>Выполнить</Name></Column>
                	<Column Id="STRAVAILABLEPERCENT"><Name>Выполнить, %</Name></Column>
                	<Column Id="DESCRIPTION"><Name>Описание</Name></Column>
       		</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>Всего</Value1><Field>STATENAME</Field></Colorizer>
		</Colorizers>
	</Item>


	  </Items>
	</Pane>


	<Pane Caption="Контроль дисциплины" Type="List">
	  <Items>

	<Item Caption="План работ на сегодня" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="План работ - просрочены" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_EXPIRED</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
           		</NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="План работ скоро" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEPLAN, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISHOTSALE, CLIENTWORKCOLORSTATUSID, CLIENTWORKCOLORSTATUS
			from KK_CLIENTWORK_SOON</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEPLAN"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUS"><Name>Цветовой статус</Name></Column>
                		<Column Id="CLIENTWORKCOLORSTATUSID"><Name>Цветовой статус ID</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENTWORK</Table>
	</EditorOpen>
              			<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			</NewButtons>
		<Colorizers>
			<Colorizer Type="Equal"><Color>White</Color><Value1>1</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>2</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightYellow</Color><Value1>3</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightPink</Color><Value1>4</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>5</Value1><Field>CLIENTWORKCOLORSTATUSID</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Выполненные работы" Icon="48control.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATEDONE, DOCTORNAME, CLIENT, CLIENTWORKTYPE, DESCRIPTION, HISTORY, CLIENTSEGMENT, CREATEDOCTOR, COMMENT, NUMBER, ISNEEDACT, ISACTDONE
			from KK_CLIENTWORK_DONE_MANAGER ('{0}', '{1}')</DataSource>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATEDONE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CLIENTWORKTYPE"><Name>Вид работ</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
                		<Column Id="HISTORY"><Name>История</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="CREATEDOCTOR"><Name>Кто создал</Name></Column>
                		<Column Id="COMMENT"><Name>Описание задачи</Name></Column>
                		<Column Id="NUMBER"><Name>Номер задачи</Name></Column>
                		<Column Id="ISNEEDACT"><Name>Требует акт сдачи-приемки</Name></Column>
                		<Column Id="ISACTDONE"><Name>Акт получен?</Name></Column>
       	</ColumnsMeta>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>1</Value1><Field>ISNEEDACT</Field></Colorizer>
		</Colorizers>
	</Item>

	<Item Caption="Контроль качества (сегодня)" Icon="48control.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENT, CONTROLTASKGROUP, CONTROLTASK, DESCRIPTION
			from KK_MANAGER_TODAY</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Менеджер</Name></Column>
                		<Column Id="CLIENT"><Name>Клиент</Name></Column>
                		<Column Id="CONTROLTASKGROUP"><Name>Блок задач</Name></Column>
                		<Column Id="CONTROLTASK"><Name>Показатель</Name></Column>
                		<Column Id="DESCRIPTION"><Name>Комментарий</Name></Column>
       	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
	</Item>



	  </Items>
	</Pane>



        <Pane Caption="Аналитика" Type="List">
	  <Items>

		<Item Caption="Партнеры" Icon="16department.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>REKLAMA</DataSource>
		</Item>

	<Item Caption="Отчет по партнерам" Icon="16reklama.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, name, REKLAMALEVEL, CREATIONDATE, RECOMMENDCOUNT, HOTRECOMMENDCOUNT, clientcount from report_reklama_2 ('{0}', '{1}')</DataSource>
                <ParamForm ID="Период">
                	<ParentType>DateChoose</ParentType>
                </ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      		<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="NAME"><Name>источник рекламы</Name></Column>
                		<Column Id="REKLAMALEVEL"><Name>Уровень партнера</Name></Column>
                		<Column Id="CREATIONDATE"><Name>Дата создания</Name></Column>
                		<Column Id="RECOMMENDCOUNT"><Name>Кол-во рекомендаций</Name></Column>
                		<Column Id="HOTRECOMMENDCOUNT"><Name>Кол-во горячих рекомендаций</Name></Column>
                		<Column Id="CLIENTCOUNT"><Name>Кол-во клиентов</Name></Column>
       		</ColumnsMeta>
		<EditorOpen>
			<Column>ID</Column>
			<Table>REKLAMA</Table>
		</EditorOpen>
	</Item>

	<Item Caption="Отчет по продажам" Icon="16products.png">
        	<DataSourceType>QueryReport</DataSourceType>
        	<DataSource>select ID, OPERATIONDATE, DOCTORNAME, CLIENTNAME, CARDNUMBER, MATERIALNAME, 
			MATERIALGROUP, AMOUNT, PRICE, SUMMA, SALARY, ISWHITE, SUMMA0, PAYMENTTYPE, COMPANY
		from REPORT_DAILY_MATERIAL_SALE2 ('{0}', '{1}')</DataSource>
              	<GraphSettings><NameColumn>NAME</NameColumn></GraphSettings>
                	<ParamForm ID="Период">
                		<ParentType>DateChoose</ParentType>
                	</ParamForm>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
                		<Column Id="DOCTORNAME"><Name>Специалист</Name></Column>
                		<Column Id="CLIENTNAME"><Name>Клиент</Name></Column>
                		<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
                		<Column Id="MATERIALGROUP"><Name>Группа товаров</Name></Column>
                		<Column Id="MATERIALNAME"><Name>Товар</Name></Column>
                		<Column Id="AMOUNT"><Name>Кол-во</Name></Column>
                		<Column Id="PRICE"><Name>Цена</Name></Column>
                		<Column Id="SUMMA"><Name>Сумма</Name></Column>
                		<Column Id="SUMMA0"><Name>Себестоимость</Name></Column>
                		<Column Id="SALARY"><Name>Зарплата</Name></Column>
                		<Column Id="ISWHITE"><Name>Пок. в отчетах?</Name></Column>
                		<Column Id="PAYMENTTYPE"><Name>Вид оплаты</Name></Column>
                		<Column Id="COMPANY"><Name>Организация</Name></Column>
      	</ColumnsMeta>
	<EditorOpen>
		<Column>ID</Column>
		<Table>MATERIALSALE</Table>
	</EditorOpen>
	</Item>


		<Item Caption="Все продажи товаров (таблица)" Icon="16materialsale.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>MATERIALSALE</DataSource>
                <ShowExcelButton>true</ShowExcelButton>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		</Item>

	  </Items>
	</Pane>


	<Pane Caption="Работа предприятия" Type="Tree">
	  <Items>

	        <Item Caption="Расписание" Icon="16scheduler.png">
        		<DataSourceType>Scheduler</DataSourceType>
	              	<DataSource>APPOINTMENT</DataSource>
	              	<SchedulerSettings>
				<LoadEditorOnCreate>false</LoadEditorOnCreate>
				<EnableDeleteButton>false</EnableDeleteButton>
			        <LoadByDay>true</LoadByDay>
				<SchedulerColorColumn>MANIPULATIONSTATUSID</SchedulerColorColumn>
				<SchedulerColorTable>MANIPULATIONSTATUS</SchedulerColorTable>
				<SchedulerBorderColorColumn>COLORID</SchedulerBorderColorColumn> 
				<SchedulerBorderColorTable>COLOR</SchedulerBorderColorTable> 
				<TryToUpdateSubject>true</TryToUpdateSubject>
				<CloseOnSave>false</CloseOnSave>
				<ForegroundRefresh>0</ForegroundRefresh>
				<ShowSelfButton>false</ShowSelfButton>
                		<WorkTime>
                  			<MinutesFrom>420</MinutesFrom>
                  			<MinutesTo>1440</MinutesTo>
	                		<ShowOnlyWorkTime>true</ShowOnlyWorkTime>
                		</WorkTime>
        	        	<GroupBy>
					<SchedulerTableForeignColumn>DOCTORID</SchedulerTableForeignColumn>
                   			<SchedulerWorkTimeTable>WORKTIME</SchedulerWorkTimeTable>
					<SchedulerGroupByColumn>ORDERNUMBER</SchedulerGroupByColumn>
               				<SchedulerVisibleColumn>VISIBLE</SchedulerVisibleColumn>
			                <SchedulerDividerColumn>DEPARTMENTID</SchedulerDividerColumn>
					<SchedulerDividerTable>DEPARTMENT</SchedulerDividerTable>
					<SchedulerWorktimeVisibleColumn>ISACTIVE</SchedulerWorktimeVisibleColumn>
			                <SchedulerAltMessage>
                    				<MessageProcedure>select STRVALUE from SCHEDULER_GET_ALT_TEXT ({cid}, '{from}', '{to}')</MessageProcedure>
				                <MessageStringParameter>STRVALUE</MessageStringParameter>
			                </SchedulerAltMessage>
				</GroupBy>

		                <AdditionalWorkTimeColumns>
                  			<Column Id="DEPARTMENTID"><Name>Подразделение</Name><DeepLook>true</DeepLook></Column>
                  			<Column Id="ORDERNUMBER"><Name>№</Name><Sorted>Ascending</Sorted></Column>
		                </AdditionalWorkTimeColumns>

				<MiniInsertFormColumns> 
					<Column Id="CLIENTID" /> 
					<Column Id="EMPLOYEEID"> 
						<Val>AUTH_ID</Val> 
					</Column> 
				</MiniInsertFormColumns> 
		                <MiniInsertFormCloseOnSave>true</MiniInsertFormCloseOnSave>

			<MainMenuButtons> 
			<NewButton> 
                  		<ButtonName>Продать товар</ButtonName>
                  		<ButtonIcon>cassa24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>ADD_MATERIAL_SALE</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{6}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="6"><ColumnName>{9}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="7"><ColumnName>{11}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="8"><ColumnName>{4}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="9"><ConstantValue>0</ConstantValue></ProcedureParam>
	                      		<ProcedureParam Position="10"><ColumnName>{5}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="11"><ColumnName>{8}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="12"><ConstantValue>1</ConstantValue></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Продажа товара">
                		<GeneratedDataControls>
                  		<GeneratedDataControl ID="Клиент" ControlType="Grid">
                    			<DataSource>
						select ID, surname, name, secondname, cellphone, homephone, cardnumber, 
						dolg, deposit, fio2
						from client
					</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>FIO2</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
					<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="FIO2"><Name>Клиент</Name></Column>
						<Column Id="SURNAME"><Name>Фамилия</Name></Column>
						<Column Id="NAME"><Name>Имя</Name></Column>
						<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
						<Column Id="CELLPHONE"><Name>Моб. телефон</Name></Column>
						<Column Id="HOMEPHONE"><Name>Дом. телефон</Name></Column>
						<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
						<Column Id="DOLG"><Name>Долг</Name></Column>
						<Column Id="DEPOSIT"><Name>Депозит</Name></Column>
					</ColumnsMeta>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>select price from material where id = {{Товар}}</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
					</DependentFields>
				</GeneratedDataControl>
	               		<GeneratedDataControl ID="Товар" ControlType="Grid">
                    			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>select price from material where id = {{Товар}}</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Остаток</FieldId>
                	            			<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT ({{Товар}}, {{Склад}})</SQL>
        	                  		</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		<GeneratedDataControl ID="Специалист" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>SHORTFIO</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
				</GeneratedDataControl>
                  		<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>NAME</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
				</GeneratedDataControl>
                  		<GeneratedDataControl ID="Склад" ControlType="LookUpEdit">
                    			<DataSource>SELECT ID, NAME FROM STORE</DataSource>
					<DataColumn>ID</DataColumn>
					<DisplayColumn>NAME</DisplayColumn>
					<SqlAddition>{0}</SqlAddition>
        	              		<DependentFields>
						<DependentField>
					        	<FieldId>Остаток</FieldId>
                	            			<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT ({{Товар}}, {{Склад}})</SQL>
        	                  		</DependentField>
	                      		</DependentFields>
				</GeneratedDataControl>
	                    	<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
        	              		<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                	      		<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
               				<SqlAddition>{0}</SqlAddition>
					<DependentFields>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
                	            			<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
                        	  		</DependentField>
					</DependentFields>
    	            		</GeneratedDataControl>
				</GeneratedDataControls>
        	        	<GeneratedStaticControls>
	                        <GeneratedStaticControl ID="Кол-во" ControlType="Number">
					<DependentFields>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
	                	            		<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
        	                	  	</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Скидка" ControlType="Number">
					<DefaultValue>0</DefaultValue>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select price from get_material_price_by_client ({{Товар}}, {{Клиент}}, {{Скидка}})</SQL>
                        	  		</DependentField>
						<DependentField>
					        	<FieldId>Сумма</FieldId>
	                	            		<SQL>select summa from get_materialsale_summa ({{Клиент}}, {{Товар}}, {{Ед. измерения}}, {{Кол-во}}, {{Скидка}})</SQL>
        	                	  	</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена со скидкой" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Сумма" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
        	              	<GeneratedStaticControl ID="Дата продажи" ControlType="TimeSpan">
			        	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
	                       	<GeneratedStaticControl ID="Остаток" ControlType="Number">
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			<NewButton>
                  		<ButtonName>ККМ - возврат суммы</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Оформление возврата суммы</ToolTip> 
		                  <LaunchBaseProcedure>
	        	            	<ProcedureName>FAKE</ProcedureName>
        	            		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>

			                <ParamForm ID="Возврат суммы">
					<GeneratedStaticControls>
						<GeneratedStaticControl ID="Сумма" ControlType="Number" />
        	                	</GeneratedStaticControls>
	                	    	</ParamForm>
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-4 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                  </LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>ККМ - X отчет (без гашения)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Формирование X отчета (без гашения)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-2 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton>
                  		<ButtonName>ККМ - Z отчет (с гашением)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Формирование Z отчета (с гашением)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>SycretKKM\SycretKKM.exe</ProgAddress>
                    				<ProgParam>-3 -0 -{0}</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton> 
                  		<ButtonName>Доступные услуги</ButtonName>
                  		<ButtonIcon>cassa24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>GET_AVAILABLE_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Доступные услуги">
                        	<GeneratedStaticControls>
        	              	<GeneratedStaticControl ID="Время" ControlType="TimeSpan">
			        	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			<NewButton> 
                  		<ButtonName>Проверить сертификат по номеру</ButtonName>
                  		<ButtonIcon>do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>CHECK_CERTIFICATE_BY_NUMBER</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Проверка сертификата по номеру">
                        	<GeneratedStaticControls>
        	              	<GeneratedStaticControl ID="Номер сертификата" ControlType="String" />
                        	</GeneratedStaticControls>
                	    	</ParamForm>
	            	</LaunchBaseProcedure>
			</NewButton> 
			</MainMenuButtons> 

		    	<NewButtons>
			<NewButton>
				<ButtonName>В карточку клиента</ButtonName>
				<ButtonIcon>kartochka24.png</ButtonIcon>
				<LaunchEditor>
					<ColumnName>CLIENTID</ColumnName>
					<ItemName>CLIENT</ItemName>
				</LaunchEditor>
			</NewButton>

			<NewButton>
		              	<ButtonName>Услуга</ButtonName>
              			<ButtonIcon>usluga24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_APP_MANIP</ProcedureName>
                		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Добавление услуги">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
						SELECT ID, NAME, PRICE, CODE, NAME1, NAME2, NAME3
						FROM GET_DOCTORMANIP_LIST_BY_APP ({[ID]})
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        		               			<FieldId>Стоимость</FieldId>
                        				<SQL>select price from get_tobepayed_for_appmanip ({[ID]}, {{Услуга}})</SQL>
                      				</DependentField>
                      				<DependentField>
                	        			<FieldId>К оплате</FieldId>
        	                			<SQL>select tobepayed from get_tobepayed_for_appmanip ({[ID]}, {{Услуга}})</SQL>
	                      			</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="String">
						<SQLReplacement>
						select 1 as "VALUE" from doctor where id = 0
						</SQLReplacement>
                    			</GeneratedStaticControl>
                    			<GeneratedStaticControl ID="Стоимость" ControlType="Number">
					<DependentFields>
                      				<DependentField>
                	        			<FieldId>К оплате</FieldId>
        	                			<SQL>select tobepayed from get_tobepayed_by_price ({[ID]}, {{Услуга}}, {{Стоимость}})</SQL>
	                      			</DependentField>
					</DependentFields>
                    			</GeneratedStaticControl>
                      			<GeneratedStaticControl ID="К оплате" ControlType="Number">
	                   		</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
            		</NewButton>

                  	<NewButton>
                  		<ButtonName>Комментарий</ButtonName>
                  		<ButtonIcon>comment24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>SCHEDULER_ADD_COMMENT</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                <ParamForm ID="Комментарий">
                  		<GeneratedStaticControls>
	                      		<GeneratedStaticControl ID="Комментарий" ControlType="String">
					<SQLReplacement>
						select comment3 as "VALUE"
						from appointment
						where id = ({[ID]})
					</SQLReplacement>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                	    	</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>

			<NewButton>
                  		<ButtonName>Вып./Опл. весь визит</ButtonName>
                  		<ButtonIcon>dopay24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>DO_AND_PAY_VISIT_2</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{5}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{12}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="6"><ColumnName>{4}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Вып./Опл. весь визит">
                			<GeneratedDataControls>
                  				<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    					<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
							<DataColumn>ID</DataColumn>
							<DisplayColumn>NAME</DisplayColumn>
							<SqlAddition>{0}</SqlAddition>
						</GeneratedDataControl>
			                        <GeneratedDataControl ID="Услуги и товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA, UNITS FROM GET_VISIT_CHECK ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>200</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        	<Column Id="UNITS"><Name>Кол-во единиц</Name></Column>
				                        </ColumnsMeta>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
	                  		<GeneratedStaticControls>
		                       		<GeneratedStaticControl ID="Общая сумма" ControlType="Number">
							<SQLReplacement>
								select summa as "VALUE"
								from CHECK_VISIT_TOBEPAYED ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Ранее оплачено" ControlType="Number">
							<SQLReplacement>
								select ALREADYPAYEDSUMMA as "VALUE"
								from GET_VISIT_PAYED_ALREADY ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Сумма с депозита" ControlType="Number">
						<DefaultValue>0</DefaultValue>
		                      		<DependentFields>
							<DependentField>
					                        <FieldId>К оплате</FieldId>
								<SQL>
									select first 1 
									(select summa from CHECK_VISIT_TOBEPAYED ({[ID]})) - 
									(select ALREADYPAYEDSUMMA from GET_VISIT_PAYED_ALREADY ({[ID]})) - 
									{{Сумма с депозита}} 
									as "VALUE" from RDB$RELATIONS
								</SQL>
                          				</DependentField>
		                      		</DependentFields>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="К оплате" ControlType="Number">
							<SQLReplacement>select first 1 
								(select summa from CHECK_VISIT_TOBEPAYED ({[ID]})) - 
								(select ALREADYPAYEDSUMMA from GET_VISIT_PAYED_ALREADY ({[ID]})) - 
								{{Сумма с депозита}} 
								as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
		                        		<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Клиент" ControlType="String">
							<SQLReplacement>
								select c.fio as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Тип карты" ControlType="String">
							<SQLReplacement>
								select ct.name as "VALUE"
								from client c, appointment a, cardtype ct
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
									and ct.id = c.cardtypeid
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Сумма накопл." ControlType="Number">
							<SQLReplacement>
								select manipulationsumma as "VALUE"
								from GET_CLIENT_MANIP_SUMMA_BY_APP ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Долг клиента" ControlType="Number">
							<SQLReplacement>
								select c.dolg as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Долг за курсы" ControlType="Number">
							<SQLReplacement>
				                                select iif (sum (co.summa - co.payment) is null, 0, sum (co.summa - co.payment)) as "VALUE"
								from client c, course co, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
									and co.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Депозит клиента" ControlType="Number">
							<SQLReplacement>
								select c.deposit as "VALUE"
								from client c, appointment a
								where 
									a.id = ({[ID]})
									and a.clientid = c.id	
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Пробить чек" ControlType="Checkbox">
		                        		<DefaultValue>1</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Обяз. списание" ControlType="String">
							<SQLReplacement>
								select STATUSTEXT as "VALUE" from MMA_GET_VISIT_STATUS ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Остаток единиц" ControlType="String">
							<SQLReplacement>
								select first 1 unitsrest as "VALUE" from SUBSCRIPTION_GET_SUBSCR_FOR_APP ({[ID]})
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
                  			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>


                  	<NewButton>
                  		<ButtonName>Подтвердить</ButtonName>
                  		<ButtonIcon>confirm24.png</ButtonIcon>
		        	<LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        		<ProcedureName>APPOINTMENT_SUBMIT</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
				</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

                  	<NewButton>
                  		<ButtonName>Клиент пришел</ButtonName>
                  		<ButtonIcon>clienthere24.png</ButtonIcon>
	        		<LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        		<ProcedureName>APPOINTMENT_CLIENT_ENTERED</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
				</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

                  	<NewButton>
                  		<ButtonName>Отменить</ButtonName>
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	            	<ProcedureName>CANCEL_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				        </ProcedureParams>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>4</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>

                  	<NewButton>
                  		<ButtonName>Вернуть в предв. запись</ButtonName>
                  		<ButtonIcon>back24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	            	<ProcedureName>GETBACK_MANIPULATION</ProcedureName>
        	            		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				        </ProcedureParams>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>1</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>3</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>6</Val>
					</DisableCondition>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
		        </NewButton>

                  	<NewButton>
				<DeletedAfterAction>true</DeletedAfterAction>
                  		<ButtonName>Удалить</ButtonName>
                  		<ButtonIcon>delete.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>DELETE_APPOINTMENT</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Удаление записи">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Причина" ControlType="String" />
                        			</GeneratedStaticControls>
                				<GeneratedDataControls>
                  					<GeneratedDataControl ID="Администратор" ControlType="LookUpEdit">
								<DefaultValue>AUTH_ID</DefaultValue>
                    						<DataSource>SELECT ID, LOGIN FROM EMPLOYEE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>LOGIN</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<ReadOnly>true</ReadOnly>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

				<DisableConditions>
					<DisableCondition>
						<FieldName>MANIPULATIONSTATUSID</FieldName>
						<Val>7</Val>
					</DisableCondition>
				</DisableConditions>
			</NewButton>

              	  </NewButtons>


	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="APPOINTMENTMANIPULATION" Index="0">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                  	<NewButtons>
                  	<NewButton>
                  		<ButtonName>Изменить сумму</ButtonName>
                  		<ButtonIcon>cassa.bmp</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>APPOINTMENT_CHANGE_APPMANIP_SUM</ProcedureName>
        	            		<ProcedureParams>
				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Изменить сумму">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Стоимость" ControlType="Number" />
                        			</GeneratedStaticControls>
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="К оплате" ControlType="Number" />
                        			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
	        	</NewButton>
                  	</NewButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="MATERIALSALE" Index="1">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="APPOINTMENTPAYMENT" Index="2">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME" Index="5">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAY" Index="3">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION" Index="4">
			<DoubleClickEditActivated>false</DoubleClickEditActivated>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>

              
 	<FormSettings>
	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	 </LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONADDID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
		<ShowUpperColumn>SALOONNAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="DOCTORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="CITYID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="SALOONNAME" />
                 			<AdditionalColumn FieldName="URNAME" />
                 			<AdditionalColumn FieldName="CONTRACTNUMBER" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="CONTACTPERSONID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="LPRPERSONID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="COMMENT" />
               		</AdditionalColumns>
          	 </LookUpEditRelation>
    	</LookUpEditRelations>
	</FormSettings>

        	        </SchedulerSettings>
       	        </Item>



	<Item Caption="Мои клиенты" Icon="16client.png">
        	<DataSourceType>Query</DataSourceType>
        	<DataSource>select ID, DOCTOR, ISCLIENT, CLIENTSTATE, CITY, SALOONNAME, URNAME, CONTACTDATE, 
			CONTRACTNUMBER, CONTRACTDATE, CONTRACTFINISHDATE, CONTRACTCONTINUENUMBER,
			CONTRACTCONTINUEDATE, LPRPERSON, CONTACTPERSON, COMMENT, 
			REKLAMA, CLIENTSEGMENT, ISHOTSALE, LASTCONTACTDATE  
			from SCRM_GET_CLIENTS_BY_MANAGER</DataSource>
		<DefaultButtons><DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton></DefaultButtons>
      	<ColumnsMeta>
                		<Column Id="ID"><Name>ID</Name><Visible>false</Visible></Column>
                		<Column Id="DOCTOR"><Name>Менеджер</Name></Column>
                		<Column Id="ISCLIENT"><Name>Клиент?</Name></Column>
                		<Column Id="CLIENTSTATE"><Name>Состояние</Name></Column>
                		<Column Id="CITY"><Name>Город</Name></Column>
                		<Column Id="SALOONNAME"><Name>Салон</Name></Column>
                		<Column Id="URNAME"><Name>Юр. название</Name></Column>
                		<Column Id="CONTACTDATE"><Name>Дата 1 контакта</Name></Column>
                		<Column Id="CONTRACTNUMBER"><Name>Номер 1-го договора</Name></Column>
                		<Column Id="CONTRACTDATE"><Name>Дата 1-го договора</Name></Column>
                		<Column Id="CONTRACTFINISHDATE"><Name>Дата окончания договора</Name></Column>
                		<Column Id="CONTRACTCONTINUENUMBER"><Name>Номер договора на продление</Name></Column>
                		<Column Id="CONTRACTCONTINUEDATE"><Name>Дата договора на продление</Name></Column>
                		<Column Id="LPRPERSON"><Name>ЛПР</Name></Column>
                		<Column Id="CONTACTPERSON"><Name>Контактное лицо</Name></Column>
                		<Column Id="COMMENT"><Name>Комментарий</Name></Column>
                		<Column Id="REKLAMA"><Name>Источник рекламы</Name></Column>
                		<Column Id="CLIENTSEGMENT"><Name>Сегмент</Name></Column>
                		<Column Id="ISHOTSALE"><Name>Горячая продажа?</Name></Column>
                		<Column Id="LASTCONTACTDATE"><Name>Посл. контакт</Name></Column>
       	</ColumnsMeta>
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>add24.png</ButtonIcon>
                         		<ButtonName>Добавить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{6}</ColumnName></ProcedureParam>
						<ProcedureParam Position="8"><ColumnName>{7}</ColumnName></ProcedureParam>
						<ProcedureParam Position="9"><ColumnName>{8}</ColumnName></ProcedureParam>
						<ProcedureParam Position="10"><ColumnName>{9}</ColumnName></ProcedureParam>
						<ProcedureParam Position="11"><ColumnName>{10}</ColumnName></ProcedureParam>
						<ProcedureParam Position="12"><ColumnName>{11}</ColumnName></ProcedureParam>
						<ProcedureParam Position="13"><ColumnName>{12}</ColumnName></ProcedureParam>
						<ProcedureParam Position="14"><ColumnName>{13}</ColumnName></ProcedureParam>
						<ProcedureParam Position="15"><ColumnName>{14}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Новый потенциальный клиент">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Город" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM CITY</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>1</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Должность" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM "POSITION"</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>7</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Источник рекламы" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM REKLAMA</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>11</VisibleIndex>
					</GeneratedDataControl>
                  			<GeneratedDataControl ID="Тип 1-го контакта" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM DICTFIRSTCONTACTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<NullString>0</NullString>
						<VisibleIndex>15</VisibleIndex>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                          			<GeneratedStaticControl ID="Название салона" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Юр лицо" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Фамилия" ControlType="String">
							<VisibleIndex>4</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Имя" ControlType="String">
							<VisibleIndex>5</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Отчество" ControlType="String">
							<VisibleIndex>6</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Моб телефон" ControlType="String">
							<VisibleIndex>8</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Раб телефон" ControlType="String">
							<VisibleIndex>9</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Мейл" ControlType="String">
							<VisibleIndex>10</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Дата 1 контакта" ControlType="DateTime"><VisibleIndex>12</VisibleIndex>
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Адрес" ControlType="String">
							<VisibleIndex>13</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                          			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>14</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
	<EditorOpen>
		<Column>ID</Column>
		<Table>CLIENT</Table>
	</EditorOpen>
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>1</Value1><Field>ISHOTSALE</Field></Colorizer>
		</Colorizers>
	</Item>


	<Item Caption="Все клиенты" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>CLIENT</DataSource>
		<CustomExcelExport>true</CustomExcelExport>
		<DefaultButtons> 
			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton> 
			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton> 
		</DefaultButtons>		
		<Colorizers>
			<Colorizer Type="Equal"><Color>LightSkyBlue</Color><Value1>1</Value1><Field>ISHOTSALE</Field></Colorizer>
		</Colorizers>
	</Item>


		<Item Caption="Контактные лица" Icon="16client.png">
		<DataSourceType>Table</DataSourceType>
		<DataSource>PERSON</DataSource>
		</Item>

	  </Items>
	</Pane>
      </Panes>


<TableEditorParts>


<TableEditorPart Table="KB">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="KBANSWER">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
				<NewButtons>
				<NewButton>
                  			<ButtonName>Отмодерировать</ButtonName>
                  			<ButtonIcon>16do.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_ANSWER_MODERATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Задать статус">
                        		<GeneratedDataControls>
					<GeneratedDataControl ID="Статус" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM KBSTATUS WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>	                    		
					</GeneratedDataControl>
					</GeneratedDataControls>
	            	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Принять</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>KB_ANSWER_ACCEPT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>
				<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Отклонить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>KB_ANSWER_DECLINE</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>
				</NewButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>
	
			<NewButtons>
				<NewButton>
                  			<ButtonName>Ответить</ButtonName>
                  			<ButtonIcon>16do.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>KB_SET_ANSWER</ProcedureName>
        	            		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Ответить">
                        		<GeneratedStaticControls>
                          		<GeneratedStaticControl ID="Ответ" ControlType="String">
						<VisibleIndex>1</VisibleIndex>
                        		</GeneratedStaticControl>
					<GeneratedStaticControl ID="Дата добавления" ControlType="DateTime">
			                        <DefaultValue>NOW</DefaultValue>
						<ReadOnly>true</ReadOnly>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
			</NewButtons>
</TableEditorPart>

<TableEditorPart Table="KBANSWER">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>


<TableEditorPart Table="CLIENTWORK">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="CLIENT">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	<NewButtons>


                	<NewButton>
                  		<ButtonName>Коммент</ButtonName>
               			<ButtonIcon>16checkgreen.png</ButtonIcon>
				<ToolTip>Добавить комментарий в карточку клиента</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_ADD_COMMENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

                	<NewButton>
                  		<ButtonName>Рез. ИЗ</ButtonName>
               			<ButtonIcon>48telephone.png</ButtonIcon>
				<ToolTip>Исходящий звонок по телефону или скайп, когда дозвонились</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_OUTCALL_SUCCESS</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>1</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE (ID = 3) OR (ID = 7)</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>3</VisibleIndex>
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

                	<NewButton>
                  		<ButtonName>Недозвон</ButtonName>
               			<ButtonIcon>cancel24.png</ButtonIcon>
				<ToolTip>Исходящий звонок по телефону или скайп, когда не удалось поговорить с абонентом</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_OUTCALL_REJECT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>1</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE (ID = 3) OR (ID = 7)</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Причина недозвона" ControlType="Grid">
						<VisibleIndex>3</VisibleIndex>
                      				<DataSource>SELECT ID, NAME FROM DICTDEALINGREASON WHERE ID > 0</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="NAME"><Name>Причина недозвона</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>4</VisibleIndex>
						<SQLReplacement>select first 1 '.' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>


                	<NewButton>
                  		<ButtonName>Контакт</ButtonName>
               			<ButtonIcon>16phoneok.png</ButtonIcon>
				<ToolTip>Добавить контакт с клиентом, все кроме исходящих звонков</ToolTip> 
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENTCONTACT_ADD</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="7"><ConstantValue>0</ConstantValue></ProcedureParam>
						<ProcedureParam Position="8"><ConstantValue>0</ConstantValue></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Контакт">
                		<GeneratedDataControls>
        		            	<GeneratedDataControl ID="Вид контакта" ControlType="Grid">
						<VisibleIndex>2</VisibleIndex>
                      				<DataSource>SELECT ID, SHORTNAME, NAME FROM DICTCONTACTTYPE WHERE ID != 1 AND ID != 3 AND ID != 7</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SHORTNAME"><Name>Вид контакта</Name></Column>
				                       	<Column Id="NAME"><Name>Вид контакта</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
        		            	<GeneratedDataControl ID="Контактное лицо" ControlType="Grid">
						<VisibleIndex>3</VisibleIndex>
                      				<DataSource>
							SELECT p.ID, p.SURNAME, p.NAME, p.SECONDNAME, pos.NAME as POSITIONNAME, p.CELLPHONE, p.EMAIL 
							FROM PERSON p, "POSITION" pos
							WHERE 
								pos.id = p.positionid 
								and p.CLIENTID = {[ID]}
						</DataSource>
		                      		<DataColumn>ID</DataColumn>
		                      		<DisplayColumn>NAME</DisplayColumn>
		                      		<SqlAddition>{0}</SqlAddition>
                		          	<ColumnsMeta>
				                       	<Column Id="SURNAME"><Name>Фамилия</Name></Column>
				                       	<Column Id="NAME"><Name>Имя</Name></Column>
				                       	<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
				                       	<Column Id="POSITIONNAME"><Name>Должность</Name></Column>
				                       	<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
				                       	<Column Id="EMAIL"><Name>Эл. почта</Name></Column>
 						</ColumnsMeta>
	                    		</GeneratedDataControl>
				</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<VisibleIndex>4</VisibleIndex>
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
              			
				<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Горячая рекомендация</ButtonName>
					<ToolTip>Клиент изначально настроен покупать у нас. Задача не завалить презентацию и продать как можно больший пакет.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_HOT_RECOMMEND_ON</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
                         		<ButtonName>---АКТИВНОСТЬ----------------</ButtonName>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Презентовать БС</ButtonName>
					<ToolTip>Создать вручную себе задачу "Презентация БС". Нужно для замера твоей активности по презентациям.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD_PRESENT_BS</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Повторный контакт по продаже БС</ButtonName>
					<ToolTip>Создать вручную себе задачу "Повторный контакт по продаже БС". Нужно чтобы не забыть связаться и завершить продажу.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_ADD_PRESENT_BS_MORE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            		</LaunchBaseProcedure>
                             	</NewButton>

              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Предложить беспл. интенсив</ButtonName>
					<ToolTip>Для того, чтобы клиент начал пользоваться всеми возможностями и делал дальнейшие покупки.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_FREE_I_PRESENT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="ЛПР согласен?" ControlType="Checkbox" />
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Предложить беспл. И. повторно</ButtonName>
					<ToolTip>Для того, чтобы клиент начал пользоваться всеми возможностями и делал дальнейшие покупки.</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_FREE_I_PRES_2</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="ЛПР согласен?" ControlType="Checkbox" />
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>

<!--
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Исх звонок ЛПР по новинкам</ButtonName>
					<ToolTip>Исходящий звонок ЛПР (личная инициатива менеджера) для допродажи новинок и некупленных модулей</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CONTACT_OUT_LPR</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>40030</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Тема конс-тации" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
-->

              			<NewButton>
                         		<ButtonName>---ПРОДАЖА-----------------------</ButtonName>
                             	</NewButton>

			<NewButton>
		              	<ButtonName>Продать товар</ButtonName>
              			<ButtonIcon>16materialsale.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>SCRM_ADD_MATERIAL_SALE</ProcedureName>
                		<ProcedureParams>
                  			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
			                <ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Продажа товара">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
					<VisibleIndex>1</VisibleIndex>
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена</FieldId>
                	            			<SQL>SELECT PRICE FROM SCRM_GET_PRICE_BY_MATERIAL ({[ID]}, {{Товар}})</SQL>
                        	  		</DependentField>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select first 1 {{Цена}} - {{Скидка}} as "VALUE" from RDB$RELATIONS</SQL>
                        	  		</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
					<VisibleIndex>3</VisibleIndex>
                      			<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                        	<GeneratedStaticControl ID="Цена" ControlType="Number">
					<VisibleIndex>4</VisibleIndex>
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Скидка" ControlType="Number">
					<VisibleIndex>5</VisibleIndex>
					<DefaultValue>0</DefaultValue>
					<DependentFields>
						<DependentField>
					                <FieldId>Цена со скидкой</FieldId>
                	        			<SQL>select first 1 {{Цена}} - {{Скидка}} as "VALUE" from RDB$RELATIONS</SQL>
                        	  		</DependentField>
					</DependentFields>
				</GeneratedStaticControl>
                        	<GeneratedStaticControl ID="Цена со скидкой" ControlType="Number">
					<VisibleIndex>6</VisibleIndex>
					<ReadOnly>true</ReadOnly>
				</GeneratedStaticControl>
                      		<GeneratedStaticControl ID="Дата продажи" ControlType="DateTime">
					<VisibleIndex>2</VisibleIndex>
		                       	<DefaultValue>NOW</DefaultValue>
				</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>


              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Получить первую оплату</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_GET_FIRST_PAY</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>3</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String">
							<VisibleIndex>1</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата договора" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Продлить договор</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_CONT_CONTRACT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>3</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Номер договора" ControlType="String">
							<VisibleIndex>1</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Дата договора" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Запланировать допродажу</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SALE_MORE_PLAN</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Начать допродажу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата счета" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Товары" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
							<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Получить оплату за допродажу</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CUST_PAY_SALE_MORE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Первый договор">
                			<GeneratedDataControls>
			                        <GeneratedDataControl ID="Товары" ControlType="EmbedGrid">
				                	<DataSource>SELECT NAME, SUMMA FROM SCRM_GET_UNPROCESSED_SALE_LIST ({[ID]})</DataSource>
				                	<DataColumn>NAME</DataColumn>
                          				<DisplayColumn>NAME</DisplayColumn>
			                          	<SqlAddition>{0}</SqlAddition>
			                          	<ViewOnly>true</ViewOnly>
		              			  	<NullString>0</NullString>
							<Height>150</Height>
							<ShowGroupPanel>false</ShowGroupPanel>
							<AllowFilter>false</AllowFilter>
                		          		<ColumnsMeta>
				                        	<Column Id="NAME"><Name>Наименование</Name></Column>
				                        	<Column Id="SUMMA"><Name>Сумма</Name></Column>
				                        </ColumnsMeta>
							<VisibleIndex>2</VisibleIndex>
			                        </GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата оплаты" ControlType="DateTime">
			                        	<DefaultValue>null</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                	<NewButton>
                  		<ButtonName>Сменить менеджера</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_MANAGER</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Смена менеджера">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>SHORTFIO</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>

              			<NewButton>
                         		<ButtonName>---ОТКАЗЫ----------------------------</ButtonName>
                             	</NewButton>

<!--
                	<NewButton>
                  		<ButtonName>Отказ</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Отказ" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM CLIENT_GET_AVAIL_CANCEL_STATE ({[ID]})</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
-->
                	<NewButton>
                  		<ButtonName>Отказ от первой покупки</ButtonName>
				<ToolTip>Отказ потенциального клиента от покупки программы</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_POT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="К кому ушел?" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTCOMPETITOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>3</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ уже клиента</ButtonName>
				<ToolTip>Уже клиент ушел перестал пользоваться программой</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_CLIENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="К кому ушел?" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTCOMPETITOR WHERE ID > 0</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>3</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ продлить</ButtonName>
				<ToolTip>Клиент работает в программе, но не хочет продлять</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_STATE_CANCEL_PROLONG</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Причина" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM DICTREJECTREASON WHERE ID IN (0, 1,2,3)</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
					<VisibleIndex>1</VisibleIndex>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
						<SQLReplacement>select first 1 'Что именно не так?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
              			<NewButton>
                         		<ButtonName>---ОБСЛУЖИВАНИЕ------------------</ButtonName>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Создать задачу</ButtonName>
					<ToolTip>Создать задачу вручную</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40010</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ConstantValue>-1</ConstantValue></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Создать задачу вручную">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Сотрудник" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Выполнить" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>2</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Задача" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Треб. акт сдачи?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Обновить</ButtonName>
					<ToolTip>Этому клиенту мной было установлено обновление, на все компьютеры, с сендером</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SOFT_UPDATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Установлена версия">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Версия ПО" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSSVERSION WHERE ID >= 9 AND ID != 1000</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Инд версия?" ControlType="Checkbox">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
								<NewButton>
								<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Создать заявку</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_ADD</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
									<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
									<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
									<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
									<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		</ProcedureParams>
               		                <ParamForm ID="Новая заявка">
									<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Отв.сотр." ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Папка" ControlType="String">
							<VisibleIndex>3</VisibleIndex>
                        			</GeneratedStaticControl>
									<GeneratedStaticControl ID="Дедлайн" ControlType="DateTime">
			                        <VisibleIndex>4</VisibleIndex>
									</GeneratedStaticControl>
									<GeneratedStaticControl ID="Время МС(мин)" ControlType="Number">
							<VisibleIndex>5</VisibleIndex>
                        			</GeneratedStaticControl>
									</GeneratedStaticControls>
	                      			</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Техподдержка</ButtonName>
					<ToolTip>Этому клиенту мной была оказана техподдержка, достаточно значимая, поэтому я хочу внести в базу</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SUPPORT_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ConstantValue>40020</ConstantValue></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="6"><ColumnName>{3}</ColumnName></ProcedureParam>
						<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Оказана техподдержка">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Тип задачи" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM DICTSUPPORTTYPE</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Вопрос клиента" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Что сделано" ControlType="String">
							<SQLReplacement>select first 1 '' as "VALUE" from RDB$RELATIONS</SQLReplacement>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Вопрос решен?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Бизнес-консультация</ButtonName>
					<ToolTip>Проведена консультация ЛПР по ведению бизнеса по входящему от ЛПР (не техподдержка!, не администраторы!)</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_ADD_CONSULT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Кол-во минут" ControlType="Number">
							<SQLReplacement>
								select first 1 0 as "VALUE" from RDB$RELATIONS
							</SQLReplacement>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
<!--
                	<NewButton>
                  		<ButtonName>Сменить менеджера по сопр.</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_MANAGER_SUPPORT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Смена менеджера">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 AND POSITIONID = 11</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>SHORTFIO</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                    		</GeneratedDataControls>
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 '' AS "VALUE" FROM META_TABLES</SQLReplacement>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
-->
<!--
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Входящий контакт от ЛПР</ButtonName>
					<ToolTip>Проведена консультация ЛПР по ведению бизнеса (не техподдержка!), предложены новинки и некупленные модули</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_CONTACT_IN_LPR</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ConstantValue>40040</ConstantValue></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Результат" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
-->        
	      			<NewButton>
                         		<ButtonName>---ДОКУМЕНТЫ---------------------</ButtonName>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Выставить счет</ButtonName>
					<ToolTip>Выставить счет на все неоплаченные продажи товаров</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_INVOICE</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_invoice.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать договор на покупку</ButtonName>
					<ToolTip>Создать договор на покупку Sycret Saloon в соответствие с выставленным счетом</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_contract.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать договор на продление</ButtonName>
					<ToolTip>Создать договор на продление обслуживания в соответствие с выставленным счетом</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_contract_prolong.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                		<NewButton>
	       				<ButtonIcon>16checkgreen.png</ButtonIcon>
                         		<ButtonName>Создать акт сдачи/приемки</ButtonName>
					<ToolTip>Создать акт сдачи/приемки в соответствие с договором</ToolTip> 
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>SCRM_DO_CONTRACT</ProcedureName>
        	            			<ProcedureParams>
	                      				<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						</ProcedureParams>
		                        <LaunchPrograms>
                  			<LaunchProgram>
						<ProgId>6010</ProgId>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\scrm_act.xml -0 -0</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		                        </LaunchPrograms>
		            		</LaunchBaseProcedure>
                             	</NewButton>
	</NewButtons>


	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="INSTRUMENT" Index="1">
			<Colorizers>
				<Colorizer Type="Equal"><Color>LightBlue</Color><Value1>6</Value1><Field>INSTRUMENT.INSTRUMENTSTATUSID</Field></Colorizer>
			</Colorizers>
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Презентовать</ButtonName>
				<ToolTip>Показал ЛПРу И., объяснил выгоды. 
Зафиксируем интерес ЛПР к этому И.</ToolTip> 
               			<ButtonIcon>16paygreen.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_PRESENT</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Презентовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Будет внедрять?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Стартовать</ButtonName>
				<ToolTip>ЛПР приступил к запуску этого И.</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_START</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Стартовать">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Завершить</ButtonName>
				<ToolTip>Этот И. запущен успешно, переходим к запуску следующего. 
Или не получилось запустить и пока что этим И. перестаем заниматься...</ToolTip> 
               			<ButtonIcon>cancel24.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_FINISH</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Завершить">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Успешно?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Указать прогресс</ButtonName>
				<ToolTip>Есть ли существенные улучшения с прошлого раза по данному И.?</ToolTip> 
               			<ButtonIcon>confirm24.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_SET_PROGRESS</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Указать прогресс">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Есть прогресс?" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM INSTRUMENTPROGRESS WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Поставить оценку</ButtonName>
				<ToolTip>Оценку берем из отчета Контроль дисциплины, оценка м.б. дробной</ToolTip> 
               			<ButtonIcon>green1graph128.png</ButtonIcon>
				<ShowAlertOnComplete>false</ShowAlertOnComplete>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>INSTR_SET_MARK</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Поставить оценку">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<!--<ReadOnly>true</ReadOnly>-->
						</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="Оценка" ControlType="Number" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="PERSON" Index="3">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
                	<NewButtons>
                	<NewButton>
                  		<ButtonName>Указать как ЛПР</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_PLRPERSON</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Указать как ответственное лицо</ButtonName>
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_SET_CONTACTPERSON</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
               		</NewButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="CLIENTWORK" Index="0">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
              		<NewButtons>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Выполнить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_SET_DONE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="4"><ConstantValue>1</ConstantValue></ProcedureParam>
						<ProcedureParam Position="5"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Выполнить работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Дата операции" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
							<ReadOnly>true</ReadOnly>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                      			<GeneratedStaticControl ID="С выездом?" ControlType="Checkbox" />
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Перенести</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_MOVE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Перенести работу">
                        		<GeneratedStaticControls>
	                      			<GeneratedStaticControl ID="Перенести на" ControlType="DateTime">
			                        	<DefaultValue>NOW</DefaultValue>
							<VisibleIndex>1</VisibleIndex>
						</GeneratedStaticControl>
                        			<GeneratedStaticControl ID="Комментарий" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Делегировать</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CLIENT_WORK_DELEGATE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Делегировать работу">
	                  		<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Менеджер" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
						<VisibleIndex>1</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="Причина" ControlType="String">
							<VisibleIndex>2</VisibleIndex>
                        			</GeneratedStaticControl>
	                       		</GeneratedStaticControls>
                	    		</ParamForm>
		            		</LaunchBaseProcedure>
                             	</NewButton>
                	<NewButton>
                  		<ButtonName>Отказ от допродажи</ButtonName>
				<ToolTip>Была запланирована допродажа, но клиент в конце концов отказался</ToolTip> 
               			<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>CLIENT_WORK_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Отказ от покупки программы">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Причина" ControlType="String">
						<SQLReplacement>select first 1 'Почему отказался?' AS "VALUE" FROM META_TABLES</SQLReplacement>
						<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
           		</NewButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="MATERIALSALE" Index="4">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
			<!-- by Andrey -->
			<ForeignKeyRelation ChildTable="SUPPORTTASK" Index="9">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
              		<NewButtons>
              											
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Одобрить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_ACCEPT</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
					</ProcedureParams>
               		                <ParamForm ID="Одобрить">
									<GeneratedDataControls>
        	            		<GeneratedDataControl ID="Отв.сотр." ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>
								<GeneratedDataControl ID="Стоимость" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, NAME FROM PRICETASK</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>3</VisibleIndex>
	                    		</GeneratedDataControl>
        	            		</GeneratedDataControls>
                        	</ParamForm>
		            		</LaunchBaseProcedure>
						</NewButton>
              			<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Принять в разработку</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_IN_DEVELOP</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
								</ProcedureParams>
               		        </LaunchBaseProcedure>
					 	</NewButton>
                	<NewButton>
                  		<ButtonName>Передать в тестирование</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_TESTING</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
					</ProcedureParams>
                		<ParamForm ID="Передать в тестирование">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Папка" ControlType="String">
								<VisibleIndex>2</VisibleIndex>
					</GeneratedStaticControl>
					<GeneratedStaticControl ID="Комментарий" ControlType="String">
					<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
						<VisibleIndex>3</VisibleIndex>
					</GeneratedStaticControl>
					<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>4</VisibleIndex>
					</GeneratedStaticControl>
				</GeneratedStaticControls>
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Установлено клиенту</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_RELEASE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
									<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
								</ProcedureParams>
								<ParamForm ID="Установлено клиенту">
								<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Время МС" ControlType="Number">
								<VisibleIndex>2</VisibleIndex>
								</GeneratedStaticControl>
							</GeneratedStaticControls>
							</ParamForm>
               		        </LaunchBaseProcedure>
					 	</NewButton>
					
					<NewButton>
	       				<ButtonIcon>16do.png</ButtonIcon>
                         		<ButtonName>Закрыта</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>SUPPORTTASK_CLOSE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
								</ProcedureParams>
               		        </LaunchBaseProcedure>
					 	</NewButton>
					
					<NewButton>
                  		<ButtonName>Отменена</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_CANCEL</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
								<VisibleIndex>2</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>3</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
                  		<ButtonName>Нет данных</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_NO_DATA</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Комментарий">
				<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
							<VisibleIndex>2</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время DEV(мин)" ControlType="Number">
								<VisibleIndex>3</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
	               		</ParamForm>
		            	</LaunchBaseProcedure>
                	</NewButton>
					
					<NewButton>
                  		<ButtonName>Вернуть в разработку</ButtonName>
				        	<ButtonIcon>16do.png</ButtonIcon>
	        	       	<LaunchBaseProcedure>
	        	          	<ProcedureName>SUPPORTTASK_RETURN</ProcedureName>
		          		<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
						</ProcedureParams>
                		<ParamForm ID="Вернуть в разработку">
									<GeneratedDataControls>
									<GeneratedDataControl ID="Сотрудник" ControlType="LookUpEdit">
                	      			<DataSource>SELECT ID, SHORTFIO FROM DOCTOR WHERE ID > 0 and isactive = 1</DataSource>
                      				<DataColumn>ID</DataColumn>
                      				<DisplayColumn>SHORTFIO</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
								<VisibleIndex>2</VisibleIndex>
	                    		</GeneratedDataControl>	
								</GeneratedDataControls>
								<GeneratedStaticControls>
        	                	<GeneratedStaticControl ID="Комментарий" ControlType="String">
								<SQLReplacement>select ' ' AS "VALUE" FROM supporttask where id = {[ID]}</SQLReplacement>
								<VisibleIndex>3</VisibleIndex>
							</GeneratedStaticControl>
							<GeneratedStaticControl ID="Время МС" ControlType="Number">
								<VisibleIndex>4</VisibleIndex>
								</GeneratedStaticControl>
				</GeneratedStaticControls>	
						</ParamForm>		
		            	</LaunchBaseProcedure>
                	</NewButton>
           		</NewButtons>
        	</ForeignKeyRelation>
				
			<!--end Andrey-->
        	<ForeignKeyRelation ChildTable="APPOINTMENT" Index="5">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="INVOICE" Index="6">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

        	<ForeignKeyRelation ChildTable="CLIENTCONTACT" Index="2">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>

	</ForeignKeyRelations>

</TableEditorPart>

<TableEditorPart Table="APPOINTMENT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>

	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="APPOINTMENTMANIPULATION">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="APPOINTMENTPAYMENT">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>



<Comment>Grid instead of lookupedit</Comment>
	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONADDID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               		</AdditionalColumns>
          	</LookUpEditRelation>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
		<ShowUpperColumn>FIO2</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="FIO2" />
                 			<AdditionalColumn FieldName="SURNAME" />
                 			<AdditionalColumn FieldName="NAME" />
                 			<AdditionalColumn FieldName="SECONDNAME" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="HOMEPHONE" />
                 			<AdditionalColumn FieldName="CARDNUMBER" />
                 			<AdditionalColumn FieldName="CARDTYPEID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="DOLG" />
                 			<AdditionalColumn FieldName="DEPOSIT" />
                 			<AdditionalColumn FieldName="ISINBLACKLIST" />
                 			<AdditionalColumn FieldName="COMMENT2" />
                 			<AdditionalColumn FieldName="ISACTIVE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
    	</LookUpEditRelations>

</TableEditorPart>


<TableEditorPart Table="APPOINTMENTMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
	<ForeignKeyRelations>
        	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION" Index="0">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="STOREOUTLAY" Index="1">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
        	<ForeignKeyRelation ChildTable="DOCTORINCOME" Index="2">
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
        	</ForeignKeyRelation>
	</ForeignKeyRelations>

	<LookUpEditRelations>
           	<LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	                 		<AdditionalColumn FieldName="PRICE" />
                 			<AdditionalColumn FieldName="CODE" />
               		</AdditionalColumns>
          	</LookUpEditRelation>
    	</LookUpEditRelations>

</TableEditorPart>


<TableEditorPart Table="MATERIALSALE">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE" />
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="PRICE" />
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           <LookUpEditRelation>
           		<ShowGridMode>true</ShowGridMode>
               		<FilterByColumn>CLIENTID</FilterByColumn>
			<ShowUpperColumn>FIO2</ShowUpperColumn>
               		<AdditionalColumns>
                 			<AdditionalColumn FieldName="FIO2" />
                 			<AdditionalColumn FieldName="SURNAME" />
                 			<AdditionalColumn FieldName="NAME" />
                 			<AdditionalColumn FieldName="SECONDNAME" />
                 			<AdditionalColumn FieldName="CELLPHONE" />
                 			<AdditionalColumn FieldName="HOMEPHONE" />
                 			<AdditionalColumn FieldName="CARDNUMBER" />
                 			<AdditionalColumn FieldName="CARDTYPEID"><DeepLook>true</DeepLook></AdditionalColumn>
                 			<AdditionalColumn FieldName="DOLG" />
                 			<AdditionalColumn FieldName="DEPOSIT" />
               		</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>

	<NewButtons>
	</NewButtons>

</TableEditorPart>


<TableEditorPart Table="STOREINCOMEMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>

</TableEditorPart>

<TableEditorPart Table="STOREMOVEMENTMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTCOMEMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTLAY">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREOUTLAYADDITION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="MATERIALSALEDOCTOR">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
	<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="MANIPULATIONMATERIAL">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="STOREINCOME">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
				<KeyButton>N</KeyButton>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_INCOME_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="5"><ColumnName>{3}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="6"><ColumnName>{5}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="7"><ColumnName>{4}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар прихода">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SIID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
	                      			<DependentField>
        	                			<FieldId>Себестоимость</FieldId>
                	    				<SQL>select price0 from GET_MATERIAL_PRICE0 ({{Товар}})</SQL>
                      				</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                    			<GeneratedStaticControl ID="Себестоимость" ControlType="Number" />
                    			<GeneratedStaticControl ID="Ставка НДС" ControlType="Number" />
                      			<GeneratedStaticControl ID="За всю партию" ControlType="Checkbox" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeincome.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Печать этикеток</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-1 -{0}</ProgParam>
                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>Печать ценников</ButtonName>
                  		<ButtonIcon>16checkgreen.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\labels.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREINCOMEMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	<NewButtons>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-0 -{0}</ProgParam>
                    			<ColumnName>STOREINCOMEMATERIAL.ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>



	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="STOREMOVEMENT">
		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_MOVEMENT_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар перемещения">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
                      			<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SMID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
                      			</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storemovement.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREMOVEMENTMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="STOREOUTCOME">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить товар</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_STORE_OUTCOME_MATERIAL</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Товар списания">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Товар" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.SCANCODE, m.ARTICLE, m.NAME, mv.name, mg.name, mb.name,  m.price
					FROM material m, materialvendor mv, materialgroup mg, materialbrand mb
					where mv.id = m.materialvendorid
					    and mg.id = m.materialgroupid
					    and mb.id = m.materialbrandid
					    and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<DependentFields>
	                      			<DependentField>
        	                			<FieldId>Остаток</FieldId>
                	    				<SQL>select amountunit from GET_MATERIAL_CUR_AMOUNT_BY_SOID ({parentid}, {[ID]})</SQL>
                      				</DependentField>
					</DependentFields>
					<ColumnsMeta>
						<Column Id="SCANCODE"><Name>Штрихкод</Name></Column>
						<Column Id="ARTICLE"><Name>Артикул</Name></Column>
						<Column Id="NAME"><Name>Товар</Name></Column>
						<Column Id="NAME1"><Name>Производитель</Name></Column>
						<Column Id="NAME2"><Name>Группа товаров</Name></Column>
						<Column Id="NAME3"><Name>Марка</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
                      			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                       			<GeneratedStaticControl ID="Остаток" ControlType="Number">
						<ReadOnly>true</ReadOnly>
					</GeneratedStaticControl>
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
                	<NewButton>
                  		<ButtonName>Накладная</ButtonName>
                  		<ButtonIcon>16log.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\storeoutcome.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREOUTCOMEMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DICTCOURSEMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="COURSE">
			<DefaultButtons>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
               		<NewButtons>
                		<NewButton>
                  			<ButtonName>Оплатить курс</ButtonName>
                  			<ButtonIcon>cassa24.png</ButtonIcon>
	        	        	<LaunchBaseProcedure>
	        	            		<ProcedureName>COURSE_ADD_PAYMENT</ProcedureName>
	           			<ProcedureParams>
						<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
						<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
						<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
						<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
					</ProcedureParams>
	                    		<ParamForm ID="Оплата курса услуг">
                			<GeneratedDataControls>
                  			<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
					</GeneratedDataControls>
                        		<GeneratedStaticControls>
                        			<GeneratedStaticControl ID="К оплате" ControlType="String">
							<SQLReplacement>select summa - payment as "VALUE" from course where id = {[ID]}</SQLReplacement>
							<ReadOnly>true</ReadOnly>
		       	              			<DependentFields>
								<DependentField>
        	        	        				<FieldId>Оплата</FieldId>
                	        					<SQL>cast('{{К оплате}}' as decimal(15,2))</SQL>
                      						</DependentField>
							</DependentFields>
        	               			</GeneratedStaticControl>
						<GeneratedStaticControl ID="Оплата" ControlType="Number">
                        			</GeneratedStaticControl>
        	              			<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
			                        	<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                        		</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
                		</NewButton>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>COURSE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
               		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="COURSEMANIPULATION"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="COURSEPAYMENT"> 
			<DefaultButtons>
        			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        			<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        		</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="COURSEMANIPULATION">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="COURSEPAYMENT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="MANIPULATION">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="MANIPULATIONMATERIAL" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONPERCENT" Index="1"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONMATERIALADD" Index="2"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="MATERIAL">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="STOREINCOMEMATERIAL" Index="0"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
		<NewButtons>
                	<NewButton>
                  		<ButtonName>Печать одной этикетки</ButtonName>
                  		<ButtonIcon>16checkpurple.png</ButtonIcon>
                  		<LaunchProgram>
                    			<ProgAddress>GenDocBarcode\SycretBarCodePrinter.exe</ProgAddress>
                    			<ProgParam>-0 -{0}</ProgParam>
                    			<ColumnName>STOREINCOMEMATERIAL.ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
		</NewButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MATERIALSALE"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MATERIALSALEDOCTOR"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREMOVEMENTMATERIAL"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTCOMEMATERIAL"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTLAY"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="STOREOUTLAYADDITION"> 
		<DefaultButtons>
       			<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        	</DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DEPOSIT">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="DEPARTMENT">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DOCTOR" Index="0"> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="MANIPULATIONGROUP" Index="1"> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="APPOINTMENT" Index="2"> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>



<TableEditorPart Table="DICTCOURSE">

		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить услугу</ButtonName>
              			<ButtonIcon>add24.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_DICTCOUSEMANIPULATION</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="4"><ColumnName>{2}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Услуга курса">
                  		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
					SELECT m.ID, m.NAME, m.PRICE, m.CODE, mg.NAME, mg2.NAME, mg3.NAME
					FROM manipulation m, manipulationgroup mg, manipulationgroup2 mg2, manipulationgroup3 mg3 
					where 
						m.manipulationgroupid = mg.id
						and m.manipulationgroupid2 = mg2.id
						and m.manipulationgroupid3 = mg3.id
						and m.isactive = 1
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="PRICE"><Name>Стоимость</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Стоим. 1 услуги" ControlType="Number" />
                    			<GeneratedStaticControl ID="Кол-во" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations>
        <ForeignKeyRelation ChildTable="DICTCOURSEMANIPULATION">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="MATERIALOUTLAYSTANDARD">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
               	<FilterByColumn>MATERIALID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
               	<AdditionalColumns>
                 		<AdditionalColumn FieldName="SCANCODE" />
                 		<AdditionalColumn FieldName="ARTICLE"></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALVENDORID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="MATERIALBRANDID"><DeepLook>true</DeepLook></AdditionalColumn>
                 		<AdditionalColumn FieldName="PRICE" />
                 		<AdditionalColumn FieldName="CURREST"></AdditionalColumn>
               	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<TableEditorPart Table="SUBSCRIPTION">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONVISIT" Index="0"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONMANIP" Index="1"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONFREEZE" Index="2"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="SUBSCRIPTIONPROLONG" Index="3"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="ACTIONS">
		<NewButtons>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 1</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_1</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 1">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 2</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_2</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 2">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP2</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Добавить группу услуг 3</ButtonName>
              			<ButtonIcon>new.bmp</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>ADD_ACTION_MANIP_GROUP_3</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Группа услуг 3">
                		<GeneratedDataControls>
                  			<GeneratedDataControl ID="Группа услуг" ControlType="LookUpEdit">
                    				<DataSource>SELECT ID, NAME FROM MANIPULATIONGROUP3</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>NAME</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
					</GeneratedDataControl>
                  		</GeneratedDataControls>
                  		<GeneratedStaticControls>
                       			<GeneratedStaticControl ID="Скидка в %" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="ACTIONMANIPULATION"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 


	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="ACTIONMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>

<TableEditorPart Table="INVENTORY">


		<NewButtons>
			<NewButton>
		              	<ButtonName>Сформировать приход</ButtonName>
              			<ButtonIcon>16storeincome.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_GEN_STOREINCOME</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                		</ProcedureParams>
              			</LaunchBaseProcedure>
            		</NewButton>
			<NewButton>
		              	<ButtonName>Сформировать списание</ButtonName>
              			<ButtonIcon>16storeoutcome.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_GEN_STOREOUTCOME</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
                		</ProcedureParams>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INVENTORYMATERIAL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
			<NewButton>
		              	<ButtonName>Фактический остаток</ButtonName>
              			<ButtonIcon>16store.png</ButtonIcon>
              			<LaunchBaseProcedure>
                		<ProcedureName>INVENTORY_SET_REAL_AMOUNT</ProcedureName>
                		<ProcedureParams>
	                      		<ProcedureParam Position="1"><ColumnName>INVENTORYMATERIAL.ID</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="2"><ColumnName>{1}</ColumnName></ProcedureParam>
                  			<ProcedureParam Position="3"><ColumnName>{0}</ColumnName></ProcedureParam>
                		</ProcedureParams>
                		<ParamForm ID="Фактический остаток">
				<GeneratedDataControls>
	                    		<GeneratedDataControl ID="Ед. измерения" ControlType="LookUpEdit">
        	              			<DataSource>SELECT ID, NAME FROM MEASUREMENTUNIT</DataSource>
                	      			<DataColumn>ID</DataColumn>
                      				<DisplayColumn>NAME</DisplayColumn>
	               				<SqlAddition>{0}</SqlAddition>
        	            		</GeneratedDataControl>
				</GeneratedDataControls>
                  		<GeneratedStaticControls>
                    			<GeneratedStaticControl ID="Факт. остаток" ControlType="Number" />
                  		</GeneratedStaticControls>
                		</ParamForm>
              			</LaunchBaseProcedure>
            		</NewButton>
		</NewButtons>

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="CARDTYPE">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DISCOUNTMANIPULATION" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DISCOUNT" Index="1"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DISCOUNTMATERIAL" Index="2"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DEPOSITBONUS" Index="3"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<TableEditorPart Table="DISCOUNTMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSE">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INDCOURSEVISIT" Index="0"> 
		<DefaultButtons>
	        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="INDCOURSEPAYMENT" Index="1"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>
			<NewButtons>
			<NewButton>
                  		<ButtonName>Чек (по оплатам)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Печать чека (квитанции)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcheckpay.xml -1 -1</ProgParam>
                    				<ColumnName>INDCOURSEPAYMENT.ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			</NewButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
		<NewButtons>
                	<NewButton>
                  		<ButtonName>На печать врачу</ButtonName>
                  		<ButtonIcon>icon.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcourse.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
                	<NewButton>
                  		<ButtonName>На печать клиенту</ButtonName>
                  		<ButtonIcon>icon.png</ButtonIcon>
                  		<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcourse_forclient.xml -0 -0</ProgParam>
	                    			<ColumnName>ID</ColumnName>
                  		</LaunchProgram>
                	</NewButton>
			<NewButton>
                  		<ButtonName>Оплатить программу</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_PAY</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ColumnName>{2}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="4"><ColumnName>{3}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="5"><ColumnName>{4}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Вид оплаты">
                			<GeneratedDataControls>
                  				<GeneratedDataControl ID="Вид оплаты" ControlType="LookUpEdit">
                    					<DataSource>SELECT ID, NAME FROM PAYMENTTYPE</DataSource>
							<DataColumn>ID</DataColumn>
							<DisplayColumn>NAME</DisplayColumn>
							<SqlAddition>{0}</SqlAddition>
						</GeneratedDataControl>
					</GeneratedDataControls>
	                  		<GeneratedStaticControls>
		                       		<GeneratedStaticControl ID="Инд. программа" ControlType="String">
							<SQLReplacement>
								select name as "VALUE"
								from indcourse
								where id = {[ID]}
							</SQLReplacement>
							<ReadOnly>true</ReadOnly>
						</GeneratedStaticControl>
		                       		<GeneratedStaticControl ID="Сумма" ControlType="String">
							<SQLReplacement>
								select dolg as "VALUE"
								from indcourse
								where id = {[ID]}
							</SQLReplacement>
							<ReadOnly>false</ReadOnly>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Дата оплаты" ControlType="TimeSpan">
		                        		<DefaultValue>NOW</DefaultValue>
						</GeneratedStaticControl>
                      				<GeneratedStaticControl ID="Основание платежа" ControlType="String" />
                  			</GeneratedStaticControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
			        </NewButton>
			<NewButton>
                  		<ButtonName>Чек (общий)</ButtonName>
                  		<ButtonIcon>do24.png</ButtonIcon>
				<ToolTip>Печать чека (квитанции)</ToolTip> 
                  			<LaunchProgram>
                    				<ProgAddress>GenWordDoc\GenWordDoc.exe</ProgAddress>
                    				<ProgParam>-{0} -Plugins\GenWordDoc\indcheck.xml -1 -1</ProgParam>
                    				<ColumnName>ID</ColumnName>
                  			</LaunchProgram>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Отменить оплату</ButtonName>
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_DELETE_PAY</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
			        </NewButton>
		</NewButtons>
</TableEditorPart>


<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSEVISIT">

		<NewButtons>
			<NewButton>
                  		<ButtonName>Зачесть услугу</ButtonName>
				<ToolTip>Добавить уже оказанную ранее услугу и зачесть ее оплату</ToolTip> 
                  		<ButtonIcon>new.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>INDCOURSE_ADD_DONE_MANIP</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Выбор услуги">
		             		<GeneratedDataControls>
                    		<GeneratedDataControl ID="Услуга" ControlType="Grid">
                      			<DataSource>
					SELECT ID, OPERATIONDATE, NAME, TOBEPAYED, CODE, NAME1, NAME2, NAME3
					FROM INDCOURSE_GET_DONE_MANIPLIST ('{[ID]}')
					</DataSource>
                      			<DataColumn>ID</DataColumn>
                      			<DisplayColumn>NAME</DisplayColumn>
                      			<SqlAddition>{0}</SqlAddition>
                      			<NullString>0</NullString>
					<ColumnsMeta>
						<Column Id="OPERATIONDATE"><Name>Дата</Name></Column>
						<Column Id="NAME"><Name>Услуга</Name></Column>
						<Column Id="TOBEPAYED"><Name>Сумма к оплате</Name></Column>
						<Column Id="CODE"><Name>Код услуги</Name></Column>
						<Column Id="NAME1"><Name>Группа услуг</Name></Column>
						<Column Id="NAME2"><Name>Группа услуг 2</Name></Column>
						<Column Id="NAME3"><Name>Группа услуг 3</Name></Column>
					</ColumnsMeta>
                    		</GeneratedDataControl>
	                    		</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="INDCOURSEMANIPULATION" Index="0"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>

<Comment>2011-05-29</Comment>
<TableEditorPart Table="INDCOURSEMANIPULATION">
<Comment>Grid instead of lookupedit</Comment>
           <LookUpEditRelations>
           <LookUpEditRelation>
           	<ShowGridMode>true</ShowGridMode>
           	<FilterByColumn>MANIPULATIONID</FilterByColumn>
		<ShowUpperColumn>NAME</ShowUpperColumn>
        	<AdditionalColumns>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID2"><DeepLook>true</DeepLook></AdditionalColumn>
               			<AdditionalColumn FieldName="MANIPULATIONGROUPID3"><DeepLook>true</DeepLook></AdditionalColumn>
	               		<AdditionalColumn FieldName="PRICE" />
              			<AdditionalColumn FieldName="CODE" />
           	</AdditionalColumns>
           </LookUpEditRelation>
           </LookUpEditRelations>
</TableEditorPart>


<Comment>SMS start 2011-09-15</Comment>
<TableEditorPart Table="SMSGROUP">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
	             	<NewButton>
                  		<ButtonName>Удалить</ButtonName>
                  		<ButtonIcon>delete.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	            	<ProcedureName>SMS_DELETE_GROUP</ProcedureName>
	           		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
                	</NewButton>
			<NewButton>
                  		<ButtonName>Добавить всех клиентов</ButtonName>
				<ToolTip>Добавить всех клиентов с номерами телефонов</ToolTip> 
                  		<ButtonIcon>16specs.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_ADD_ALL_CLIENTS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Добавить одного клиента</ButtonName>
				<ToolTip>Добавить всех клиентов с номерами телефонов</ToolTip> 
                  		<ButtonIcon>16clientok.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_ADD_CLIENT</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="3"><ConstantValue>0</ConstantValue></ProcedureParam>
				</ProcedureParams>
               		                <ParamForm ID="Выбор клиента">
                			<GeneratedDataControls>
	                    		<GeneratedDataControl ID="Клиент" ControlType="Grid">
        	              			<DataSource>SELECT ID, CARDNUMBER, SURNAME, NAME, SECONDNAME, CELLPHONE, FIO2 FROM CLIENT</DataSource>
        	              			<DataColumn>ID</DataColumn>
                	      			<DisplayColumn>FIO2</DisplayColumn>
                      				<SqlAddition>{0}</SqlAddition>
	                      			<NullString>0</NullString>
						<ColumnsMeta>
							<Column Id="CARDNUMBER"><Name>Номер карты</Name></Column>
							<Column Id="SURNAME"><Name>Фамилия</Name></Column>
							<Column Id="NAME"><Name>Имя</Name></Column>
							<Column Id="SECONDNAME"><Name>Отчество</Name></Column>
							<Column Id="CELLPHONE"><Name>Телефон</Name></Column>
							<Column Id="FIO2"><Name>Клиент</Name></Column>
						</ColumnsMeta>
	                    		</GeneratedDataControl>
					</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Отменить рассылку</ButtonName>
				<ToolTip>Отменить / остановить рассылку</ToolTip> 
                  		<ButtonIcon>cancel24.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_SET_STATUS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ConstantValue>4</ConstantValue></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
			<NewButton>
                  		<ButtonName>Активировать рассылку</ButtonName>
				<ToolTip>Активировать ранее отмененную рассылку</ToolTip> 
                  		<ButtonIcon>16do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
	        	        <ProcedureName>SMS_GROUP_SET_STATUS</ProcedureName>
        	            	<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      		<ProcedureParam Position="2"><ConstantValue>1</ConstantValue></ProcedureParam>
				</ProcedureParams>
		            	</LaunchBaseProcedure>
		        </NewButton>
		</NewButtons>

	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="SMSGROUPCLIENT" Index="0"> 
		<DefaultButtons>
        		<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>
<Comment>SMS finish</Comment>


<TableEditorPart Table="MEDRECORD">

		<DefaultButtons>
        		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
	        </DefaultButtons>

		<NewButtons>
                  	<NewButton>
				<DeletedAfterAction>true</DeletedAfterAction>
                  		<ButtonName>Подписать</ButtonName>
                  		<ButtonIcon>do.png</ButtonIcon>
	        	        <LaunchBaseProcedure>
 	        	            	<ProcedureName>MED_RECORD_SUBSCRIBE</ProcedureName>
        	            		<ProcedureParams>
					<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="2"><ColumnName>{0}</ColumnName></ProcedureParam>
	                      			<ProcedureParam Position="3"><ColumnName>{1}</ColumnName></ProcedureParam>
				</ProcedureParams>
		                    	<ParamForm ID="Удаление записи">
                        			<GeneratedStaticControls>
                          				<GeneratedStaticControl ID="Личный ключ" ControlType="String" />
                        			</GeneratedStaticControls>
                				<GeneratedDataControls>
                  					<GeneratedDataControl ID="Администратор" ControlType="LookUpEdit">
								<DefaultValue>AUTH_ID</DefaultValue>
                    						<DataSource>SELECT ID, LOGIN FROM EMPLOYEE</DataSource>
						<DataColumn>ID</DataColumn>
						<DisplayColumn>LOGIN</DisplayColumn>
						<SqlAddition>{0}</SqlAddition>
						<ReadOnly>true</ReadOnly>
					</GeneratedDataControl>
				</GeneratedDataControls>
                	    		</ParamForm>
		            	</LaunchBaseProcedure>

			</NewButton>
		</NewButtons>
</TableEditorPart>

<TableEditorPart Table="MEDRECORDCONTENT">
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
</TableEditorPart>


<TableEditorPart Table="DOCTOR">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="MATERIALSALEDOCTOR"> 
	<DefaultButtons>
        	<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="CERTIFICATESALE">
	<DefaultButtons>
        	<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	              	  <NewButtons>
                		<NewButton>
	       				<ButtonIcon>delete.png</ButtonIcon>
                         		<ButtonName>Удалить</ButtonName>
	        	        	<LaunchBaseProcedure>
	        	            	<ProcedureName>CERTIFICATE_DELETE</ProcedureName>
        	            		<ProcedureParams>
	                      			<ProcedureParam Position="1"><ColumnName>ID</ColumnName></ProcedureParam>
					</ProcedureParams>
		            	</LaunchBaseProcedure>
                             	</NewButton>
	              	  </NewButtons>
</TableEditorPart>


<TableEditorPart Table="DICTSALARYPROGRESS">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DICTSALARYPROGRESSDETAIL"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DICTSALARYPROGRESSSALE"> 
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="DICTSUBSCRIPTION">
	<ForeignKeyRelations> 
	<ForeignKeyRelation ChildTable="DICTSUBSCRIPTIONDOW"> 
	<DefaultButtons>
        	<DefaultButton Function="AddNew"><Visible>false</Visible></DefaultButton>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
	</ForeignKeyRelation> 
	<ForeignKeyRelation ChildTable="DICTSUBSCRIPTIONMANIP"> 
	<DefaultButtons>
		<LoadEditorOnCreate>false</LoadEditorOnCreate> 
        </DefaultButtons>
	</ForeignKeyRelation> 
	</ForeignKeyRelations> 
</TableEditorPart>


<TableEditorPart Table="DICTSUBSCRIPTIONDOW">
	<DefaultButtons>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

<TableEditorPart Table="CLIENTCONTACT">
	<DefaultButtons>
       		<DefaultButton Function="Delete"><Visible>false</Visible></DefaultButton>
        </DefaultButtons>
</TableEditorPart>

</TableEditorParts>

    </Role>



  </Roles>
</NavigatorContent>
